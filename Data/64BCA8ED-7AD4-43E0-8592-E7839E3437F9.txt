2ä¸€ã€ ç·£ç”±èˆ‡ç›®çš„ï¼š
å‚³çµ±å‹çš„è½‰å‹•é¦¬é”éœ€è¦ç·šå‹é‹å‹•æ™‚ï¼Œå¸¸
é€éå…¶ä»–çš„ä»²ä»‹æ©Ÿæ¢°çµæ§‹ã€‚ä¾‹å¦‚ï¼šé½’è¼ªã€å°
èºæ¡¿ã€çš®å¸¶â€¦â€¦ã€‚ä½†æ˜¯åŠ å…¥é€™ä¸€äº›çµæ§‹ä¹‹å¾Œï¼Œ
ç”±æ–¼ä¸æ˜¯ç›´æ¥é©…å‹•ï¼Œä¾ç„¶è¦é€éé€™äº›æ©Ÿæ§‹ï¼Œ
ä¾†å°‡æ—‹è½‰çš„é‹å‹•è½‰æ›ç‚ºç·šæ€§çš„é‹å‹•ã€‚é€™å¾€å¾€
ä¹Ÿå¼•å…¥çš„ä¸€äº›å•é¡Œã€‚è­¬å¦‚ï¼šèƒŒéš™(backlash)é€ 
æˆçš„å®šä½ä¸ç²¾ç¢ºã€æ‘©æ“¦åŠ›çš„å¢åŠ ã€çœ¾å¤šçµæ§‹
æ‰€é€ æˆçš„èƒ½é‡æå¤±ã€æ•…éšœç‡é«˜ã€æ§åˆ¶èˆ‡ç¶­ä¿®
çš†ä¸æ˜“ã€‚åœ¨ç·šå‹é‹å‹•çš„å ´åˆä¸­ç·šå‹é¦¬é”æ¯”èµ·
è½‰å‹•å‹é¦¬é”æœ‰ä¸‹åˆ—ä¹‹å¥½è™•[1-2]ï¼Œçµæ§‹ç°¡å–®ã€
ç›´æ¥é©…å‹•ï¼Œç²¾åº¦é«˜ã€è¼ƒä½çš„ç£¨æ“¦æå¤±ã€æ•ˆç‡
è¼ƒé«˜ã€é€Ÿåº¦å¿«ã€è¡Œç¨‹é•·ã€åœ¨ä¸€å€‹å®šå­ä¸Šå¯å®‰
è£å¤šå€‹å‹•å­ç­‰ã€‚å› æ­¤ç·šå‹é¦¬é”å»£æ³›çš„è¢«é‹ç”¨
åœ¨ä»¥ä¸‹çš„å ´åˆä¸­ï¼šè‡ªå‹•åŒ–æ©Ÿå…·ã€é›·å°„åˆ‡å‰²æ©Ÿã€
é»è† æ©Ÿã€å€‰å„²è¨­å‚™ã€åŠå°é«”å» è¨­å‚™ã€X-Y å¹³
å°ã€é›¶ä»¶æŠ“å–æ©Ÿã€é‹è¼¸ç³»çµ±ã€è¡¨é¢è™•ç†å» ã€
3D å·¥ä½œæ©Ÿâ€¦çš„å ´æ‰€ä¸­ã€‚è¿‘å¹´ä¾†ï¼Œæ–‡ç»ä¸­æœ‰é—œ
æ–¼ç·šå‹é¦¬é”ä¹‹é©…å‹•æ§åˆ¶æŠ€è¡“ä¹Ÿå¼•èµ·å»£æ³›ä¹‹ç ”
ç©¶[3-5]ã€‚
éš¨è‘—åŠå°é«”è£½é€ ä¹‹é€²æ­¥ï¼Œå„ç¨®æ€§èƒ½å„ªç•°ä¹‹
æ™¶ç‰‡ä¸æ–·çš„è¢«é–‹ç™¼å®Œæˆï¼Œå¦‚æ•¸ä½è¨Šè™Ÿè™•ç†å™¨
(DSP)æ™¶ç‰‡ã€ç¾å ´å¯ç¨‹å¼é‚è¼¯é–˜é™£åˆ—(FPGA)
æ™¶ç‰‡ã€å¾®æ§åˆ¶å™¨(Î¼C)æ™¶ç‰‡ç­‰ï¼Œè€Œé€™äº›æ™¶ç‰‡å¸¸å…·
æœ‰é«”ç©å°ã€åƒ¹æ ¼ä½ã€åŠŸèƒ½å¼·--å…·æœ‰é€šè¨Šã€ä¼ºæœã€
å³æ™‚è¨ˆç®—ã€è³‡æ–™å„²å­˜ã€å¯ç¨‹å¼ç­‰å„ªç•°æ€§èƒ½ï¼Œå¯
æä¾›å„è¡Œæ¥­ç™¼å±•åŠè¨­è¨ˆé©åˆè©²è¡Œæ¥­ä¹‹æ‡‰ç”¨è»Ÿ
ç¡¬é«”ï¼Œä»¥ææ˜‡å…¶ç”¢å“èˆ‡è¨­å‚™ä¹‹å“è³ªèˆ‡åŠŸèƒ½ï¼Œä½¿
ä¹‹é”åˆ°å°å‹åŒ–ã€ç¶²è·¯åŒ–ã€ä½æˆæœ¬ã€çœå…ƒä»¶ã€æ™º
æ…§å‹èˆ‡é«˜æ€§èƒ½çš„ç›®çš„ã€‚ä¹Ÿå› ç‚ºæ­¤å¾®è™•ç†æ©Ÿã€æ™¶
ç‰‡è£½ç¨‹åŠæ•¸ä½è¨­è¨ˆæŠ€è¡“ä¹‹é€²æ­¥å¿«é€Ÿï¼Œå…¨æ•¸ä½åŒ–
äº¤æµä¼ºæœé¦¬é”é©…å‹•å™¨ç³»çµ±æ•´åˆæ™¶ç‰‡æˆç‚ºç™¼å±•
è¶¨å‹¢ï¼Œä½¿å¾—äº¤æµé¦¬é”çš„ç£å ´å°å‘æ§åˆ¶ã€é›»æµè¿´
è·¯ã€é€Ÿåº¦è¿´è·¯ã€ä½ç½®è¿´è·¯ç­‰æ§åˆ¶å™¨ä¹‹è¨ˆç®—ã€è»Œ
è·¡é‹å‹•æ§åˆ¶ç­‰åŠŸèƒ½ï¼Œçš†èƒ½åœ¨å–®é¡†æ™¶ç‰‡å…§ä»¥è»Ÿç¡¬
é«”æ–¹å¼å¯¦ç¾ã€‚[6-9]
åœ¨ç³»çµ±å–®æ™¶ç‰‡ SOPC è¶¨å‹¢ä¸‹ï¼ŒIC è¨­è¨ˆå…¬å¸
å¿…é ˆåœ¨å–®ä¸€æ™¶ç‰‡æ•´åˆå¤§é‡ IPï¼Œæ‰èƒ½æä¾›æ™¶ç‰‡
åŠ å€¼åŠŸèƒ½ï¼Œå› æ­¤ä¿ƒä½¿æ™¶ç‰‡ä¾›æ‡‰å•†æ¨å‡ºå…¨ç³»åˆ—
SOPC å–®æ™¶ç‰‡[10-12]ä¾›çµ¦å„ç”¢æ¥­ç ”è£½é«˜ç§‘æŠ€
ç”¢å“ã€‚ä»¥ SOPC æ™¶ç‰‡è€Œè¨€ï¼Œç›®å‰æœ‰ Alteraã€
Xilinkã€Lattice ç­‰å…¬å¸æ¨å‡ºã€‚å°± Altera SOPC
æ™¶ç‰‡ï¼Œæœ‰ Stratix IIã€APEX IIã€Mercuryã€
ARM-Based Excaliburã€APEX 20Kã€FLEX 10K
åŠ ACEX 1K ç­‰ç³»åˆ—æ™¶ç‰‡[12]ã€‚å…¶ä¸­ Stratix æ™¶
ç‰‡å…·æœ‰æœ€é«˜æ•ˆç‡ã€æœ€é«˜å¯†åº¦ã€å»£é—Šçš„è¨˜æ†¶é«”è³‡
æºåŠè±å¯Œç‰¹è‰²çš„å¹³å°ï¼Œæœ€é©åˆä½œç‚ºç ”ç™¼ç”¨ä¹‹é©—
è­‰æ™¶ç‰‡ã€‚Altera Stratix EP2S60ï¼Œå…±æœ‰ 48,352
å€‹ ALUTs å…ƒä»¶ï¼Œ æœ€å¤§æœ‰ 718 ä½¿ç”¨è€… I/O è…³
ä½ï¼Œ36 å€‹ DSP æ–¹å¡Šï¼Œå…±æœ‰ 2,544,192 bits çš„
è¨˜æ†¶é«”ï¼Œè€Œ Nios åµŒå…¥æ˜¯è™•ç†å™¨æœ‰ 16 ä½å…ƒæˆ–
æ˜¯ 32 ä½å…ƒå¯è¦åŠƒ CPU ç¨‹å¼ç¢¼ï¼Œ1~20Kbytes
æ™¶ç‰‡å…§éƒ¨è¨˜æ†¶é«”èˆ‡ 4Gbytes æ™¶ç‰‡å¤–éƒ¨è¨˜æ†¶
é«”ï¼Œå¯ä»¥ä¸‹è¼‰åˆ° FPGA èˆ‡ IP é›»è·¯ä¸€èµ·é‹ä½œä¾†
çµ„åˆå‡º SoPC ç’°å¢ƒã€‚
å› æ­¤æœ‰é‘‘æ–¼ SOPC æŠ€è¡“(Altera FPGA æ™¶ç‰‡
åŠå…§å«ä¸€é¡† Nios åµŒå…¥å¼è»Ÿæ ¸å¿ƒè™•ç†å™¨)ä¹‹å„ª
é»ï¼Œæœ¬è¨ˆç•«æœ¬å¹´åº¦å°‡å¼•å…¥ä¸¦ç”¨ä¾†ç ”è£½ç·šå‹é¦¬é”
XY å¹³å°ä¼ºæœé©…å‹•æ§åˆ¶å™¨ä¹‹ç³»çµ±æ•´åˆæ™¶ç‰‡ï¼Œå¦‚
åœ– 1 æ‰€ç¤ºã€‚æ­¤ç³»çµ±æ•´åˆæ™¶ç‰‡å…§ä¸»è¦åŒ…æ‹¬å…©å€‹æ¨¡
çµ„ï¼Œç¬¬ä¸€å€‹æ¨¡çµ„åœ¨ Nios è™•ç†å™¨å…§ä»¥è»Ÿé«”ç¨‹å¼
å¯¦ç¾ï¼Œå…¶åŠŸèƒ½åŒ…å«é‹å‹•è»Œè·¡ä¹‹è¨ˆç®—ï¼›ç¬¬äºŒå€‹æ¨¡
çµ„åœ¨ FPGA æ™¶ç‰‡å…§ä»¥æ•¸ä½ç¡¬é«”æ–¹å¼å¯¦ç¾ï¼Œå…¶
åŠŸèƒ½ä¸»è¦ç‚ºé›™è»¸ç·šå‹é¦¬é”ä½ç½®é©æ‡‰æ€§æ¨¡ç³Šæ§
åˆ¶æ³•å‰‡ã€é€Ÿåº¦è¿´è·¯æ¯”ä¾‹æ§åˆ¶å™¨åŠé›»æµè¿´è·¯å‘é‡
æ§åˆ¶ä¹‹è¨ˆç®—é›»è·¯ã€‚æœ¬è¨ˆç•«æ‰€å®Œæˆä¹‹ç³»çµ±æ™¶ç‰‡æŠ€
è¡“ï¼Œä¸åƒ…å¯ä½¿é›™è»¸é§†å‹•æ§åˆ¶å™¨æ•¸ä½åŒ–ï¼Œå¯æé«˜
ç³»çµ±æ€§èƒ½åŠç©©å¥æ€§ï¼Œä¸¦ä¸”å¯ä½¿ç”¢å“å°å‹åŒ–åŠé™
ä½æˆæœ¬ã€‚
äºŒã€ ç ”ç©¶æ–¹æ³•ï¼š
æ­¤è¨ˆç•«ä»Šå¹´åº¦è‘—é‡ã€é›™è»¸ç·šå‹é¦¬é”é©…å‹•
ä¹‹ XY å¹³å°ä¹‹é‹å‹•æ§åˆ¶æŠ€è¡“ç™¼å±•ã€ï¼Œä¸¦ä»¥æœ‰é™
ç‹€æ…‹æ©Ÿæ³•è¨­è¨ˆé©æ‡‰æ€§æ¨¡ç³Šæ§åˆ¶å™¨ï¼ŒåŠä»¥
VHDL èªè¨€æè¿°ã€‚åœ– 1 ç‚ºä»¥ SOPC å»ºæ§‹çš„ç·š
å‹é¦¬é” XY å¹³å°ä¼ºæœæ§åˆ¶å™¨ç³»çµ±æ¶æ§‹ã€‚åœ–ä¸­
Nios åµŒå…¥å¼è™•ç†å™¨åŸ·è¡Œé‹å‹•è»Œè·¡è¨ˆç®—ï¼Œè€Œé›™
è»¸ç·šå‹é¦¬é”ä¹‹é›»æµè¿´è·¯ã€é€Ÿåº¦è¿´è·¯åŠä½ç½®è¿´
è·¯ä¹‹æ§åˆ¶å™¨å…¨éƒ¨åœ¨ FPGA ä»¥ç¡¬é«”å¯¦ç¾ã€‚è©³ç´°
ä¹‹è¨­è¨ˆæ–¹æ³•èªªæ˜å¦‚ä¸‹ï¼š
2.1 æ°¸ç£ç·šå‹åŒæ­¥é¦¬é”çš„æ•¸å­¸æ¨¡å¼
å„è»¸æ°¸ç£ç·šå‹åŒæ­¥é¦¬é”çš„ä¼ºæœä¿‚çµ±æ§åˆ¶
æ–¹å¡Šåœ–å¦‚åœ– 1 æ‰€ç¤ºï¼Œé¦¬é”çš„å‹•æ…‹æ–¹ç¨‹å¼å¦‚ä¸‹
æ‰€è¿°
d
d
qp
d
q
d
d
sd v
L
ix
L
L
i
L
R
dt
di 1ï€«
ï´
ï°ï€«ï€­ï€½ ï€¦ (1)
q
q
p
q
f
q
q
s
dp
q
dq v
L
1
x
L
i
L
R
ix
L
L
dt
di ï€«
ï´
ï¬ï°ï€­ï€­
ï´
ï°ï€­ï€½ ï€¦ï€¦ (2)
4å…¶ä¸­
ï› ï2rm2m )nk(x)nk(x2
1
)nk(e
2
1
)nk(J ï€«ï€­ï€«ï€½ï€«ï€½ï€«
(16)
è€Œ n,mc çš„èª¿æ•´æ–¹å¼ï¼Œæ¡ç”¨æ¢¯åº¦ä¸‹é™æ³•ï¼Œä¹Ÿå°±æ˜¯
æœæˆæœ¬å‡½æ•¸å€¼æ¸›å°‘çš„æ–¹å‘èª¿æ•´
)k(c
)nk(J
)k(c
n,m
n,m ï‚¶
ï€«ï‚¶ï€­ï‚µï„ (17)
è©³ç´°å»å¹´è¨ˆç•«å·²æ¨å°ï¼Œå¯ç²å¾—
)k(ed)KK(K)B(Sign
)k(ed)KK(BK)k(c
mm,nIpv
mm,nIpvn,m
ï€«ï‚»
ï€«ï€½
ï¡
ï¡ï„ (18)
ç·šå‹é¦¬é”é©æ‡‰æ€§æ¨¡ç³Šæ§åˆ¶å™¨ä¹‹ç¨‹å¼å°‡åœ¨
FPGA æ™¶ç‰‡å…§ä»¥ç¡¬é«”å¯¦ç¾ã€‚
2.3 é‹å‹•è»Œè·¡è¦åŠƒï¼š
åœ“å½¢ã€æ˜Ÿå½¢åŠçª—å½¢è»Œè·¡å¸¸ç”¨ä¾†æ¸¬è©¦ XY å¹³
å°çš„é‹å‹•æ€§èƒ½ã€‚æ­¤è™•åƒ…åˆ—å‡ºåœ“å½¢åŠçª—å½¢è»Œè·¡
çš„è¨ˆç®—å…¬å¼ï¼Œå¦‚ä¸‹ã€‚
(1)åœ“å½¢è»Œè·¡ï¼š
åœ“å½¢è»Œè·¡å¦‚åœ– 6 å·¦åœ–æ‰€ç¤ºï¼Œåœ“å½¢è»Œè·¡æ–¹
ç¨‹å¼å¦‚ä¸‹ï¼š
1
sin( )
cos( )
i i
i i
i i
x r
y r
ï± ï± ï±
ï±
ï±
ï€­ï€½ ï€«ï„
ï€½
ï€½
(19)
å…¶ä¸­ ï±ï„ ç‚ºè§’åº¦è®ŠåŒ–é‡ï¼› r ç‚ºåœ“åŠå¾‘ï¼› ix ç‚º X
è»¸å‘½ä»¤è»Œè·¡ï¼› iy ç‚º Y è»¸å‘½ä»¤è»Œè·¡ï¼›ç¶“ç”±ä¸Šè¿°
ä¹‹è»Œè·¡æ–¹ç¨‹å¼ï¼Œéš¨æ™‚é–“ç¶“éè§’åº¦ç´¯åŠ å³å¯ç”¢
ç”Ÿåœ“å½¢è»Œè·¡ï¼Œå°±ç”± ï±ï„ çš„å¤§å°å¯æ”¹è®Šè½‰å­é‹å‹•
çš„é€Ÿåº¦ã€‚
(2) æ˜Ÿå½¢è»Œè·¡
æ˜Ÿå½¢è»Œè·¡è¦åŠƒå¦‚åœ– 6 å³åœ–æ‰€ç¤ºï¼Œæ˜Ÿå½¢è»Œ
è·¡æ–¹ç¨‹å¼å¯ä»¥åˆ†æˆäº”å€‹éƒ¨ä»½ï¼Œå‹•ä½œæ™‚é–“çš†ç‚º
tï¼Œæ˜Ÿå½¢è»Œè·¡æ–¹ç¨‹å¼å¦‚ä¸‹ï¼š
a è»Œè·¡ï¼š
1
1
i i
i i
x S x
y y
ï€­
ï€­
ï€½ ï€«
ï€½
(20)
b è»Œè·¡ï¼š
1
1
sin 54
sin 36
i i
i i
x S x
y S y
ï‚°
ï€­
ï‚°
ï€­
ï€½ï€­ïƒ— ï€«
ï€½ï€­ïƒ— ï€«
(21)
c è»Œè·¡ï¼š
1
1
sin18
sin 72
i i
i i
x S x
y S y
ï‚°
ï€­
ï‚°
ï€­
ï€½ï€­ïƒ— ï€«
ï€½ï€­ïƒ— ï€«
(22)
d è»Œè·¡ï¼š
1
1
sin18
sin 72
i i
i i
x S x
y S y
ï‚°
ï€­
ï‚°
ï€­
ï€½ ïƒ— ï€«
ï€½ï€­ïƒ— ï€«
(23)
e è»Œè·¡ï¼š
1
1
sin 54
sin 36
i i
i i
x S x
y S y
ï‚°
ï€­
ï‚°
ï€­
ï€½ï€­ïƒ— ï€«
ï€½ ïƒ— ï€«
(24)
å…¶ä¸­ S ç‚ºä½ç½®å¢åŠ é‡ï¼Œå…¶å¤§å°å¯æ”¹è®Šé‹å‹•çš„
é€Ÿåº¦ï¼› ix ç‚º X è»¸å‘½ä»¤è»Œè·¡ï¼› iy ç‚º Y è»¸å‘½ä»¤è»Œ
è·¡ï¼›ç¶“ç”±ä¸Šè¿°ä¹‹è»Œè·¡æ–¹ç¨‹å¼ï¼Œéš¨æ™‚é–“ç¶“éå³
å¯ç”¢ç”Ÿæ˜Ÿå½¢è»Œè·¡ã€‚
2.4 é›™è»¸ç·šå‹é¦¬é”é‹å‹•æ§åˆ¶æ™¶ç‰‡è¨­è¨ˆï¼š
ä»¥ FPGA å¯¦ç¾ä¹‹ç·šå‹ XY å¹³å°é‹å‹•æ§åˆ¶æ™¶ç‰‡
å…§éƒ¨çµ„æˆé›»è·¯å¦‚åœ– 3(a)æ‰€ç¤ºã€‚åœ– 3 ä¸­ï¼Œæœ‰ä¸€
é¡† Nios è™•ç†å™¨èˆ‡å…©çµ„ä½ç½®æ§åˆ¶ IP(åŒ…æ‹¬ X-
è»¸åŠ Y-è»¸)ï¼Œå…¶é–“ä»¥ä¸€èˆ¬ IO é€£çµä»¥é€²è¡Œè³‡æ–™
å‚³è¼¸ã€‚åœ– 3(a)ä¸­ Nios åµŒå…¥å¼è»Ÿæ ¸å¿ƒè™•ç†å™¨å…§
ä¸»è¦åŸ·è¡Œè»Œè·¡è¦åŠƒç¨‹å¼(ä»¥ C èªè¨€æ’°å¯«)ã€‚å„
çµ„ä½ç½®æ§åˆ¶ IP åŒ…æ‹¬ä½ç½®è¿´è·¯çš„é©æ‡‰æ€§æ¨¡ç³Š
æ§åˆ¶å™¨ã€é€Ÿåº¦è¿´è·¯æ¯”ä¾‹æ§åˆ¶å™¨åŠé›»æµè¿´è·¯çš„
å‘é‡æ§åˆ¶ã€‚ä½ç½®æ§åˆ¶å™¨ä¹‹å–æ¨£é »ç‡ç‚º 2KHz
è€Œé›»æµè¿´è·¯çš„å–æ¨£é »ç‡ç‚º 16KHzã€‚
æœ¬è¨ˆç•«ä½¿ç”¨æœ‰é™ç‹€æ…‹æ©Ÿæ³•ä¾†æ¨¡å¼åŒ–ä½ç½®
è¿´è·¯çš„é©æ‡‰æ€§æ¨¡ç³Šæ§åˆ¶å™¨åŠé€Ÿåº¦è¿´è·¯æ¯”ä¾‹
æ§åˆ¶å™¨ï¼Œè€Œå…¶è¡¨ç¤ºå¦‚åœ– 4 æ‰€ç¤ºã€‚æ­¤åœ–ä¸­ä½¿ç”¨
ä¸€å€‹åŠ æ³•å™¨ã€ä¸€å€‹ä¹˜æ³•å™¨ã€ä¸€å€‹æŸ¥è¡¨(LUT)ã€
ä¸€äº›æ¯”è¼ƒå™¨åŠæš«å­˜å™¨ç­‰å…ƒä»¶ï¼Œä¸¦ä»¥ 35 æ­¥é©Ÿ
ä¾†åŸ·è¡Œæ‰€æœ‰çš„è¨ˆç®—ã€‚é™¤äº†åƒè€ƒæ¨¡å¼æ˜¯ä½¿ç”¨ 24
ä½å…ƒï¼Œå…¶å®ƒä¹‹è³‡æ–™å‹æ…‹ä½¿ç”¨ 12 ä½å…ƒä¸¦é‹ç”¨ 2
çš„è£œæ•¸é‹ç®—åŠ Q11 æ ¼å¼ã€‚åœ–ä¸­ s0~s6 åŸ·è¡Œåƒ
è€ƒæ¨¡å¼è¼¸å‡ºå€¼ä¹‹è¨ˆç®—ï¼›s6~s9 åŸ·è¡Œç§»å‹•å­é€Ÿ
åº¦ã€ä½ç½®èª¤å·®ã€ä½ç½®èª¤å·®è®ŠåŒ–é‡ä¹‹è¨ˆç®—ï¼›
s9~s12 åŸ·è¡Œæ¨¡ç³ŠåŒ–åŠŸèƒ½ï¼›s13 ç‚ºæŸ¥æ¨¡ç³Šè¡¨åŠŸ
èƒ½ï¼› s14~s22 åŸ·è¡Œè§£æ¨¡ç³ŠåŒ–åŠŸèƒ½ï¼›s23~s34 åŸ·è¡Œ
é€Ÿåº¦åŠé›»æµå‘½ä»¤ä¹‹è¨ˆç®—ã€èˆ‡æ¨¡ç³Šè¦å‰‡è¡¨åƒæ•¸
ä¹‹èª¿æ•´ã€‚åœ– 4 ä¸­ï¼Œæ¯ä¸€æ­¥é©Ÿä¹‹æ“ä½œæ™‚é–“ç‚º
40ns (25 MHz)ï¼›å› æ­¤ 35 æ­¥é©Ÿåƒ…éœ€ 1.4ï­sã€‚æ­¤
æ™‚é–“å› ç‚ºæ¯” 500ï­s (2 kHz)å°ï¼Œæ‰€ä»¥ä¸æœƒå½±éŸ¿
ç³»çµ±æ§åˆ¶æ€§èƒ½ã€‚åœ– 3 ä¸­ï¼Œå…¶å®ƒé›»è·¯ä¹‹è¨­è¨ˆå·²
æ–¼ä¹‹å‰è¨ˆç•«æè¿°éï¼Œæ­¤è™•ä¸å†èªªæ˜ã€‚åœ– 3(a)
ä¸­ç·šå‹ XY å¹³å°é‹å‹•æ§åˆ¶æ™¶ç‰‡ä¹‹ FPGA è³‡æº
ä½¿ç”¨è¡¨å¦‚åœ– 3(b)æ‰€ç¤ºï¼Œç¸½å…±ä½¿ç”¨ 31,203
ALUTs åŠ 642,816 bits RAMï¼Œå…¶ä¸­ NiosII è™•
ç†å™¨ä½¿ç”¨8,275 ALUTsåŠ46,848 bits RAMè€Œ
é›™è»¸ä½ç½®æ§åˆ¶ IP ä½¿ç”¨ 22,928 ALUTs åŠ
595,968 bits RAMã€‚
6[2]P. K. Budig, â€œThe application of linear motors,â€ 
Proceedings, PIEMC 2000, Vol. 3, pp.1336-1340,
2000.
[3]F.J. Lin and C.H. Lin, â€œOn-line gain tuning using
RFNN for linear synchronous motor,â€ PESC, 2001 
IEEE 32nd Annual, vol. 2, pp. 766-771.
[4] T.H. Liu, Y.C. Lee and Y.H. Chang, â€œAdaptive 
controler design for a linear motor control system,â€ 
IEEE Trans. on Aerospace and Electronics System,
April 2004, vol. 40, no.2, pp. 601-613.
[5] C.M. Liaw, R.Y. Shue, H.C. Chen and S.C. Chen,
â€œDevelopment of a linear brushless dc motor drive
with robust position control,â€ IEE Proc. Electric 
Power Application, March 2001, vol. 148, no. 2, pp.
111-118.
[6]Y. Y. Tzou, T. S. Kuo, â€œDesign and Implementation
of all FPGA-based Motor Control IC for Permanent
Magnet AC Servo Motors,â€ in Conf. IEEE IECON 97,
pp. 943-947, 1997.
[7]M. F. Tsai, H. C. Chen, â€œDesign and Implementation
of a CPLD- based Svpwm ASIC for Variable-speed
Control of AC Motor Drives,â€ in Proc. 4th IEEE Int.
Conf. on Power Electr., pp. 22-25, 2001.
[8] M. Cirstea, A. Aounis, M. McCormick, P. Urwin,
â€œVector Control System Design and Analysis Using
VHDL,â€ in Conf. IEEE PESC 32nd Annual, pp. 81-84,
2001.
[9]F.J. Lin, D.H. Wang and P.K. Huang, â€œFPGA-based
fuzzy sliding mode control for a linear induction
motor drive,â€ IEE Proc.- Electr. Power Application,
vol. 152, no.5, Sep. 2005, pp. 1137-1148.
[10] CD-ROM, Digital Library, Altera Inc., Ver. 3, 2001
[11] FLEX 10K Embedded Programmable Logic
Family Data Sheet, Altera Inc., 1998.
[12] Nios Development Kits, Stratix edition, Altera Inc.,
2003.
[13] F. J. Lin, H. J. Shieh, P. H. Shieh, â€œAn Adaptive
Recurrent-Neural-Network Motion Controller for
Xâ€“Y Table in CNC Machine,â€IEEE Trans. System,
Man and Cyberneticsâ€”Part B: Cybernetics, Vol. 36,
No. 2, April 2006
[14] Y.S. Kung, R.F.Fung and T.Y. Tai, â€œRealization of
a Motion Control IC for X-Y Table Based on Novel
FPGA Technologyâ€, Accepted byIEEE Transactions
on Industrial Electronics. (SCI)
[15] Y.S. Kung and M.H. Tsai, â€œSoPC-based Position
Control IC for PMLSM Driveâ€, International Journal 
of Electrical Engineering (IJEE), Vol.15, No.5, Oct.
2008. (EI)
[16] Y.S. Kung, M.S. Wang, C.C. Chuang and C.C.
Huang, â€œFPGA Realization of Adaptive Speed
Control IC for PMSM Driveâ€, Journal of the Chinese
Institute of Engineers, Vol. 30, No.7, pp. 1237-1249,
Nov. 2007. (SCI)
[17] Y.S. Kung, â€œDesign and Implementation of a 
High-Performance PMLSM Drives Using DSP
Chip,â€ IEEE Transactions on Industrial Electronics,
Vol. 55, No. 3, March 2008, pp. 1341-1351. (SCI)
[18] Y.S. Kung and M.H. Tsai, â€œFPGA-based Speed
Control IC for PMSM Drive with Adaptive Fuzzy
Controlâ€, IEEE Transaction on Power Electronics,
Vol. 22, No. 6, Nov. 2007, pp. 2476-2486.(SCI)
[19] Y.S. Kung and G.S. Shu, â€œDevelopment of a Servo
Control IC for Drives of XYZ Table Based on SoPC
Technology,â€Journal of Southern Taiwan University
of Technology, December 2006, no.31, pp.85-98.
[20] J. L. Ha, Y.S. Kung, S. C. Hu and R.F. Fung,
â€œOptimal design of a micro-positioning Scott-Russell
mechanism by Taguchi method,â€ Sensors and 
Actuators A, January 2006, vol. 125, issue 2,
pp.565-572. (SCI)
[21] J.L. Ha, Y.S. Kung, R.F. Fung and S.C. Hsien, â€œA
Comparison of Fitness Functions for the
Identification of a Piezoelectric Hysteretic Actuator
Based on the Real-Coded Genetic Algorithm,â€ 
Sensors and Actuators A, Nov. 2006, vol. 132, issue 2,
pp.643-650. (SCI)
[22] é¾”æ‡‰æ™‚,è¨±å“²èªŒ,è”¡æ˜å®,é™³å»ºæ­¦,â€œæ©Ÿæ¢°æ‰‹è‡‚ä¼ºæœæ§
åˆ¶æ™¶ç‰‡èˆ‡ä¼ºæœç³»çµ±,â€ ä¸­è¯æ°‘åœ‹å°ˆåˆ©ï¼Œ ç™¼æ˜ç¬¬ I
257342 è™Ÿã€‚å°ˆåˆ©æ¬ŠæœŸé–“ï¼šè‡ª 2006 å¹´ 7 æœˆ 1 æ—¥è‡³ 2024
å¹´ 6 æœˆ 7 æ—¥æ­¢ã€‚
[23] é¾”æ‡‰æ™‚, é»ƒä¸­é›‹, è”¡å¹¸å²¸, â€œä»¥è»Ÿç¡¬é«”æ–¹å¼å¯¦ç¾
ç©ºé–“å‘é‡è„ˆæ³¢å¯¬åº¦èª¿è®Šæ³•,â€ é›»æ©ŸæœˆåˆŠ, ç¬¬åå…­
å·,ç¬¬å…«æœŸ, pp.136-153, 2006 å¹´ 8 æœˆ.
[24] é¾”æ‡‰æ™‚, â€œæ¬¡ä¸–ä»£ DSP æ•¸ä½é¦¬é”èˆ‡é‹å‹•æ§åˆ¶å¹³
å°ä¹‹ç™¼å±•(III),â€ å·¥ç¨‹ç§‘æŠ€é€šè¨ŠæœŸåˆŠ, 90 æœŸ, pp.
51-56 ,2007 å¹´ 2 æœˆ.
[25] é¾”æ‡‰æ™‚ã€é»ƒä¸­é›‹ã€ç›§ä¿Šè±ªã€å‘‚æ˜å…¸, â€œä»¥
TMS320F2812 DSP ç‚ºåŸºç¤é›»å‹•è·‘æ­¥æ©Ÿé€Ÿåº¦æ§åˆ¶
ç³»çµ±ä¹‹ç ”è£½,â€ æ©Ÿæ¢°æœˆåˆŠ, ç¬¬ä¸‰åä¸‰å·,ç¬¬å››æœŸ,
pp.æ–‡ 84-æ–‡ 99, 2007 å¹´ 4 æœˆ.
[26] é¾”æ‡‰æ™‚ã€è”¡æ˜å®,â€œæ°¸ç£åŒæ­¥é¦¬é”é›»æµæ§åˆ¶æ™¶ç‰‡
ä¹‹ç ”è£½,â€é¦¬é”é›»å­å ±, ç¬¬ 241 æœŸ, 2007 å¹´ 8 æœˆ.
[27] Y.S. Kung, K.H. Tseng and F.Y. Tai,
â€œFPGA-based Servo Control IC for X-Y Table,â€ 
IEEE ICITâ€™06, Proceedings of the IEEE 
International Conference on Industrial Technology,
pp. 2913-2918, December 15-17, 2006. (Mumbai,
India)
[28] M.H. Tsai, Y.S. Kung and K.H. Tseng,
â€œDevelopment of a Servo System for Linear X-Y
Table Based on DSP controller,â€ IEEE ICITâ€™06, 
Proceedings of the IEEE International Conference
on Industrial Technology, pp.2907-2912, December
15-17, 2006. (Mumbai, India)
[29] Y.S. Kung, M.H. Tsai and C.S. Chen,
â€œFPGA-based Servo Control IC for PMLSM Drives
with Adaptive Fuzzy Control,â€ IEEE ICIEAâ€™06, 
Proceedings of the IEEE International Conference
on Industrial Electronics and Applications, pp.
731~736, May 24-26, 2006. (Singapore) (EI)
[30] Y.S. Kung, K.H. Tseng, C.S. Chen, H.Z. Sze and
A.P. Wang, â€œFPGA-Implementation of Inverse
Kinematics and Servo Controller for Robot
Manipulator,â€ IEEE ROBIO 2006, Proceedings of
the IEEE International Conference on Robotics and
Biomimetics, pp. 1163~1168, December 17-20,
2006. (EI) (Kumni, China)
[31] Y.S. Kung, Ming-Shyan Wang and Chung-Chun
Huang, â€œDigital Hardware Implementation of
Adaptive Fuzzy Controller for AC Motor Drive,â€ 
2Clk
Clk-cur
[11..0]
[11..0]
Y_A-pulse
SVPWM
generation
ADC read in
and
transformation
Frequency
divider
QEP detection
and
transformation
[11..0]
[11..0]
[11..0]
CK
Y_B-pulse
Y_Z-pulse
Clk-sp
clk
CPU
On-chip
ROM
On-chip
RAM
UART
PIO
Timer
SPI
A
va
lo
n
B
u
s
A
va
lo
n
B
u
s
Nios II Embedded Processor IP
Position control IP
for Y-Axis
sram_cs
sram_we
sram_oe
sram_be[3]
sram_be[2]
sram_be[1]
sram_be[0]
D[31]
D[0]
A[22]
A[0]
Current controllers
and coordinate
transformation
addre _ï±
[11..0]
*
qi
[11..0] rx
v
ryv
rzv
ai
bi
[11..0]ci
Clk
Clk
Clk
Clk-cur
Adaptive fuzzy
controller
Clk
Clk-sp
Clk-cur
X_STSB
X_RCB
X_RCA
X_STSA
X_CHB
X_CHA
X_PWM 1
X_PWM 2
X_PWM 3
X_PWM 4
X_PWM 5
X_PWM 6
X_ADIN[11]
X_ADIN[0]
X_BDIN[11]
X_BDIN[0]
CK
Position control IP
for X-Axis
Y_STSB
Y_RCB
Y_RCA
Y_STSA
Y_CHB
Y_CHA
Y_PWM 1
Y_PWM 2
Y_PWM 3
Y_PWM 4
Y_PWM 5
Y_PWM 6
Y_ADIN[11]
Y_ADIN[0]
Y_BDIN[11]
Y_BDIN[0]
[15..0]px
[15..0]px
*
mx [15..0]
*_ qy i
_ py x
*_ my x
[15..0]
[15..0]
[11..0]
*_ qx i
_ px x
*_ mx x
[15..0]
[15..0]
[11..0]
X_A-pulse
X_B-pulse
X_Z-pulse
Adaptive position Control IC based on Altera FPGA
0318ADC read in and transformation
Position control IP
( for x-axis and y-axis )
0210QEP detection andtransformation
202,7521610others
642,81631,203
02,678SVPWM generation
393,2162,002Current vector control
016,110Adaptive fuzzy controller (AFC)
Total
46,8488,275Nios II Embedded Processor IP
Memory
(bits)
ALUTsModule circuitIP
(a) (b)
åœ– 3. (a)ç·šå‹ XY å¹³å°é‹å‹•æ§åˆ¶æ™¶ç‰‡ (b)FPGA è³‡æºä½¿ç”¨è¡¨
+
-
x
x
+
x
+
x
s0 s1 s2 s3 s4 s5
x
+-
+
-
s6
+
-
+
-
s7 s8
)(* kx p
)( 1kx p ï€­
)( 1kx p ï€­
)( 1kxm ï€­
)( 1kxm ï€­
)(kv
)(ke
)1( ï€­ke
)1( ï€­ke
0a
1a
2a
1b 2b
s9
Computation of reference model output Computation of mover velocity,
position error and error change
s14
x
+
1
-
)(e
iAï­
)(de
jBï­
jid ,
+
-
x
x
x
s15 s16 s17
)(de
jB
ï­
)e(
iA 1ï€«ï­
1
)de(
jB 1ï€«ï­
j,id 1ï€«
1ï€«j,id
11 ï€«ï€« j,id
)(de
jBï­
)(e
iAï­
s18
x
x
+
x
x
+ + x +
ui
x +
s20 s21 s23 s24 s28s19 s22 s25
ijc ,
i,jc 1ï€«
1ï€«i,jc
11 ï€«ï€« i,jc
jid ,
jid ,1ï€«
1,1 ï€«ï€« jid
1, ï€«jid
iK
pK
fu
)(* kiq
x +
ijc ,
i,jc 1ï€«
1ï€«i,jc
11 ï€«ï€« i,jc
i,jc 1ï€«
1ï€«i,jc
jid ,
j,id 1ï€«
11 ï€«ï€« j,id
+ x x
Î±
iK
pK )(ke
ijc ,
x +
1, ï€«jid
x +
x +
s29 s30 s31 s32 s33 s34
rï„
rï„
rï„
rï„
rï„
ui
11 ï€«ï€« i,jc
Defuzzification Computation of velocity and current command, and tuning of fuzzy rule parameters
+
-
+
-
&
i
j
j&i
s10 s11 s12 s13
)(kde
)(e
iAï­
)(de
jB
ï­
ijc ,
1ï€«i,jc
i,jc 1ï€«
11 ï€«ï€« i,jc
1ï€«ie
1ï€«jde
Look-up
Fuzzy rule
table
RS,1
RS,1
Fuzzification
SD
ke
SD
kde
)(ke
)(* 1kx p ï€­
)(* 2kx p ï€­
)( 2kxm ï€­
)(kxm
)( 1kxm ï€­ )( 2kxm ï€­
)(* kx p )(
* 1kx p ï€­
)(* 1kx p ï€­ )(* 2kx p ï€­
)(kxm
)(kx p
)(kx p
+
x
vK
)(kv
x
vK
-
s26 s27
)(ku
Look-up fuzzy table
åœ– 4 ä»¥ FSM æ–¹å¼å¯¦ç¾ä¹‹ä½ç½®é©æ‡‰æ€§æ¨¡ç³Šæ§åˆ¶å™¨åŠé€Ÿåº¦æ¯”ä¾‹æ§åˆ¶å™¨ä¹‹ IP
450 100 150 200 250
100
150
200
250
300
X-axis Position (mm)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
0 2 4 6 8 10 12
0
100
200
300
Time (s)
X
-a
xi
s
P
os
iti
on
(m
m
)
0 2 4 6 8 10 12
100
200
300
Time (s)
Y
-a
xi
s
Po
si
tio
n
(m
m
)
0 2 4 6 8 10 12
-5
0
5
Time (s)
X
-a
xi
s
Iq
(A
)
0 2 4 6 8 10 12
-4
-2
0
2
4
Time (s)
Y
-a
xi
s
Iq
(A
)
0 2 4 6 8 10 12
-10
0
10
Time (s)
X
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
0 2 4 6 8 10 12
-10
0
10
Time (s)
Y
-a
xi
s
P
os
iti
on
er
ro
r
(m
m
)
(a)
(d)
(b)
(c)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
X
-a
xi
s
P
os
iti
on
(m
m
)
Y
-a
xi
s
Po
si
tio
n
(m
m
)
X
-a
xi
s
Iq
(A
)
Y
-a
xi
s
Iq
(A
)
X
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
Y
-a
xi
s
P
os
iti
on
er
ro
r
(m
m
)
50 100 150 200 250
100
150
200
250
300
X-axis Position (mm)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
0 2 4 6 8 10 12
0
100
200
300
Time (s)
X
-a
xi
s
P
os
it
io
n
(m
m
)
0 2 4 6 8 10 12
100
200
300
Time (s)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
0 2 4 6 8 10 12
-5
0
5
Time (s)
X
-a
xi
s
Iq
(A
)
0 2 4 6 8 10 12
-5
0
5
Time (s)
Y
-a
xi
s
Iq
(A
)
0 2 4 6 8 10 12
-10
0
10
Time (s)
X
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
0 2 4 6 8 10 12
-10
0
10
Time (s)
Y
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
(a)
(d)
(b)
(c)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
X
-a
xi
s
P
os
it
io
n
(m
m
)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
X
-a
xi
s
Iq
(A
)
Y
-a
xi
s
Iq
(A
)
X
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
Y
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
åœ– 9 æ‡‰ç”¨æ¨¡ç³Šæ§åˆ¶å™¨ä¹‹çª—å½¢è»Œè·¡å¯¦é©— åœ– 10. æ‡‰ç”¨é©æ‡‰æ€§æ¨¡ç³Šæ§åˆ¶å™¨ä¹‹çª—å½¢è»Œè·¡å¯¦é©—
100 150 200 250 300
0
20
40
60
80
100
120
140
160
180
200
220
X-axis Position (mm)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
0 5 10 15
100
200
300
400
Time (s)
X
-a
xi
s
P
os
it
io
n
(m
m
)
0 5 10 15
0
50
100
150
200
250
Time (s)
Y
-a
xi
s
P
os
iti
on
(m
m
)
0 5 10 15
-5
0
5
Time (s)
X
-a
xi
s
Iq
(A
)
0 5 10 15
-5
0
5
Time (s)
Y
-a
xi
s
Iq
(A
)
0 5 10 15
-10
0
10
Time (s)
X
-a
xi
s
P
os
iti
on
er
ro
r
(m
m
)
0 5 10 15
-10
0
10
Time (s)
Y
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
(a)
(d)
(b)
(c)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
X
-a
xi
s
P
os
it
io
n
(m
m
)
Y
-a
xi
s
P
os
iti
on
(m
m
)
X
-a
xi
s
Iq
(A
)
Y
-a
xi
s
Iq
(A
)
X
-a
xi
s
P
os
iti
on
er
ro
r
(m
m
)
Y
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
X
-a
xi
s
P
os
it
io
n
(m
m
)
Y
-a
xi
s
P
os
iti
on
(m
m
)
X
-a
xi
s
Iq
(A
)
Y
-a
xi
s
Iq
(A
)
X
-a
xi
s
P
os
iti
on
er
ro
r
(m
m
)
Y
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
100 150 200 250 300
0
20
40
60
80
100
120
140
160
180
200
220
X-axis Position (mm)
Y
-a
xi
s
Po
si
ti
on
(m
m
)
0 5 10 15
100
200
300
400
Time (s)
X
-a
xi
s
P
os
it
io
n
(m
m
)
0 5 10 15
0
50
100
150
200
250
Time (s)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
0 5 10 15
-5
0
5
Time (s)
X
-a
xi
s
Iq
(A
)
0 5 10 15
-5
0
5
Time (s)
Y
-a
xi
s
Iq
(A
)
0 5 10 15
-10
0
10
Time (s)
X
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
0 5 10 15
-10
0
10
Time (s)
Y
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
(a)
(d)
(b)
(c)
Y
-a
xi
s
Po
si
ti
on
(m
m
)
X
-a
xi
s
P
os
it
io
n
(m
m
)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
X
-a
xi
s
Iq
(A
)
Y
-a
xi
s
Iq
(A
)
X
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
Y
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
Y
-a
xi
s
Po
si
ti
on
(m
m
)
X
-a
xi
s
P
os
it
io
n
(m
m
)
Y
-a
xi
s
P
os
it
io
n
(m
m
)
X
-a
xi
s
Iq
(A
)
Y
-a
xi
s
Iq
(A
)
X
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
Y
-a
xi
s
P
os
it
io
n
er
ro
r
(m
m
)
åœ– 11 æ‡‰ç”¨æ¨¡ç³Šæ§åˆ¶å™¨ä¹‹æ˜Ÿå½¢è»Œè·¡å¯¦é©— åœ– 12. æ‡‰ç”¨é©æ‡‰æ€§æ¨¡ç³Šæ§åˆ¶å™¨ä¹‹æ˜Ÿå½¢è»Œè·¡å¯¦é©—
å‡ºå¸­åœ‹éš›å­¸è¡“æœƒè­°å¿ƒå¾—å ±å‘Š 
                                                             
è¨ˆç•«ç·¨è™Ÿ NSC 96-2221-E-218-061 
è¨ˆç•«åç¨± æ‡‰ç”¨ SOPC æŠ€è¡“ç ”è£½é›™è»¸ç·šå‹é¦¬é”ä¼ºæœé©…å‹•æ§åˆ¶å™¨ 
å‡ºåœ‹äººå“¡å§“å 
æœå‹™æ©Ÿé—œåŠè·ç¨± 
é¾” æ‡‰ æ™‚ 
å—å°ç§‘æŠ€å¤§å­¸é›»æ©Ÿå·¥ç¨‹ç³»æ•™æˆ 
æœƒè­°æ™‚é–“åœ°é» 97/4/21 ~ 97/4/24 
 Sichuan, Chengdu, China (ä¸­åœ‹å››å·æˆï¨¦) 
æœƒè­°åç¨± 
(ä¸­æ–‡) IEEE å·¥æ¥­æŠ€è¡“åœ‹éš›ç ”è¨æœƒ 
(è‹±æ–‡) IEEE International Conference on Industrial Technology  
(ICIT 2008)    
ç™¼è¡¨ï¥æ–‡é¡Œç›® 
 (ä¸­æ–‡)  ä»¥ FPGA å¯¦ç¾ç·šå½¢æ°¸ç£åŒæ­¥é¦¬é”é«˜æ€§èƒ½æ§åˆ¶å™¨ 
 (è‹±æ–‡ ) FPGA-Realization of a High-Performance Controller for 
PMLSM Drive 
 
ä¸€ã€ ï¥«åŠ æœƒè­°ç¶“é 
 
æœ¬äººæ­¤æ¬¡ï¥«åŠ çš„åœ‹éš›æœƒè­°ç‚ºåœ‹éš›é›»æ©Ÿé›»å­å·¥ç¨‹ (IEEE) å·¥æ¥­é›»å­å­¸æœƒ
(Industrial Electronics Society, IES)æ‰€ä¸»è¾¦çš„ã€IEEEå·¥æ¥­æŠ€è¡“åœ‹éš›ç ”è¨æœƒï¼ŒICIT 
2008ã€ã€‚æœƒè­°æ™‚é–“ç‚º2008ï¦4æœˆ21è‡³24æ—¥ï¼Œæœƒè­°åœ°é»åœ¨ä¸­åœ‹å››å·æˆï¨¦(Sichuan, 
Chengdu, China)çš„SHERATON CHENGDU LIDOï¨ªåº—ã€‚æ­¤æœƒè­°ä¹‹ï¥æ–‡åˆ†ç‚ºä¸‹ï¦œ
ï§åˆ¥ï¼š  
1. Industrial Informatics (å·¥æ¥­è³‡è¨Š) 
Robotics, industrial vision, motion control, autonomous mobile robots, 
electrical vehicles, intelligent transportation, factory communications, flexible 
manufacturing system, industrial automation, process automation, 
CAD/CAM/CAT/CIM and LANs, industrial application of internet technologies, 
multimedia, wireless communications, data privacy and security, 
authentication, authorization and federation. 
2. Computer and Control Systems (é›»è…¦èˆ‡æ§åˆ¶ç³»çµ±) 
Advanced control and measurement, computer and microprocessor-
based control, signal processing, estimation and identification techniques, 
Keynote Speech 3: Evolutionary Computation and Its Applications, by Professor 
Xin Yao, Computer Science at Birmingham, UK. 
Tutorial 1: Multilevel Converters: Current Developments and Future Trends, by  
Professor Leopoldo Garcia Franquelo, University of Seville, 
Spain. 
Tutorial 2: Time Sensitive Network-Based Control Systems over IP network and 
Applications, by Professor Mo-yuen Chow, North Carolina 
State University, USA. 
åœ‹å…§æ­¤æ¬¡ç´„æœ‰35ç¯‡ï¥æ–‡åœ¨æ­¤æœƒè­°ä¸­ç™¼è¡¨ï¼Œçš†ç‚ºåœ‹å…§å¤§å­¸ç³»æ‰€ç ”ç©¶çš„æˆæœã€‚
èˆ‡ä¸Šä¸€å±†ICITåœ¨å°ï¨èˆ‰ï¨ˆï¼Œåœ‹å…§åƒ…æœ‰10ç¯‡ï¥æ–‡ç™¼è¡¨ç›¸æ¯”ï¼Œæˆé•·è¨±å¤šã€‚èˆ‡æœƒè€…é™¤
ï¦ºä¸»è¾¦åœ‹ä¸­åœ‹(å«é¦™æ¸¯)æœ¬èº«çš„å°ˆå®¶å­¸è€…å¤–ï¼Œå°šåŒ…æ‹¬ï¤­è‡ªæ—¥æœ¬ã€éŸ“åœ‹ã€æ³•åœ‹ã€å°
ç£ã€ç¾åœ‹ã€å·´è¥¿ã€ä¼Šï¤©ã€æ³°åœ‹ã€æ³¢ï¤Ÿç­‰åœ‹å®¶ã€‚æœ¬äººçš„ï¥æ–‡ç™¼è¡¨ç‚ºå£é ­ç°¡å ±ï¼Œè¢«
å¤§æœƒå®‰æ’åœ¨ç¬¬äºŒå¤©(April 22th)ä¸‹åˆä¹‹ã€Motor Drives and Electrical Machinesã€å ´
æ¬¡å ±å‘Šã€‚ç”±æ–¼æœ¬å ´æ¬¡ç°¡å ±çš„ï¥æ–‡æœ‰5ç¯‡ï¼Œå› æ­¤æ¯ç¯‡ï¥æ–‡æ™‚é–“ç‚º20åˆ†é˜ï¼Œå…¶ä¸­å ±
å‘Šæ™‚é–“ç‚º15åˆ†é˜ï¼Œå¦æœ‰5åˆ†é˜çš„ç™¼å•èˆ‡å›ç­”ã€‚æœ¬äººæ‰€ç™¼è¡¨çš„ï¥æ–‡é¡Œç›®ç‚º 
ã€FPGA-Realization of a High-Performance Controller for PMLSM Driveã€ï¼Œå¦‚é™„
ä»¶ã€‚æ­¤ï¥æ–‡ä¸»è¦ä»¥FPGAæ™¶ç‰‡ï¤­å¯¦ç¾ç·šå‹æ°¸ç£åŒæ­¥é¦¬é”çš„é©æ‡‰æ€§ä¼ºæœæ§åˆ¶å™¨ã€‚
ç”±æ–¼æœ¬ï¥æ–‡ï§¤ï¥èˆ‡å¯¦å‹™ä¸¦é‡ï¼Œä¸¦å¯æ‡‰ç”¨åœ¨CNCæ©Ÿå™¨åŠåŠå°é«”è£½ç¨‹ä¹‹æ§åˆ¶å™¨ç³»çµ±
ä¸Šã€‚å› æ­¤ç¾å ´ï¥«åŠ è€…å°æœ¬ç¯‡ï¥æ–‡çš†ç›¸ç•¶æœ‰èˆˆè¶£ï¼Œæœ‰å¤šä½æå‡ºå•é¡Œè¨ï¥ï¼Œè€Œæœ¬äºº
ä¹Ÿèƒ½æ­£ç¢ºå›ç­”ï¼Œè¨ï¥çš„éå¸¸æ¿€ï¦Ÿã€‚åŸºæ–¼æ™‚é–“é—œä¿‚ï¼Œç™¼å•ï¥§å†ç¹¼çºŒï¼Œä½†å…¶å®ƒå•é¡Œ
åœ¨æœƒè­°å¾Œä»æœ‰è¨ï¥ã€‚é™¤ï¦ºæœ¬èº«ï¥æ–‡å ±å‘Šå¤–ï¼Œæœ¬äººä¹Ÿï¥«èˆ‡å…¶å®ƒå£é ­ï¥æ–‡æˆ–å£å ±ï¥
æ–‡ç°¡å‘Šï¼Œä¸¦é‡å°ï¥æ–‡ä¹‹åŸå‰µæ€§åŠæ–°æŠ€è¡“èˆ‡ä½œè€…äº’ç›¸è¨ï¥ï¼Œäº’æ›å¿ƒå¾—ä»¥å¸å–å…¶ï¨
è¯ã€‚æœ¬äººï¥«åŠ ICIT 2008æœƒè­°ç¾å ´ï§ºæ³å¦‚åœ–1~åœ–4æ‰€ç¤ºã€‚æ™šå®´æ™‚ï¼Œæœ¬äººç™¼è¡¨çš„æ–‡
ç« ç²å¾—æœ¬å±†ICIT2008ç ”è¨æœƒâ€œBest Paper Awardï¼‚çš„çé …ï¼Œå¾—çï§ºä¸€åª(å¦‚åœ–5)åŠ
300ç¾å…ƒçš„çï¤Šã€‚æ­¤çé …åƒ…æœ‰3ç¯‡æ–‡ç« ç²å¾—ã€‚ 
ï¥«åŠ  ICIT 2008 æœƒè­°ç¾å ´ï§ºæ³ 
      
                    åœ– 1 : ICIT 2008 æœƒè­°è¨»å†Šè™•                 åœ– 2 :æœ¬äººèˆ‡ Session Chairåœ¨æœƒè­°ç¾å ´åˆç…§ 
     
åœ– 3 : æœ¬äººï¥«è§€ Poster presentationç¾å ´                     åœ– 4 : æœ¬äººç²å¾—æœ€ä½³ï¥æ–‡çæ–¼æ™šå®´æ™‚ä¹‹é ’çæƒ…å½¢ 
 
åœ– 5 :æœ€ä½³ï¥æ–‡çï§º 
qfdqde iiLLF ))((2
3 O
W
S   (3) 
The current control of a PMLSM drive is based on a vector 
control approach. That is, if we control id to 0 in Fig.1, the 
PMLSM will be decoupled, so that control a PMLSM will 
become easy as to control a DC linear motor. After 
simplification and considering the mechanical load, the model 
of a PMLSM can be written as the following equations, 
qtqfe iKi2
3F 'O
W
S  (4) 
with  
ftK OW
S
2
3  (5) 
and the mechanical dynamic equation of PMLSM is 
dt
dx
B
dt
xd
MFF pm
p
mLe   2
2
 (6) 
where
eF is the motor thrust force, tK  is force constant, mM  is 
the total mass of the moving element, 
mB  is viscous friction 
coefficient and LF is the external force. 
B. Adaptive fuzzy controller (AFC) in position control loop 
The dash-dot rectangular area in Fig. 1 presents the 
architecture of an AFC for PMLSM drive. It consists of a fuzzy 
controller, a reference model and a parameter adjusting 
mechanism. Detailed description of these is as follows. 
(1) Fuzzy controller (FC): 
In Fig.1, the tracking error and the change of the 
error, e , e'  are defined as 
)()()( kxkxke pm   (7) 
)1()()(  ' kekeke  (8) 
and e, 'e and uf are input and output variables of FC, 
respectively.  
The design procedure of the FC is as follows:   
(a) Take e, de as the input variables of FC, and define their 
linguist variables as E and dE. The linguist value of E and 
dE are {A0, A1, A2, A3, A4, A5, A6} and {B0, B1, B2, B3, B4,
B5, B6}, respectively. Each linguist value of E and dE is 
based on the symmetrical triangular membership function 
which is shown in Fig.2. The symmetrical triangular 
membership function are determined uniquely by three 
real numbers 321 [[[ dd , if one fixes 0ff 31   )()( [[
and 1f 2  )([ . With respect to the universe of discourse of 
[-6.6], the numbers for these linguistic values are selected 
as follows: 
A0=B0 : {-6,-6,-4},  A1=B1 : {-6,-4,-2}, A2=B2 : {-4,-2,0}, 
A3=B3: {-2,0,2},A4=B4 : {0,2,4}, A5=B5 : {2,4,6}, A6=B6:
{4,6,6} (9) 
(b) Compute the membership degree of e and de. Figure 2(a) 
shows that the only two linguistic values are excited 
(resulting in a non-zero membership) in any input value, 
and the membership degree )(eAiP  can be derived from Fig. 
2(b), in which the error e is located between ei and ei+1, two 
linguist values of Ai and Ai+1 are excited, and the 
membership degree is obtained by 
    
2
eee 1iAi

 )(P   and   )()( e1e i1i AA PP    (10) 
where )(* 1i26e 1i  ' . Similar results can be obtained 
in computing the membership degree )(deB jP .
(c) Select the initial fuzzy control rules by referring to the 
dynamic response characteristics [17], such as, 
ij,fji cisuTHENBiseandAiseIF '  (11) 
where i and j = 0~6, Ai and Bj are fuzzy number, and cj,i is 
real number. The graph of fuzzification and fuzzy rule 
table is shown in Fig. 3.  
SVPWM
PI
PI
rfxv
rfyv
rfzv
ai
wici
*
qi
*
di



dv
qv
Z
3-Phase
inverter
PWM1
PWM2
PWM3
PWM4
PWM5
PWM6
Current
detector
ui
U
V
W
qi
di

Encoder
detector & 
Transform.
Differ-
ential
Circuit
Rectifier
 
AC110V
A/D
bi
A
B


ZZB
BAA
,,
,,
Sin&Cos
= 0
LPF
A/D LPF
Current control loopPosition and speed control loop
FPGA-based position control IC
W
S pxeT
PMLSM
+
-
1-z-1
u
Inference 
Mechanism
11  Z
e
e' 11  Z
KIFI DFI
Knowledge 
Base
+
_
Adjust 
Mechanism
fu
px
vK
mx
PK
+
*
px
Reference 
Model
v
Coordinate
transformation
of  Park, 
Clarke, Park-1
and Clark-1
Fig.1 The architecture of the FPGA-based position control IC for PMLSM drive system
Therefore, (21) is substituted into (17), and then the 
parameters nmc , of fuzzy controller described by (12) can be 
adjusted using the following expression.  
m,nvip
m,nvipn,m
d)k(eK)(Sign)KK(
d)k(eK)KK()k(c
<D
<D'
|
   (24) 
with m = j, j+1 and n = i,i+1. Because the motor parameter <
is not easily to determined, so the sign(< ) is used in (24). It 
is unity because <  is positive. The sign (.) represents the sign 
operator. 
III. POSITION CONTROL IC DESIGN FOR PMLSM DRIVE
Figure 4 illustrates the internal architecture of the 
proposed FPGA implementation of the AFC and the current 
vector controller for PMLSM drive system. The FPGA chip 
adopted herein is Altera Stratix II EP2S60F672C5 with 48,352 
ALUTs, maximum 492 user I/O pins, 36 DSP blocks, 
2,544,192 bits of RAM. The Nios II embedded processor has a 
32-bit configurable CPU core. The internal circuit in Fig.4 
comprises a Nios II embedded processor IP (Intelligent 
Properties) and a position control IP. The Nios II processor is 
depicted to generate the position command, collect the 
response data and the communication with external device. 
The position control IP includes mainly a position AFC circuit 
and a circuit for current vector controller. The sampling 
frequency of posituin control loop is designed with 2kHz. The 
frequency divider generates 50 Mhz (Clk), 25 Mhz (Clk-step) 
and 2 kHz (Clk-cs) clock to supply all circuits in Fig. 4.  
In Fig.4, the FSM is employed to model the AFC in position 
loop and P controller in speed loop of PMLSM and shown in 
Fig. 5, which uses one adder, one multiplier, a look-up table, 
comparators, registers, etc. and manipulates 35 steps machine 
to carry out the overall computation of AFC in Fig. 4. With 
exception of the data type in reference model are 24-bits, 
others data type in Fig. 5 are designed with 12-bits length, 2â€™s 
complement and Q11 format. Although the algorithm of AFC 
is highly complexity, the FSM can give a very adequate 
modeling and easily be described by VHDL. In Fig. 5, steps 
s0~s6 execute the computation of reference model output; steps 
s6~s9 are for the computation of mover velocity, position error 
and error change; steps s9~s12 execute the function of the 
fuzzification; s13 describe the look-up table and s14~s22
defuzzification; and steps s23~s34 execute the computation of 
velocity and current command output, and the tuning of fuzzy 
rule parameters. The SD in Fig. 5 is section determination for 
the membership function of e and de. The operation of each step 
in Fig.5 can be completed within 40ns (25 MHz clock) by 
FPGA implementation; therefore total 35 steps need 1.4 Ps
operation times. It doesnâ€™t loss any control performance for 
overall system because the 1.4 Ps operation times are much 
less than the sampling interval, 500 Ps (2 kHz) of the position 
control loop in Fig.1. Detailed circuits, such as current vector 
controller, refer to [18]. The overall resource usage of the 
AFC circuit needs 8,055 ALUTs, the Nios II embedded 
processor IP needs 8,275 ALUTs and 46,848 RAM bits and 
the position control IP needs 12,269 ALUTs and 297,984 
RAM bits in FPGA.
IV. EXPERIMENTAL SYSTEM AND RESULTS
The overall experimental system depicted in Fig.1 includes 
an FPGA (Stratix II EP2S60F672C5), a voltage source IGBT 
inverter and a PMLSM. The PMLSM was manufactured by 
the BALDOR electric company; and it is a single-axis stage 
with a cog-free linear motor and a stroke length with 600mm. 
The parameters of the motor are: Rs = 27: , Ld = Lq = 23.3 
mH, Kt = 79.9N/A. The input voltage, continuous current, 
peak current (10% duty) and continuous power of the PMLSM 
are 220V, 1.6A, 4.8A and 54W, respectively. The maximum 
speed and acceleration are 4m/s and 4 g but depend on 
external load. The moving mass is 2.5Kg, the maximum 
payload is 22.5Kg and the maximum thrust force is 73N under 
continuous operating conditions. A linear encoder with a 
resolution of 5Pm is mounted on the PMLSM as the position 
sensor, and the pole pitch is 30.5mm (about 6100 pulses). The 
inverter has three sets of IGBT power transistors. The 
collector-emitter voltage of the IGBT is rated 600V; the gate-
emitter voltage is rated r20V, and the DC collector current is 
rated 25A and in short time (1ms) is 50A. The photo-IC, 
Toshiba TLP250, is used in the gate driving circuit of IGBT.  
Input signals of the inverter are PWM signals from the FPGA 
device.
For implementation, the control sampling frequency of the 
current and position loops are designed as 16kHz and 2kHz, 
respectively. In the proposed adaptive position control IC, the 
current controller, speed controller and the adaptive fuzzy 
position controller are all realized by hardware in an FPGA. 
The fuzzy controller is first used in position loop, and the 
parameter adjustment of the fuzzy controller is based on the 
gradient descent method. The transfer function of the 
reference model in Fig. 1 is chosen by a second order system 
with the natural frequency of 40 rad/s and damping ratio of 1; 
therefore, the output response of the reference model will have 
the characteristics of no overshoot, 0.2sec rising time and zero 
steady-state. After applying the bilinear transformation with 
sampling frequency of 2 kHz, the parameters of the difference 
equation in (15) are obtained by a0=0.000098, a1=0.000196, 
a2=0.000098, b1=-1.960396, b2=0.960788.
Clk
Clk-cur
A-pulse
STSB
RCB
RCA
STSA
CHB
CHA
Frequency 
divider CK
B-pulse
Z-pulse
PWM 1
PWM 2
PWM 3
PWM 4
PWM 5
PWM 6
ADIN[11]
ADIN[0]
BDIN[11]
BDIN[0]
Clk-sp
CPU
On-chip
ROM
On-chip
RAM
UART
PIO
Timer
SPI
Av
al
on
 B
us
Av
al
on
 B
us
Nios II Embedded Processor IP
Circuit of 
current vector 
controller 
[11..0]*qi
Clk
Clk-step
Clk-cur
Clk-step
Circuit of position 
adaptive fuzzy 
controller (AFC)
and speed P 
controller [15..0]px
Clk
Clk-sp
*
px [11..0]
Clk-step
[15..0]px
Position control IC based on Altera FPGA (Stratix II EP2S60F672C5)
Position control IP
[11..0]
*
px
Fig. 4 FPGA implementation of the position control IC for PMLSM 
