Label 
Distribution 
Protocol
Routing 
Protocol
ARP
IP address
(route entry)
MAC address
(next hop) label
packet queue
packet label MAC
packet
buffer
MAC
processing
NAV
INPUT
label      MAC
OUTPUT
label      MACData Packet 
Transfer
Label switching table
radio
Network Interface
Host
ARP: Address Resolution Protocol
NAV: Network Allocation Vector
Fig. 2. Host and NIC components for packet forwarding using labels.
ACK for the upstream node and the RTS for the downstream
node as a single frame. This method provides a possible relay
methodology on MAC layer. However, it does not explicitly
consider the problem of sending multiple back-to-back frames
in a transmission burst with a multi-rate IEEE 802.11 PHY.
Moreover, it still requires a corresponding label-switching dis-
tribution algorithm to work on such networks, which couldnâ€™t
be an easy task. On the other hand, we can solve the following
problems to realize ECTP in the MMI-WLAN.
1) MPLS labels in Infrastructure-based WLAN: The host
and NIC components for packet forwarding using labels given
in [6] are reproduced in Fig. 2 for reference. Obviously, it
reveals a general label-switching architecture. However, when
considering the upstream traffic with at most two hops in the
MMI-WLAN, the label filed for input and that for output in this
table are redundant because the destination is fixed (i.e., AP),
and a relay node always forwards data to AP. Thus, in ECTP
the two fields can be filled with a default value. In addition,
to obtain the maximum data rate achievable, two fields are
added, and filled with the highest modulation scheme that can
be obtained from the upstream node to the node itself and that
from itself to AP. In the second field added, the modulation
scheme from the relay node to AP is also recorded for a source
node to correctly estimate the NAV for transmission. The label-
switching table modified for our ECTP is given in Fig. 3. To
illustrate its functionality, let 

be the source node with
backlogged data to AP in our example, as shown in Fig. 4. At
first, 

should obtain the access right to the wireless medi-
um by using the RTS/CTS exchange between 

and 
with the lowest modulation scheme to reach the outmost region
in the MMI-WLAN. 

then checks its label-switching table
to find the source default entry for relaying this frame, 


	

	

	
	 

	

	 


	

	
  (as shown
in Fig. 3), where 

denotes the default label for the
destination of AP, and 

	
, 


and 

	
denote the
modulation schemes from the sender to AP, from the sender to
its relay node, and from the relay node to AP, respectively. If
found, 

will transmit this frame to the relay node, 

,
with the highest data rate supported by the modulation scheme



given in the entry. Otherwise, 

will find the entry
with the outgoing MAC address of AP, and directly transmit
the data frame to the access point with the modulation scheme


	
, which reverts to a degraded version of this method as
discussed in the following subsection.
Continue this example. When the data frame is received at


, the relay node checks its label-switching table to find the
Source 
default 
entry APim ,defL iMH defL APjji mm ,, ,jMH
INPUT OUTPUT
label MAC mode label MAC mode
APjji pp ,, ,
powerpower
APip ,
INPUT OUTPUT
label MAC mode label MAC mode powerpower
Relay 
default 
entry
jim ,defL iMH defL APjm ,APjip , APjp ,
Fig. 3. The label switching table in ECTP: (a) the source default entry, and
(b) the relay default entry.
Source
(MHi)
AP
Relay
(MHj)
NAV(RTS)
NAV(CTS)
RTS
CTS
NAV(Data Frame 2)
NAV(Data Frame 0)
NAV(Data Frame 0)
NAV(ACK 0)
Data
Frame
0
24Mbps
Data
Frame
0
36Mbps
ACK
0
Data
Frame
1
24Mbps
Data
Frame
1
36Mbps
ACK
1
Data
Frame
2
24Mbps
Data
Frame
2
36Mbps
ACK
2
NAV(Data Frame 1)
NAVData Frame 1)
NAV(ACK 1)
NAV(Data Frame
SIFS
SIFS
SIFS
SIFS
SIFS
SIFS
SIFS
SIFS
SIFS
SIFS
D
IFS
Fig. 4. An example of the control message flow of ECTP.
relay default entry,  

	

	


	 

	 	

	

for relaying this frame (as shown in Fig. 3). With the modu-
lation scheme 

	
found in this entry, 

immediately
forwards the received frame to AP without intervention of
the host protocol stack, and completes the transmission of
this data frame. As described above, this procedure eliminates
considerable control overheads. First, because of the RTS/CTS
exchanged at the very beginning, AP knows the fact that the
following data transmission is for the sender 

. Thus,
when receiving the data frames with the sending address of
the relay node 

, AP can correctly send its ACK to the
sender 

without confusion. No ACK is transmitted from


to 

and from AP to 

. The acknowledgement is
achieved explicitly by overhearing. Second, ECTP eliminates
unnecessary RTS/CTS exchanges for the following back-to-
back data frames from 

to AP because they can be
now transmitted in the same transmission burst. Third, ECTP
performs MAC layer relay, which requires no queuing delay
needed for network layer packet forwarding. By means of the
above, ECTP can efficiently eliminate various control over-
heads, increase throughput and decrease energy consumption
in the network.
2) Transmission with Best Modulation Scheme: Unlike that
in the multi-hop ad hoc wireless network, in MMI-WLAN,
whatever traffic should go through AP. Thus, the labels for
connections from MHs to AP can be trivially assigned with
a default value. However, in our work, due to the fact that
whenever a MH moves, the best modulation scheme from
itself to AP and that from itself to its relay node may change.
Consequently, how to decide the modulation schemes in the
label-switching table becomes an issue.
The possible solution is based on the capability of AP.
Periodically, AP can broadcast the Beacon and every MH must
listen to it to obtain important information. As shown in [7], a
simple broadcasting approach can be used to provide a number
2
TABLE I
IEEE 802.11A PHY MODELS
Mode Modulation Code
Rate
Data
Rate
Min

BPS
1 BPSK 1/2 6  -82 3
2 BPSK 3/4 9  -81 4.5
3 QPSK 1/2 12  -79 6
4 QPSK 3/4 18  -77 9
5 16-QAM 1/2 24  -74 12
6 16-QAM 3/4 36  -70 18
7 64-QAM 2/3 48  -66 24
8 64-QAM 3/4 54  -65 27
As shown above, the decision of switching between ECTP
and D-ECTP for a node is made by AP. It is reasonable because
AP has the full knowledge about its WLAN and can make the
decision from a global viewpoint. However, when the channel
condition varies dramatically or the wireless nodes change their
locations rapidly, a source node may fail in the middle of its
burst transmission. Thus, when a source node can not overhear
the transmission of its relay node, or can not correctly receive
ACK from AP, its transmission will revert to D-ECTP after the
failure. However, note that the node can use ECTP again if it
receives a 

from AP to allow so.
III. ENERGY CONSUMPTION MODEL
A. IEEE 802.11a OFDM PHY
As generally known, the IEEE 802.11a PHY has selected
OFDM to provide eight PHY modes with different modulation
schemes and different rates, making the idea of link adaptation
feasible. As shown in Table I, different data rates are asso-
ciated with different power level requirements. The minimum
sensitivity of 6Mbps mode (mode 1) requires only -82 dBm
while the mode of 54Mbps (mode 8) requires the sensitivity
of -65 dB, which is almost 50 times as that of mode 1.
In addition, with a higher data rate, there is larger receiver
sensitivity, and thus more transmission power is required for the
receiver to correctly decode the signals. Note also that different
PHY modes with different modulation schemes may encounter
different transmission failure probabilities due to channel error.
In this project, we consider that the noise over the wireless
medium is white Gaussian with spectral density 

. The
effects of such noise on different modulation schemes are listed
in Table I, and for more details, one may refer to [8].
B. Energy Consumption Components
So far, most of the works with regard to power optimization
consider that the power consumption is different for receiving
mode and transmission mode, because different circuits are
used in different modes. However, significant power may also
be consumed by other sources, such as the energy required
by the card for computation and channel sensing. In order
to investigate the overall power consumption, we classify
these sources into two categories: the base power sink, and
the incremental power sink. More precisely, let 

be the
power required for basic operations, which includes the power
consumed by the circuits, converter, baseband processor, and
MAC processing. The incremental parts due to transmitting,
receiving and channel sensing (idle) are denoted by 

, 

,
and 

, respectively. Consequently, the total power required
for transmitting state,  , for receiving state,  , and for
idle state,  , are given respectively by
  

 

 



	


	


	  

 


  

 

(1)
where  denotes the power conversion efficiency and the
same exponential - curves in [4] is adopted to represent
the efficiency.
IV. ENERGY-EFFICIENCY MODEL OF ECTP
A. State Duration and Energy Consumption
Given the IEEE 802.11a MAC/PYH, and the energy con-
sumption components, we now consider the total consumed
energy with regard to how long a station stays in each state:
transmitting, receiving, and idle, from the perspective of a
tagged node, say node A. From Aâ€™s point of view, the data
transmission in ECTP is completed by a sequence of frame
exchanges, just as in IEEE 802.11 MAC. However, the failure
probabilities and energy consumptions corresponding to the
same event in the sequence, but encountered by different nodes,
should be considered separately because the tagged node A will
expend different amount of energy according to whether this
event is experienced by itself or the other nodes in the network,
as shown below.
At the beginning, A transmits its RTS frame to AP, and
waits for a CTSTimeout interval, 

. If a PHY-
RXSTART.indication does not occur during this interval, A
should conclude that the RTS transmission has failed, as shown
in Fig. 7(a)3. Here, we assume that only RTS frames may fail
due to channel error or collision, whereas CTS frames can
always be correctly received. Accordingly, the probability that
no collision occurs and the RTS transmission fails is

	
	
    

 
	
(2)
and the corresponding energy consumption is

	
	
   
	
 
  
			
(3)
when this event is encountered by A itself.
Similarly, the probability that the other nodes in the network
encounter the same event is simply given by

	
	
        

 
	
(4)
However, to obtain the corresponding energy consumption,
we assume that every node in the network experiences the
same periods of time for the same event in the sequence. Thus,
when a node, besides A, transmits RTS and fails, A experiences
the same two periods of time, 

and 

in above,
except that as an observer, it stays in receiving state (instead of
transmitting state in the previous case) for the period of time,


. Consequently, A needs to expend the energy of

	
	
 	  
	
 
  
			
(5)
As shown above, when considering the same event encoun-
tered by the other nodes, we can usually obtain Aâ€™s energy
consumption by replacing PTX with PRX for the periods
of time that originally consume PTX when the event is
encountered by A itself (e.g., 

in above). Similarly, by
taking the N-1 other nodes into account, we can obtain the
corresponding probability. Thus, in what follows, we only
examine the sequence of events encountered by A itself (It can
be seen in Fig. 7 that the time-lines represent only the periods
3These related parameters, such as 
			
and PHY-
RXSTART.indication, can be found in the IEEE 802.11 MAC/PHY
specification [9].
4
(a)
Busy 
Medium Backoff
CTS
Timeout
Backoff
Source
Relay
AP
RTS
D
IFS
(b)
Backoff Backoff
Source
Relay
AP
SIFS
Data 
Frame           
k
ACK 
k-1
ACK
Timeout
SIFS
Busy 
Medium
SIFS
RTS
CTS
D
IFS
(c)
Backoff Backoff
Source
Relay
AP
SIFS
Data 
Frame           
k
ACK 
k-1
ACK
Timeout
SIFS
Busy 
Medium
SIFS
SIFS
Data 
Frame           
k
RTS
CTS
D
IFS
(d)
Backoff
Source
Relay
AP
SIFS
Data 
Frame           
k
ACK 
k-1
SIFS
Busy 
Medium
SIFS
SIFS
Data 
Frame           
k
SIFS
ACK 
k
BackoffRTS
CTS
D
IFS
EIFS
Fig. 7. Timing of failed frame transmissions under ECTP: (a) RTS failure,
(b) erroneous data frame reception by the relay node, (c) erroneous data frame
reception by AP, and (d) ACK failure.
a time slot. Thus, the success probability of data transmission,





, and that of ACK transmission,  




, are
given by




	
    



	


 (20)





   






 (21)
where  



 denotes the error probability of data trans-
mission, and  




 denotes that of ACK transmission.
By combing Eqs. (18) to (21),  

can be obtained, and thus,



can be given by



  


      




  














		








	





(22)
where the first item,    , denotes the collision
probability,  



, and   denotes the transmission
probability as shown below.
With this failure probability,  

, the initial contention
window,  , and the maximum backoff stage, , as defined in
IEEE 802.11a, we can obtain the transmission probability  
with PHY mode 
 for a tagged node by using the equation
in [10] as




    


  



  




(23)
In above, since the error probabilities of control frames and
data frames are all taken into account, the resulted  

in
fact relates the backoff process of contention window with the
physical layer impacts by replacing the conditional collision
probability  in [10], which does not take these errors into
account, with the probability ( 

) of Eq. (22). Consequently,
by solving the nonlinear system resulting from Eqs. (23) and
(22), the transmission probability,  , can be obtained.
C. State Probability and Energy-Efficiency Expression
We now derive the energy-efficiency for ECTP. Considering
the probabilities and the energy consumptions given in the
previous subsection, we can obtain the total energy consumed
for a tagged station in a time slot as

	

 
	

 
	

 


 (24)
where

	

 
	

	
 
	
	

	
	





	
	
 
	
	

  


	
	
 
	
	

  

 





	

 
	

  
	
	

	
	
and

	

 
	
 
	
 
	
	

	
	






	
	
  
	
	

  


	
	
 
	
	

  

 





	

 
	

  
	
	

	
	
From the system point of view, the average duration of a virtual
time slot, 

, is the statistical sum of the duration of
successful transmission, that of failure transmission, and that
of idle state. That is, 
	
 
 
 

 
 




 
 Ã† where 

and 

denote the successful
frame time and the failed frame time, respectively, Ã† represents
the duration of a physical time slot, and  ,  
and   represent the successful transmission probability,
the failed transmission probability, and the idle probability,
respectively. In addition, by means of notations given in the
previous subsection, the total number of data bits that can be
successfully transmitted in a time slot is given by


   





	
	
  
	
	
  (25)

	

     
	


  
	
which includes the number of data bits correctly received
before encountering a failure in a time slot. Given the above,
the bandwidth share of a station can be obtained with
 






	
(26)
Consequently, the energy-efficiency can be expressed as the
transmitted data per unit energy as follow





	


	



 
	

(27)
6
throughput that can be obtained by the method with negligible
path loss.
Figures 10(a)-(c), (d)-(f), and (g)-(i) show the results when
the node transmits data with 15 transmission power levels
and the throughput constraint of 0.3, 0.6 and 0.9  the
base throughput, respectively. From these results, we have the
following observation. As the throughput constraint increases,
the highest (worst) path loss at which successful transmissions
can be found decreases. Among these methods, the decreasing
degree of ECTP is obviously slower than the others because
the relay node involved provides better FEP, keeping the node
throughput as high as possible to meet the throughput constrain,
even under the high path loss condition. On the other hand,
without the aid of a relay node, IEEE 802.11 MAC and D-
ECTP provide similar decreasing degrees under the same path
loss condition. This can be found in Figs. 10(a), (d) and (g),
where the energy-efficiency curves of both methods drop more
dramatically than ECTP, which exhibits the same trends about
the throughputs among these methods.
40 50 60 70 80 90 100 110
0
1
2
3
4
5
6
x 107
pathloss (dB)
e
n
e
rg
y 
ef
fic
ie
nc
y 
(B
it/J
ou
le)
IEEE 802.11
D-ECTP
ECTP
40 50 60 70 80 90 100 110
-20
-10
0
10
20
40 50 60 70 80 90 100 110
-20
-10
0
10
20
tra
ns
m
is
si
on
 p
ow
er
 (d
Bm
)
40 50 60 70 80 90 100 110
-20
-10
0
10
20
pathloss (dB)
D-ECTP
IEEE 802.11
ECTP
40 50 60 70 80 90 100 110
0
2
4
6
8
40 50 60 70 80 90 100 110
0
2
4
6
8
m
o
de
40 50 60 70 80 90 100 110
0
2
4
6
8
pathloss (dB)
IEEE 802.11
D-ECTP
ECTP
(a) (b) (c)
40 50 60 70 80 90 100 110
0
1
2
3
4
5
6
x 107
pathloss (dB)
e
n
e
rg
y 
ef
fic
ie
nc
y 
(B
it/J
ou
le)
IEEE 802.11
D-ECTP
ECTP
40 50 60 70 80 90 100 110
-20
-10
0
10
20
40 50 60 70 80 90 100 110
-20
-10
0
10
20
tra
ns
m
is
si
on
 p
ow
er
 (d
Bm
)
40 50 60 70 80 90 100 110
-20
-10
0
10
20
pathloss (dB)
D-ECTP
IEEE 802.11
ECTP
40 50 60 70 80 90 100 110
0
2
4
6
8
40 50 60 70 80 90 100 110
0
2
4
6
8
m
o
de
40 50 60 70 80 90 100 110
0
2
4
6
8
pathloss (dB)
IEEE 802.11
D-ECTP
ECTP
(d) (e) (f)
40 50 60 70 80 90 100 110
0
1
2
3
4
5
6
x 107
pathloss (dB)
e
n
e
rg
y 
ef
fic
ie
nc
y 
(B
it/J
ou
le)
IEEE 802.11
D-ECTP
ECTP
40 50 60 70 80 90 100 110
-20
-10
0
10
20
40 50 60 70 80 90 100 110
-20
-10
0
10
20
tra
ns
m
is
si
on
 p
ow
er
 (d
Bm
)
40 50 60 70 80 90 100 110
-20
-10
0
10
20
pathloss (dB)
IEEE 802.11
D-ECTP
ECTP
40 50 60 70 80 90 100 110
0
2
4
6
8
40 50 60 70 80 90 100 110
0
2
4
6
8
m
o
de
40 50 60 70 80 90 100 110
0
2
4
6
8
pathloss (dB)
IEEE 802.11
D-ECTP
ECTP
(g) (h) (i)
Fig. 10. Energy-efficiency results obtained with the throughput constraint.
The target of 0.3 (0.6, 0.9) the base throughput: (a) ((d), (g)) energy-
efficiency, (b) ((e), (h)) power level selection, and (c) ((f), (i)) PHY mode
selection.
The second observation is that when the throughput con-
straint is higher, the selection of mode-power pair is farther
from the optimal. This occurs in the high path loss condition,
where more energy is required to achieve the target throughput.
For example, when the path loss is 90 dB and the throughput
constraint is 0.3 of the base throughput, the energy-efficiency
of IEEE 802.11 is #  Bit/Joule with the mode-power
pair of (4,17). This is also the optimal value that can be
obtained without the throughput constrain (referring to Fig.
9(a)). However it decreases to #	   Bit/Joule with
the mode-power pair of (5,20) when the throughput constraint
increases to 0.6 of the base throughput. Clearly, the selected
mode-power pair (5,20) is not the optimal pair (4,17) from the
energy-efficiency point of view. (However, from the throughput
0 0.3 0.6 0.9
80
85
90
95
100
105
110
throughput constraint
pa
th
 lo
ss
 (d
B)
IEEE 802.11
D-ECTP
ECTP
Fig. 11. The maximum path losses achieved by each method.
point of view, the former is preferred because it can achieve
the throughput requirement.) Finally, the energy-efficiency and
the corresponding mode-power pair become null because the
highest target throughput (0.9 of the base throughput) can not
be achieved under the same path loss condition.
For D-ECTP and ECTP, the same trend can be also ob-
served; the selections of mode-power pair are usually sub-
optimal when the throughput constraint is applied. However,
when counting the number of mode-power pairs closest to
the optimal, ECTP is the best among these methods under
the same throughput constrain, keeping the mode-power pairs
to be selected as the truncated results obtained without the
throughput constraint (referring to Figs. 9(b) and (c)).
Finally, figure 11 shows the path loss values below which
the energy-efficiency is valid for each method under different
degrees of the throughput constraint. As can be seen, if without
the throughput constraint, each method can achieve the highest
path loss it can tolerate. If applied, the tolerable path loss will
decrease as the throughput constraint increases. Although the
trend is the same for all methods, we note that ECTP can still
keep its value high with the constraint. On the other hand,
without the aid of a relay node, the other methods, i.e., IEEE
802.11 MAC and D-ECTP, can only reach their limits early.
VI. EXPERIMENT RESULTS
In order to verify the theoretical results in above, we
simulate ECTP, D-ECTP, and IEEE 802.11 MAC with Glo-
MoSim [12] after enhancing the original 802.11 DCF module
of this simulator to support the label switching mechanism and
the 802.11a PHY specification. According to the setting for the
theoretical environment, we modify the simulator so that every
node in the WLAN can choose any one of the 15 power levels
(from -19 to 23 dBm with 3 dBm gaps) to transmit a frame. In
addition, we assume that the wireless channel model is AWGN
(Additive White Gauss Noise), and the relay node of ECTP is
located in the middle point between sender and receiver, as in
the analysis. Besides, the background noise level is set to -85
dBm, and the  - for low efficiency in [4] and the 2-way path
loss model in GloMoSim are adopted.
Given that, we conduct the simulations with various network
topologies and data payload lengths. Each simulation run lasts
60 seconds in the infrastructure system with 10 or 30 nodes
8
VIII. PUBLICATION
We summary the publications associated with the three-year
projects as follows:
 Jain-Shing Liu, An Energy-Efficiency MAC-Layer Relay
Method for IEEE 802.11 Infrastructure Wireless LANs,
6th WSEAS International Conference on Applied Com-
puter Science (ACOSâ€™07), 2007/4.
 Jain-Shing Liu, Chun-Hung Richard Lin, An Energy-
Efficiency Label-Switching MAC Protocol for Infrastruc-
ture Wireless Networks, IEEE Transactions on Vehicular
Technology, 2007/5.
 Jain-Shing Liu and Chun-Hung Richard Lin, Achieving
Efficiency Channel Utilization and Weighted Fairness in
IEEE 802.11 WLANs with a P-Persistent Enhanced DCF,
Springer Lecture Notes in Computer Science (LNCS)
4864: Proceedings of the Third International Conference
on Mobile Ad-hoc and Sensor Networks, MSN 2007,
2007/12.
 Jain-Shing Liu, Throughput Analysis of Burst Transmis-
sion in IEEE 802.11e WLANs with a Fading Channel, 7th
WSEAS Int. Conf. on APPLIED COMPUTER and AP-
PLIED COMPUTATIONAL SCIENCE (ACACOSâ€™08),
2008/4.
 Jain-Shing Liu, A Distributed Transmission Control
Method for Weighted Fairness in IEEE 802.11 WLANs,
7th WSEAS Int. Conf. on TELECOMMUNICATIONS
and INFORMATICS (TELE-INFOâ€™08), 2008/5.
REFERENCES
[1] A. Kamerman and L. Monteban. WaveLAN II: A high-performance
wireless LAN for the unlicensed band. Bell Labs Technical Journal,
pages 118â€“133, Summer 1997.
[2] G. Holland, N. Vaidya, and P. Bahl. A Rate-Adaptive MAC Protocol for
Multi-Hop Wireless Networks. in Proceedings of ACM MOBICOMâ€™01,
2001.
[3] B. Sadeghi and V. Kanodia and A. Sabharwal and E. Knightly. Oppor-
tunistic Media Access for Multirate Ad Hoc Networks. Proceedings of
MobiCom 2002, 2002.
[4] D. Qiao, S. Choi, A. Soomro and K. G. Shin. Energy-Efficient PCF
Operation of IEEE 802.11a Wireless LAN. Computer Network, pages
39â€“54, 2003.
[5] J. Zhao, Z. Guo and W. Zhu. Power Efficiency in IEEE 802.11a WLAN
with Cross-layer Adaptation. in Proceeding of ICC 2003, 3:2030â€“2034,
May 2003.
[6] Arup Acharya, Archan Misra, and Yorktown Heights. A Label-switching
Packet Forwarding Architecture for multi-hop Wireless LANs. IBM
Research Report, RC22512(W0206-141), June 2002.
[7] S. T. Sheu, Y. H. Lee and M. H. Chen. Providing Multiple Data Rates in
Infrastructure Wireless Networks. in Proceedings of GLOBECOM â€™01,
2001.
[8] J. G. Proakis. Digital Communications, 3rd ed. McGraw Hill, New York,
NY, 1995.
[9] IEEE 802.11 II: Wireless LAN Medium Access Control (MAC) and
Physical Layer (PHY) Specifications, Standard, IEEE. August 1999.
[10] G. Bianchi. Performance Analysis of the IEEE 802.11 Distributed Coor-
dination Function. IEEE Journal on Selected Areas in Communications,
18(3):535â€“547, March 2003.
[11] T. S. Rappaport. Wireless Communication. Prentice Hall, 1996.
[12] Global Mobile Information Systems Simulation Library.
http://pcl.cs.ucla.edu/projects/glomosim.
10
ä¸‰ï¼Energy Efficiency 
å››ï¼Data Processing 
äº”ï¼Self-organization and Synchronization 
å…­ï¼Deployment and Application 
ä¸ƒï¼Security 
 
åœ¨æ­¤ä¸­æœ¬äººçš„æœƒè­°è«–æ–‡ç‚º "Achieving Efficiency Channel Utilization and Weighted 
Fairness in IEEE 802.11 WLANs with a P-Persistent Enhanced DCF"ã€‚æ­¸å±¬æ–¼è©²æœƒæ‰€è¦
åŠƒçš„ Protocol è«–æ–‡é¡ä¸­ã€‚ 
 
3. æ”œå›è³‡æ–™åç¨±åŠå…§å®¹ 
è³‡æ–™åç¨±ï¼šSpringer çš„ Lecture Notes in Computer Science (LNCS) 4864 è™Ÿï¼š
Proceedings of the Third International Conference on Mobile Ad-hoc 
and Sensor Networks, MSN 2007ã€‚ 
è³‡æ–™å…§å®¹ï¼šæœƒè­°è«–æ–‡é›†çš„å…§å®¹åŒ…å«æ‰€æœ‰ç™¼è¡¨çš„è«–æ–‡ã€‚ 
 
Achieving Eï¬ƒciency Channel Utilization and Weighted Fairness 175
access with collision avoidance (CSMA/CA) with binary exponential back-oï¬€,
which enables fast installation with minimal management and maintenance costs
in the networks. With the aid of DCF, IEEE 802.11 WLAN becomes the most
successful consumer wireless platform, just as its wired counterpart, Ethernet.
Now, with the rapid world-wide deployment of WLANs, the corresponding de-
vices, such as wireless interface cards for notebook and desktop PCs, turn out
to be the most popular consumer electronics in the world.
Given its popularity, IEEE 802.11 DCF, however, does not provide service
diï¬€erentiation, such as throughput and delay guarantees, among connections of
diï¬€erent priorities. Moreover, it also does not consider fair allocation of band-
width in the networks. In fact, the above two missed in DCF, have been identiï¬ed
as the most important issues when designing the wireless card of next genera-
tion to provide Qualify of Service (QoS) in WLANs. Unfortunately, the two
deign goals conï¬‚ict with each other in usual. It can be easily identiï¬ed in the
wireless networks that the maximum channel utilization could be achieved if
only one node is allowed to transmit continuously without back-oï¬€, while all the
other nodes are starved. The maximum throughput achieved by the monopolistic
behavior obviously conï¬‚icts with the goal of fair share.
In this paper, we study the challenging problem to achieve both goals simul-
taneously, especially for data communications in WLANs. To this end, the ideal
weighted fairness should be deï¬ned at ï¬rst. Assume that there are N diï¬€erent
priority classes. Each class i is characterized by a positive weight, Ïˆi, with the
assumption of 1 = Ïˆ1 > Ïˆ2, ..., > Ïˆn > 0. Assume further that each node carries
only one traï¬ƒc ï¬‚ow, with fi denoting the set of nodes carrying class i traï¬ƒc. Let
wki (tb, te) be the amount of class i traï¬ƒc transmitted by node k âˆˆ fi during the
time interval [tb, te]. In order to achieve fair share to all traï¬ƒc ï¬‚ow, it requires
wki (tb, te)
Ïˆi
=
wk
â€²
j (tb, te)
Ïˆj
,
âˆ€i, j âˆˆ {1, ..., N}, âˆ€k âˆˆ fi, âˆ€kâ€² âˆˆ fj (1)
As shown above, the ideal weighted fairness cannot be actually achieved since
data transmitted on a real network is packetized. However, when considered with
IEEE 802.11 WLANs, each data packet in the higher layer is fragmented into
smaller MAC frames for transmission, which provides a reasonable assumption
that each data ï¬‚ow has the same MAC frame size. Let Ps,i be the probability
that a MAC frame is transmitted from a node in class i and successful. With
this, it is considered that all the traï¬ƒc ï¬‚ows within a WLAN would fairly share
the wireless medium and the weighted fairness in the WLAN is achieved, in a
probabilistic sense, if the following condition holds
Ps,i
Ïˆi
=
Ps,j
Ïˆj
, âˆ€i, j âˆˆ {1, ..., N} (2)
Given the above, the objective of this work is then to propose a method
that can 1) achieve the weighted fairness among diï¬€erent priority data ï¬‚ows
Achieving Eï¬ƒciency Channel Utilization and Weighted Fairness 177
protocol in [7] that does comply with the legacy 802.11 DCF and require no
changes in the existing frame formats and access procedures. As shown in
Fig. 1, the P-IEEE protocol uses a separate layer between the standard ac-
cess scheme and the physical layer to calculate the transmission opportunity
for a node. When carried out, each node ï¬lters its transmission attempt based
on the decision made in this layer. If the decision is positive, the frame under
transmission is delivered by the normal DCF. Otherwise, the frame is deferred
with a new back-oï¬€ interval, just as that it encounters a collision in the legacy
MAC.
Therefore, with this protocol a station can manipulatively control its transmis-
sion ï¬‚ow. However, it is still unknown that if a node in a certain priority class can
decide the controlled p-persistent transmission probability for its transmission
ï¬‚ow to cooperatively achieve the weighted fairness with other ï¬‚ows from diï¬€er-
ent classes in the WLAN. For solving this problem, the controlled probability,
called P T, should be represented with a form that is analytically tractable in the
multi-class environment. In this work, it is done with a simple non-uniform in-
creasing function that can reasonably reï¬‚ect the channel contention level sensed
by a node in class i and back-oï¬€ stage j. More precisely, with Ï†i as the trans-
mission factor for class i, the probability is represented by
P ti,j = 1 âˆ’ Ï†j+1i (3)
3 Throughput of P-IEEE 802.11 Protocol in Multi-class
Environment
For the throughput calculation in the multi-class environment, we ï¬rst let the
conditional collision probability of class i be Pi (as P in [8]). Given that, the
successful transmission probability of a node can then be represented by (1 âˆ’
Pi) Â· P ti,j . With this probability, a node will reset its back-oï¬€ timer to a value
within Wi,0 (the minimum window size of class i). On the other hand, the failure
transmission probability of a node can be given by 1 âˆ’ (1 âˆ’ Pi) Â· P ti,j . In this
case, a node will defer its transmission to the next back-oï¬€ stage, choosing a
new back-oï¬€ timer with a value within the window size of the stage. Besides,
other non-null probabilities include the probability of 1 with which a back-oï¬€
timer should decrease by 1 when the channel is sensed idle, and the probability
of 1 with which a node should reset its contention window to Wi,0 when the
maximum back-oï¬€ stage mi is encountered.
More precisely, for a node in calss i âˆˆ [1, N ], let b(i, t) be the stochastic
process representing the back-oï¬€ timer k âˆˆ [0,Wi,j âˆ’1], and s(i, t) be the process
representing the back-oï¬€ stage j âˆˆ [0,mi]. Thus, at time t, the state of a node
in class i can be modeled with a discrete-time Markov chain {b(i, t), s(i, t)}, and
fully determined by {i, j, k}, as shown in Fig. 2. With the Markov chain, the
non-null probabilities considered in above can be represented by
Achieving Eï¬ƒciency Channel Utilization and Weighted Fairness 179
PS be the probability that a successful transmission occurs in a slot time. In
terms of Ï„i, these probabilities can be represented by
Ptr = 1 âˆ’
N


h=1
(1 âˆ’ Ï„h)nh (7)
Ps,i = Ï„i Â· (1 âˆ’ Ï„i)niâˆ’1 Â·
N


h=1,h=i
(1 âˆ’ Ï„h)nh (8)
PS =
N

i=1
ni Â· Ps,i =
N

i=1
ni Â· Ï„i
1 âˆ’ Ï„i Â· (1 âˆ’ Ptr) (9)
With these probabilities, we can express the throughput for a node in class i,
Si, and the overall system throughput, S, as the following ratios
Si =
Ps,i Â· E[P ]
(1 âˆ’ Ptr) Â· Ïƒ + PS Â· Ts + (Ptr âˆ’ PS) Â· Tc (10)
S =
PS Â· E[P ]
(1 âˆ’ Ptr) Â· Ïƒ + PS Â· Ts + (Ptr âˆ’ PS) Â· Tc (11)
where E[P ] denotes the average frame length, Ïƒ the duration of an empty slot
time, and Ts and Tc the average times that the channel is sensed busy due
to a successful transmission or a collision, respectively. For the values of these
parameters, one may refer to [8].
4 Weighted Fairness with P-IEEE 802.11 DCF
In this section, we introduce a method to obtain weighted fairness among data
traï¬ƒc in diï¬€erent priority classes while maximizing aggregate throughput and
minimizing frame delay. For doing so, we take Ps,i in (8) into the weighted
fairness in (2), and after some simple manipulations, we have
Ï„i Â· (1 âˆ’ Ï„i)niâˆ’1 Â· (1 âˆ’ Ï„j)nj
Ïˆi
=
Ï„j Â· (1 âˆ’ Ï„j)njâˆ’1 Â· (1 âˆ’ Ï„i)ni
Ïˆj
, âˆ€i, j âˆˆ {1, ..., N} (12)
Further, without loss of generality, we let Ï„i = Ï„1, which leads to
Ï„j =
Ïˆj Â· Ï„1 Â· (1 âˆ’ Ï„1)n1âˆ’1
Ïˆi Â· (1 âˆ’ Ï„1)n1 + Ïˆj Â· Ï„1 Â· (1 âˆ’ Ï„1)n1âˆ’1
=
Ïˆj Â· Ï„1
Ïˆ1 âˆ’ Ïˆ1 Â· Ï„1 + Ïˆj Â· Ï„1 (13)
In other words, any Ï„j , j = 1 can be represented in terms of Ïˆj , Ïˆ1, and Ï„1. Thus,
if the optimal transmission probability of class 1, Ï„âˆ—1 , can be given, the optimal
transmission probabilities of the other classes, Ï„âˆ—j s, can then be obtained with
Ï„âˆ—1 and the weights Ïˆjs. Given the above, we now go to the step to ï¬nd Ï„âˆ—1 that
Achieving Eï¬ƒciency Channel Utilization and Weighted Fairness 181
Based on this, we can make the following approximation for the multi-class case,
Ï„âˆ—1 â‰ˆ 1
n1 +

Tc
Ïƒ
Â· n1 Â· (
N
j=2 nj Â· Ï†j)
(19)
Given that, the other approximations of Ï„âˆ—j s can be obtained with (13). With
these approximations, we can solve the nonlinear system equations in (6) for
Ï†âˆ—i s. Finally, the approximated P
tâˆ—
i,js can be resulted from (3), with the Ï†
âˆ—
i s just
obtained.
5 Performance Evaluation
In this section, we report on experiments made in order to verify the theoretical
results derived previously. In the experiments, we implement P-IEEE with mul-
tiple classes on the Pythagor simulator [9] and let all nodes with IEEE 802.11a
PHY be uniformly distributed in the WLAN. Each node has a ï¬‚ow with 2000-
bytes of UDP packets toward a randomly chosen destination, resulting in the
saturated throughput as required. With the assumption of no hidden terminal
problem, P-IEEE and IEEE 802.11 MAC are both taken into account for the
performance metrics under consideration, throughput, frame delay, and weighted
fairness, with diï¬€erent scenarios. However, we show only the results of 6 Mbps
data rate in IEEE 802.11a PHY, due to space limitations. Other results with dif-
ferent data rates have the same trend, and can be represented by that of 6 Mbps.
5.1 Single Class Case
Without loss of generality, we examine the performance model with a single class
to verify the optimal P T (P t
âˆ—
i,j) derived. The optimal method derived from (14)
is examined in the experimental environment with 10 nodes of the single class
(class 1) uniformly distributed in the WLAN, and the transmission factor Ï†1
changed from 0 to 0.9 with a step size of 0.1.
Figure 3 shows the results of theory and simulation with respect to the aggre-
gate throughput and the average frame delay in (a) and (b), respectively. From
 0.068
 0.07
 0.072
 0.074
 0.076
 0.078
 0.08
 0.082
 1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0
th
ro
ug
hp
ut
 (n
orm
ali
ze
d)
transmission factor
optimal theory
IEEE 802.11 theory
P-IEEE theory
optimal simulation
IEEE 802.11 simulation
P-IEEE simulation
 0.0165
 0.017
 0.0175
 0.018
 0.0185
 0.019
 0.0195
 0.02
 1 0.9 0.8 0.7 0.6 0.5 0.4 0.3 0.2 0.1 0
de
la
y 
(se
co
nd
)
transmission factor
optimal theory
IEEE 802.11 theory
P-IEEE theory
Optimal simulation
IEEE 802.11 simulation
P-IEEE simulation
(a) (b)
Fig. 3. Experiment results of 10 nodes with a single class and 6 Mbps data rate: (a)
the aggregate throughput, and (b) the average frame delay
Achieving Eï¬ƒciency Channel Utilization and Weighted Fairness 183
 0
 0.02
 0.04
 0.06
 0.08
 0.1
 0.12
 0.14
 0.16
 0.18
 2  4  6  8  10  12  14  16  18
th
ro
ug
hp
ut
 (n
orm
ali
ze
d)
tag of experiment number
Optimal class 1
Optimal class 2
Optimal class 3
Approximation class 1
Approximation class 2
Approximation class 3
 0
 1
 2
 3
 4
 5
 6
 7
 8
 9
 10
 2  4  6  8  10  12  14  16  18
fa
irn
es
s
tag of experiment number
Optimal Class 1 / Class 2
Optimal Class 1 / Class 3
Approximation Class 1 / Class 2
Approximation Class 1 / Class 3
Optimal fairness index
Approximation fairness index
(a) (b)
Fig. 4. Throughput results of 3 classes: (a) throughput, and (b) the corresponding
fairness index
 0
 0.05
 0.1
 0.15
 0.2
 0.25
 0.3
 0.35
 2  4  6  8  10  12  14  16  18
de
la
y 
(S
ec
on
d)
tag of experiment number
Optimal class 1
Optimal class 2
Optimal class 3
Approximation class 1
Approximation class 2
Approximation class 3
 0
 1
 2
 3
 4
 5
 6
 7
 8
 9
 10
 2  4  6  8  10  12  14  16  18
fa
irn
es
s
tag of experiment number
Optimal Class 2 / Class 1
Optimal Class 3 / Class 1
Approximation Class 2 / Class 1
Approximation Class 3 / Class 1
Optimal fairness index
Approximation fairness index
(a) (b)
Fig. 5. Delay results of 3 classes: (a) delay, and (b) the corresponding fairness index
throughput of class 1 is almost 2 times (10 times) that of class 2 (class 3) in
all scenarios. The fair share is expected and can be further conï¬rmed in Fig.
4(b), in which the direct ratio between class 1 and 2 (class 1 and 3) is about 2
(10) and the fairness index is about 1 despite the scenarios. Both indicate the
same results on the fairness. However the former represents the desired fair share
between these two classes while the latter shows the fairness in the sense that
the weighted share is nearly identical for each traï¬ƒc ï¬‚ow with few variations.
All the above indicates that the design goals, achieving weighted fairness and
performance maximization can be actually obtained with our method with the
P-IEEE protocol.
Figure 5 shows the delay results, with the same trend as that in Fig. 4. How-
ever, when comparing the two ï¬gures, we have more observations. First, the
minimum frame delay is achieved when the maximum aggregation throughput
is obtained, with the same P t
âˆ—
i,js either exactly or approximately
1. This complies
with our theoretical analysis and conï¬rms the same trend in the single class case.
Second, the fact that both optimal methods and approximations can produce
similar results despite the scenarios implies that our algorithms can tolerate the
variance of Ï„âˆ—1 to some content. This robustness is particularly useful because
having this property, our algorithms could be expected to produce stable results
even if the value of Ï„âˆ—1 may vary due to uncertain channel condition in WLANs.
1 Note that, however, the P t
âˆ—
i,js involved are not shown in the ï¬gures.
3
rd
 International Conference on Mobile Ad-Hoc 
and Sensor Networks (MSNâ€™07) 
å‡ºå¸­å ±å‘Š 
 
åŠ‰å»ºèˆˆå‰¯æ•™æˆ 
éœå®œå¤§å­¸è³‡è¨Šå·¥ç¨‹å­¸ç³» 
 
1.æœƒè­°é‡è¦æ€§ 
 
éš¨è‘—é€šè¨ŠæŠ€è¡“ä¹‹é£›å¿«é€²æ­¥ï¼Œç„¡ç·šè¡Œå‹•é€šè¨Šèˆ‡ç„¡ç·šç¶²è·¯æ—¥å½¢é‡è¦ï¼Œå°æ–¼ç„¡é å¼—å±†çš„è³‡
è¨Šæœå‹™ä¹‹ææ˜‡ï¼Œæœ‰é‡å¤§çš„å½±éŸ¿ã€‚ä»Šå¹´ç”±ä¸­åœ‹åŒ—äº¬äº¤é€šå¤§å­¸ä¸»è¾¦ç¬¬ä¸‰å±†ç„¡ç·šè¡Œå‹•éš¨æ„
ç¶²è·¯èˆ‡æ„Ÿæ¸¬ç¶²è·¯åœ‹éš›æœƒè­°(3
rd
 International Conference on Mobile Ad-Hoc and 
Sensor Networks)ï¼Œé¡§åæ€ç¾©ï¼Œå°±æ˜¯ä»¥ç„¡ç·šè¡Œå‹•ç¶²è·¯ä»¥åŠç„¡ç·šæ„Ÿæ‡‰ç¶²è·¯ç‚ºå…¶ä¸»è¦è­°
é¡Œã€‚é€™ä¸€æ¬¡å¤§æœƒæ–¼ 2007 å¹´åäºŒæœˆåä¸€æ—¥è‡³åå››æ—¥åœ¨ä¸­åœ‹å¤§é™¸ï¼ŒåŒ—äº¬å¸‚çš„ä¸­è‹‘é£¯åº—èˆ‰
è¡Œã€‚ç”±æ–¼ä»Šå¹´æ­¤æœƒè­°çš„æŠ•ç¨¿äººæ•¸çœ¾å¤šï¼Œæœ€å¾Œèƒ½è¢«æ­¤æœƒæ‰€æ¥å—ç™¼è¡¨çš„è«–æ–‡å¯¦å±¬é›£å¾—(ç´„
25%)ï¼Œè€Œæ‰€æ¥å—ä¹‹è«–æ–‡å‡æ”¶éŒ„æ–¼ Springer å‡ºç‰ˆçŸ¥åçš„ Lecture Notes in Computer 
Science ç³»åˆ—ä¸­ã€‚ 
 
2. åƒåŠ æœƒè­°ç¶“é 
 
å› ç‚ºæœ¬æœƒæ˜¯ä¸­åœ‹å¤§é™¸èˆ‰è¾¦ç„¡ç·šè¡Œå‹•è¨ˆç®—æœ€é‡è¦çš„æœƒè­°ä¹‹ä¸€ï¼Œè¨±å¤šç„¡ç·šé€šè¨Šç•Œè‘—åçš„
å°ˆå®¶å­¸è€…éƒ½å‡ºå¸­æœ¬æœƒï¼Œé‡å°ç„¡ç·šè¡Œå‹•æ„Ÿæ‡‰ç¶²è·¯ä»¥åŠéš¨æ„ç¶²è·¯ï¼Œåšäº†ç²¾é—¢çš„æ¼”èªª
(tutorials and keynote address)ã€‚å…¶ä¸­çŸ¥åçš„å­¸è€…æä¾›äº†ç²¾é—¢çš„ lecturesï¹åŒ…
å«æœ‰ Sajal K. Das (USA)ç™¼è¡¨çš„ Information Intensive Wireless Sensor Networks: 
Challenges and Solutionsï¼ŒZhisheng Niu (Taiwan)ç™¼è¡¨çš„ QoS-aware Cooperative 
and Opportunistic Schedulidng Exploiting Multi-user Diversity for Rate 
Adaptive Ad Hoc Networksï¼Œåˆ†åˆ¥é‡å°ç¾åœ¨ç¾æœ‰çš„ç„¡ç·šæ„Ÿæ‡‰ç¶²è·¯ä»¥åŠç„¡ç·šè¡Œå‹•éš¨æ„
ç¶²è·¯ä½œäº†å…¨ç›¤è€Œå®Œæ•´çš„ä»‹ç´¹ã€‚ 
 
å› æœ¬äººç ”ç©¶å°ˆé•·åœ¨ç„¡ç·šè¡Œå‹•ç¶²è·¯ï¼Œæ•…å°ˆæ³¨æ–¼æ­¤é ˜åŸŸä¹‹ç›¸é—œç ”ç©¶ç‹€æ³ã€‚è€Œç”±ç„¡ç·šé€šè¨Š
åŠè¡Œå‹•è¨ˆç®—ä¸­çš„ç›¸é—œè­°é¡Œç©¿æ’å‡ºç¾åœ¨å„å€‹ä¸åŒçš„è­°ç¨‹ä¸­ï¼Œæ•…æŒ‘é¸æ™‚é–“ä¸è¡çªï¼Œæœ€ç›¸
é—œçš„è­°ç¨‹è†è½å„å€‹å­¸è€…æ‰€ç™¼è¡¨ä¹‹ç›¸é—œç ”ç©¶çµæœã€‚                                           
 
æœ¬æœƒä¾ç…§æ–‡ç« çš„æ€§è³ªï¼Œå°‡è«–æ–‡åŠƒåˆ†æˆä»¥ä¸‹ä¸åŒé ˜åŸŸï¼š 
 
ä¸€ï¼Routing 
äºŒï¼Protocol 
Achieving Eï¬ƒciency Channel Utilization and
Weighted Fairness in IEEE 802.11 WLANs with
a P-Persistent Enhanced DCF
Jain-Shing Liu1 and Chun-Hung Richard Lin2
1 Department of Computer Science and Information Management, Providence
University, Taiwan, R.O.C
2 Department of Computer Science and Engineering, National Sun Yat-Sen
University, Taiwan, R.O.C
{alfred.hofmann,ursula.barth,ingrid.beyer,christine.guenther,
frank.holzwarth,anna.kramer,erika.siebert-cole,lncs}@springer.com
http://www.springer.com/lncs
Abstract. Fair allocation of bandwidth and maximization of channel
utilization are two important issues when designing a contention-based
wireless medium access control (MAC) protocol. However, fulï¬lling both
design goals at the same time is very diï¬ƒcult. Considering the problem in
the IEEE 802.11 wireless local area networks (WLANs), in this work we
propose a method using a p-persistent enhanced DCF, called P-IEEE
802.11 DCF, to achieve the weighted fairness among multiple priority
classes in a WLAN. The key idea of this method is that when the back-
oï¬€ timer of a node reaches zero, the transmission probability is properly
controlled to reï¬‚ect the relative weights among data traï¬ƒc ï¬‚ows so as
to maximize the aggregate throughput and to minimize the frame de-
lay at the same time. In particular, we obtain the optimal transmission
probability based on a theoretical analysis, and also provide an approx-
imation to this probability. The derived optimal and approximation are
all evaluated numerically and simulated with diï¬€erent scenarios. The re-
sults show that the proposed method can fulï¬ll our design goals under
diï¬€erent numbers of priority classes and diï¬€erent numbers of hosts.
1 Introduction
1.1 Motivation and Problem Statement
IEEE 802.11 [1] has become one of the most important and successful MAC pro-
tocols for wireless infrastructure and infrastructureless (ad hoc) LANs. It simul-
taneously employs a mandatory contention-based channel access function called
Distributed Coordination Function (DCF), and an optional centrally controlled
channel access function called Point Coordination Function (PCF). However, the
popularity of IEEE 802.11 market is mainly due to DCF, while PCF is barely
implemented in the current products due to its complexity and ineï¬ƒciency for
the normal data transmission. In contrast, DCF adopts a carrier sense multiple
H. Zhang et al. (Eds.): MSN 2007, LNCS 4864, pp. 174â€“184, 2007.
cÂ© Springer-Verlag Berlin Heidelberg 2007
176 J.-S. Liu and C.-H. Richard Lin
Shared Transmission channel
Standard Access 
Scheduling protocol
Success
Access Indication
Collision
Defer Access
P-Persistent Transmission 
Control Mechanism
Perform Access
Station X
)(Pt
)P-(1 t
Fig. 1. The architecture of P-IEEE 802.11 DCF
while maximizing the aggregate throughput and minimizing the frame delay,
and 2) remain in compliance with the legacy 802.11 DCF without requirement
of changes in its existing frame formats and access procedures.
1.2 Related Works
Since IEEE 802.11 becomes the de facto standard for WLANs, there are quite
a lot of related works proposed either for obtaining its theoretical limits or for
improving its performances. Speciï¬cally, many related works have been done to
develop scheduling algorithms for wireless networks to achieve weighted fairness.
However, most of them are centralized or polling-based protocols. Recently, with
the distributed EDCF in IEEE 802.11e, some works have also been done for
service diï¬€erentiation by using diï¬€erent priority schemes based on, for example,
setting diï¬€erent IFS, CW, or back-oï¬€ parameters speciï¬ed in the MAC. However,
these previous works are usually conducted for either performance maximization
or weighted fairness in the WLANs.
Only few related works may take both design goals into account with a
distributed mechanism. In these few works, [2] proposes a method to achieve
weighted fairness in IEEE 802.11e. However, it considers only 2 classes without
performance maximization, and provides no general solution when the number
of classes larger than 2. [3] attempts to deal with this problem in a multi-hop
wireless network subject to a minimum fairness guarantee, which is diï¬€erent
from the issues we address on the WLANs. [4] provides a so-called P-MAC that
modiï¬es the DCF to achieve the two goals, but it uses a constant contention
window and requires modiï¬cations to the DCF. [5] extends the work in [6], and
derives a value p for each class to maximize the system capacity while ensuring
a user-speciï¬ed utilization ratio. However, unlike ours, this work adopts another
modeling scheme that determines the back-oï¬€ interval with a p-persistent trans-
mission probability sampling from a geometric distribution.
2 P-IEEE 802.11 DCF
To deal with the weighted fairness problem and fulï¬ll the design objective men-
tioned previously, we choose to extend the capability of P-IEEE 802.11 DCF
178 J.-S. Liu and C.-H. Richard Lin
2Wj,i, ji, âˆ’
1W1,ji, 1ji, âˆ’+ +2W1,ji, 1ji, âˆ’+ +
1 1 1 1
1 1 1 1
1 1 1 1
1 1 1 1
t
i,0i P)P(1 â‹…âˆ’
t
ji,i P)P(1 â‹…âˆ’
i,1
t
i,0i W)P)P(1-(1 â‹…âˆ’
t
1ji,i P)P(1 +â‹…âˆ’
i,0W
1 ii mi,
t
1mi,i W)P)P(1-1( âˆ’â‹…âˆ’
1Wi,0, i,0 âˆ’2Wi,0, i,0 âˆ’00,i, 10,i, 20,i,
0j,i, 1j,i, 2j,i, 1Wj,i, ji, âˆ’
1ji,
t
ji,i W)P)P(1-(1 +â‹…âˆ’
01,ji, + 11,ji, + 21,ji, +
0,mi, i 1,mi, i 2,mi, i 2W,mi, imi,i âˆ’ 1W,mi, imi,i âˆ’
Fig. 2. The Markov chain model for P-IEEE 802.11 MAC with multiple classes
 
















P{i, j, k|i, j, k + 1} = 1,
k âˆˆ (0,Wi,j âˆ’ 2), j âˆˆ (0,mi)
P{i, 0, k|i, j, 0} = (1âˆ’Pi)Â·P
t
i,j
Wi,0
,
k âˆˆ (0,Wi,0 âˆ’ 1), j âˆˆ (0,mi)
P{i, j, k|i, j âˆ’ 1, 0} = 1âˆ’(1âˆ’Pi)Â·P
t
i,jâˆ’1
Wi,j
,
k âˆˆ (0,Wi,j âˆ’ 1), j âˆˆ (1,mi)
P{i, 0, k|i, mi, 0} = 1Wi,0 ,
k âˆˆ (0,Wi,mi âˆ’ 1)
(4)
With some manipulations, we can lead the above to the stationary probability,
bi,j,k, for a node in class i with its back-oï¬€ stage in j and back-oï¬€ timer in k,
bi,j,k =
Wi,j âˆ’ k
Wi,j
Â·
 


(1 âˆ’ Pi) Â·miâˆ’1j=0 P ti,j Â·
jâˆ’1
k=0(1 âˆ’ (1 âˆ’ Pi)P ti,j) Â· bi,0,0 + bi,mi,0, j = 0

1 âˆ’ (1 âˆ’ Pi) Â· P ti,jâˆ’1
 Â· bi,jâˆ’1,0, 0 < j â‰¤ mi
(5)
Finally, the probability Ï„i that a node transmits a frame in a randomly chosen
time and the probability Pi that a station in the back-oï¬€ stage senses the channel
busy, both for class i, constitute a nonlinear system of equations as follow
	
Ï„i =
mi
j=0 P
t
i,j Â· bi,j,0
Pi = 1 âˆ’ (1 âˆ’ Ï„i)niâˆ’1 Â·Nh=1,h=i(1 âˆ’ Ï„h)nh
(6)
where ni denotes the number of nodes in class i. Not that because there are
N classes, the system eventually has 2N unknowns Ï„i and Pi, to be solved
numerically.
Further, for the throughput calculation, we let Ptr be the probability of at
least one transmission in a slot time. Similarly, let Ps,i be the probability of a
transmission that is successful for a node in class i (as deï¬ned previously), and
180 J.-S. Liu and C.-H. Richard Lin
can achieve the maximum aggregate throughput and the minimum frame delay,
which eventually leads to the optimal P Ts as required. At ï¬rst, we consider
that for the maximum aggregate throughput as follows.
4.1 Optimal P-Persistent Probabilities of Transmission for the
Maximum Aggregate Throughput
Optimal Method. For the maximum aggregate throughput in the multi-class
environment, we need to know the relationship between Ï„1 and the aggregate
throughput in the system at ï¬rst. To this end, we multiply (11) by 1PS to remove
the probability PS in the numerator part, leading to
S
Ã— 1
PS=
E[P ]
Ts âˆ’ Tc + Ptr Â·Tc+(1âˆ’Ptr)Â·ÏƒPS
(14)
From the above, we can see that if the denominator part can be minimized, the
throughput S can be maximized. Thus, we deï¬ne the following for optimization
Sf =
PS
Ptr Â· Tc + (1 âˆ’ Ptr) Â· Ïƒ (15)
It is clear from Eqs (7), (9) and (13) that Sf depends on Ï„1. Thus we can solve
the equation
dSf
d Ï„1
= 0 (16)
to obtain the optimal probability Ï„âˆ—1 that maximizes the aggregate throughput,
and then apply (13) to obtain Ï„âˆ—j s for the other classes. Given that and the
numbers of nodes in all priority classes, the optimal p-persistent transmission
probabilities, P t
âˆ—
i,js, can be obtained with (3).
Approximation. However, as shown above, it is hard to ï¬nd a closed-form
solution for (16) when N > 3. Thus, we also consider an approximation to quickly
calculate Ï„âˆ—i for each class i. The idea is obtained by observing the simplest case
where there are only two nodes in the WLAN, and each node carries a traï¬ƒc
ï¬‚ow belonging to diï¬€erent classes. That is, n1 = 1 and n2 = 1. Further, letting
Ïˆ1 = 1, Sf in (15) can thus be reduced to
Sf2(sim) =
Ï„1 Â· (1 âˆ’ Ï„2) + Ï„2 Â· (1 âˆ’ Ï„1)
(1 âˆ’ Ï„1) Â· (1 âˆ’ Ï„2) Â· (Ïƒ âˆ’ Tc) + Tc (17)
This simpliï¬ed equation can be easily solved, which provides the optimal prob-
ability Ï„âˆ—1 as
Ï„âˆ—1(sim) =
1
1 +

Tc
Ïƒ
Â· Ïˆ2
(18)
182 J.-S. Liu and C.-H. Richard Lin
this ï¬gure, we have several observations worth noting. First, the optimal value
Ï†âˆ—1 is about 0.66 for both throughput and delay. This is correctly predicted by
our analysis showing that with either metric (throughput or delay), the optimal
methods can lead to the same result. Second, when Ï†1 = 0 and thus Ï†
j+1
1 = 0, âˆ€j,
P-IEEE has the same results as IEEE 802.11 MAC. It is expected because when
the factor becomes zero, it means that P t1,j = 1, âˆ€j, and no p-persistent ï¬ltering
is carried out. In the special case, P-IEEE exactly reverts to the IEEE 802.11
MAC that provides no ï¬ltering when its back-oï¬€ counter reaches zero. Third,
the simulation results are very close to the theoretical ones. This indicates that
our model can provide very good accuracy of the performance evaluation.
5.2 Multiple Classes Case
In the case study, we let the number of priority classes be 3, and in addition to the
optimal methods, we also consider the approximation derived from (17). With
these, we investigate the impact of the number of nodes in each priority class on
the weighted fairness, and perform 18 diï¬€erent simulation experiments to verify
the corresponding theoretical results. Each of these experiments is carried out
using a diï¬€erent set of (n1;n2;n3), where ni denotes the number of nodes in
priority class i with n1 = 2, 5, 10, n2 = 5, 10 and n3 = 5, 10, 20, and will be
referred to as experiment 1 to 18. All these experiments are carried out with
Ïˆ1 = 1, Ïˆ2 = 0.5 and Ïˆ3 = 0.1, which reasonably represents other possible
setting of Ïˆ.
In addition to the above, we conduct these experiments with two diï¬€erent
fairness metrics to quantitatively evaluate these MACs. The ï¬rst metric is the
direct ratio between the performance metrics from these classes. More precisely,
we consider the throughput ratio as SiSj (where Si denotes the throughput of
class i), and the delay ratio as DiDj (where Di denotes the frame delay of class
i). The second metric is the so-called fairness index in [4]. In this metric, Sf
denotes the throughput of traï¬ƒc ï¬‚ow f , and Ïˆf denotes the associated weight.
The throughput fairness index, Fs, is then deï¬ned as
Fs =
Î¼(Sf/Ïˆf )
Î¼(Sf/Ïˆf ) + Î±(Sf/Ïˆf )
(20)
where Î¼ and Î± denote, respectively, the mean and the standard deviation of
Sf/Ïˆf over all the active data traï¬ƒc ï¬‚ows. Similarly, by replacing Sf with the
delay of traï¬ƒc ï¬‚ow f (i.e., Df ), the delay fairness index can be also obtained
with equation (20).
Figure 4(a) shows the throughput results, with lines denoting the theoryâ€™s
and symbols denoting the simulationâ€™s. From this ï¬gure, we have three points
of observation. First, the simulation results well match those of theory. This
indicates that our analysis can correctly evaluate these methods. Second, the
approximations have their throughputs very close to those of the optimal meth-
ods. The observation suggests that we can use these approximations to obtain
nearly the same optimal throughputs with lower computational costs. Third, the
