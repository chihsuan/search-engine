 
ä¸­ æ–‡ æ‘˜ è¦ ï¼š æœ¬è¨ˆç•«ä¹‹ç ”ç©¶ç›®çš„ç‚ºé€²è¡ŒåŸºé‡‘çµ„åˆä¹‹æŠ•è³‡ç­–ç•¥é æ¸¬ï¼Œè—‰æ­¤ç­–
ç•¥å¯å¹«åŠ©æŠ•è³‡äººå¢åŠ æŠ•è³‡å ±é…¬ç‡åŠæ¸›å°‘æŠ•è³‡æ™‚çš„é¢¨éšªã€‚æˆ‘å€‘
ä½¿ç”¨åŸºå› è¦åŠƒæ³•æå‡ºå…©å€‹æ¨¡å‹ã€‚ç¬¬ä¸€å€‹äº¤æ˜“æ¨¡å‹ä½¿ç”¨ç´¢ä¸è«¾
æ¯”ç‡ä¾†é¸å–åŸºé‡‘ï¼Œä¸¦ä¸”å¹³å‡åˆ†é…è³‡é‡‘è‡³è¢«é¸å–çš„åŸºé‡‘ä»¥å¢åŠ 
æŠ•è³‡å ±é…¬ç‡ï¼Œæ­¤æ¨¡å‹åœ¨å¯¦é©—ä¸­æœ‰æ¯”è¼ƒå¥½çš„å¹´åŒ–å ±é…¬ç‡ã€‚ç¬¬äºŒ
å€‹äº¤æ˜“æ¨¡å‹åŒæ¨£ä½¿ç”¨ç´¢ä¸è«¾æ¯”ç‡ä¾†é¸å–åŸºé‡‘ï¼Œä½†æ”¹ä»¥å¹³å‡æ•¸
è®Šç•°æ•¸æ¨¡å‹ç‚ºåŸºç¤ï¼Œåˆ†é…è³‡é‡‘è‡³è¢«é¸å–çš„åŸºé‡‘ä»¥é™ä½é¢¨éšªã€‚
èˆ‡æ–‡ç»çµæœæ¯”è¼ƒï¼Œé€™å…©å€‹æ¨¡å‹éƒ½æœ‰è¼ƒä½³ä¹‹å ±é…¬ç‡ã€‚æ­¤å¤–æˆ‘å€‘
ä¹Ÿæå‡ºäº†ä½¿ç”¨åŸºå› è¦åŠƒæ³•ä¾†äº¤æ˜“å°ç£åŠ æ¬ŠæŒ‡æ•¸ä¹‹æ¨¡å‹ï¼Œåœ¨å¤§
å¤šæ•¸æƒ…å½¢ä¸‹å¯ä»¥ç²åˆ©ï¼Œä½†èˆ‡æ–‡ç»çµæœæ¯”è¼ƒï¼Œå› åªäº¤æ˜“æ–¼å°ç£
åŠ æ¬ŠæŒ‡æ•¸ï¼Œå ±é…¬ç‡è¼ƒæŠ•è³‡åœ¨å…·æœ‰ç²åˆ©èƒ½åŠ›å¤šç­†åŸºé‡‘çš„æ¨¡å‹
ä½ï¼Œä½†ä»èƒ½å¤ ç²åˆ©ã€‚ç”±ä¸Šè¿°çµæœå¯çŸ¥ï¼ŒåŸºå› è¦åŠƒæ³•æ‰€æ¼”åŒ–å‡º
çš„äº¤æ˜“ç­–ç•¥é©åˆä½¿ç”¨æ–¼ç¬æ¯è¬è®Šçš„äº¤æ˜“å¸‚å ´ã€‚æœ¬è¨ˆç•«æ‰€æå‡º
ä¹‹äºŒé …ä¸»è¦ç ”ç©¶æˆæœï¼Œå·²åˆ†åˆ¥ç™¼è¡¨æ–¼ç ”è¨æœƒã€‚ 
ä¸­æ–‡é—œéµè©ï¼š æŠ•è³‡çµ„åˆã€é¢¨éšªã€åŸºå› è¦åŠƒæ³•ã€å ±é…¬ç‡ã€ç´¢ä¸è«¾æ¯”ç‡ã€å¹³å‡
æ•¸è®Šç•°æ•¸æ¨¡å‹ 
è‹± æ–‡ æ‘˜ è¦ ï¼š The aim of this project is to find the profitable 
trading strategies of mutual fund. The strategies can 
help investors to earn return and to reduce risk in 
the investment. We first propose two trading models 
based on the genetic programming (GP). The first 
trading model utilizes the Sortino ratio to select 
funds, and it allocates capital uniformly to the 
selected funds to increase return. The model earns 
the higher annualized return in our experiment. The 
second trading model also utilizes the Sortino ratio 
to select funds, but it allocates capital with the 
mean-variance model to selected funds to diversify 
the risk. Comparing with the previous researches, 
these two models get better returns than previous 
models. Besides, we also propose a model which 
utilizes GP to trade TIAEX (Taiwan Stock Exchange 
Capitalization Weighted Stock Index), and it can earn 
return in most scenarios. However, comparing with the 
previous researches, the model only trades on TAIEX, 
hence the return of the model is inferior to the 
return of the models which trade on many profitable 
funds. But our model still can earn return. From 
these results, we obtain a conclusion that the 
trading strategies evolved by GP may be suitable for 
- 1 - 
ä¸€ã€å‰è¨€èˆ‡ç ”ç©¶ç›®çš„ 
é‡‘èå¸‚å ´ç›¸ç•¶è¤‡é›œä¸”å……æ»¿äº†ä¸ç¢ºå®šæ€§ï¼ŒæŠ•è³‡äººåœ¨æ™®éæ¬ ç¼ºå®Œå‚™çŸ¥è­˜ä»¥åŠè³‡è¨Šçš„ä¸å°ç¨±
æˆ–ä¸é€æ˜çš„æƒ…æ³ä¸‹ï¼Œæƒ³è¦è—‰ç”±æŠ•è³‡ç²åˆ©ä¸¦éæ˜“äº‹ã€‚å¸‚å ´æœƒè¢«è¨±å¤šå¤–åœ¨çš„å› ç´ æ‰€å½±éŸ¿ï¼Œä¾‹å¦‚: 
åœ‹éš›é‡‘èå¸‚å ´çš„äº’å‹•ã€æ”¿æ²»å› ç´ ã€æˆ–è€…æ˜¯äººç‚ºæ“æ§â€¦ç­‰ã€‚ç”±æ–¼åŸºé‡‘çš„æŠ•è³‡æ¨™çš„èˆ‡æŠ•è³‡å¸‚å ´
ç›¸ç•¶çš„å¤šå…ƒåŒ–ï¼ŒæŠ•è³‡äººåœ¨æ²’æœ‰è¶³å¤ çš„çŸ¥è­˜å’Œè³‡è¨Šä¹‹ä¸‹é›£ä»¥ç²åˆ©ç”šè‡³æ–¼è™§æã€‚å› æ­¤åœ¨é€²è¡ŒæŠ•
è³‡æ™‚ï¼Œç ”ç©¶å¦‚ä½•åœ¨è¿½æ±‚æœ€å¤§åˆ©ç›Šçš„åŒæ™‚äº¦é ˆè€ƒæ…®å¯èƒ½çš„é¢¨éšªï¼Œä¸¦è¨­æ³•é¿å…éåº¦èºé€²è€Œé€ æˆ
ç„¡æ³•å½Œè£œçš„å‚·å®³ã€‚ 
 
 ç‚ºäº†å¾—çŸ¥åŸºé‡‘æˆ–è‚¡ç¥¨åƒ¹æ ¼çš„è®Šå‹•ï¼Œæœ‰äº›ç ”ç©¶ [Huan05, Ince08, Leu10] ä½¿ç”¨æ­·å²è³‡æ–™åŠ 
ä¸Šä½¿ç”¨äººå·¥æ™ºæ…§å’Œæ™‚é–“åºåˆ—æ–¹æ³•ï¼Œä»¥æ‰¾åˆ°ç²¾ç¢ºçš„æ–¹æ³•ä¾†é æ¸¬è‚¡å¸‚çš„æ³¢å‹•ã€‚æ›´é€²ä¸€æ­¥ï¼Œæœ‰äº›
ç ”ç©¶è©¦è‘—å»æ¼”åŒ–äº¤æ˜“ç­–ç•¥ä¾†æ±ºå®šè²·è³£æ™‚æ©Ÿé»ã€‚ä½¿ç”¨åœ¨è‚¡å¸‚é æ¸¬çš„å·¥å…·åŒ…å«æ”¯æŒå‘é‡è¿´æ­¸ 
(support vector regression, SVR) [Ince08] ã€æ”¯æŒå‘é‡æ©Ÿ (support vector machine, SVM) 
[Chiu09, Chou08, Huan05, Powe08]ã€åŸºå› æ¼”ç®—æ³• (genetic algorithm, GA)[Blan08, Chan09, 
Chen09, Chiu09, Chou08, Hass07, Kwon07, Tsai10, Tsai11]ã€åŸºå› è¦åŠƒæ³• (genetic programming, 
GP) [Potv04, Zhan06]ã€äººå·¥ç¥ç¶“ç¶²è·¯ (artificial neural network, ANN) [Hass07, Ince08, 
Kwon07, Leu10, Tsai10, Yu10, Powe08, Tsai10]ã€‚é€™äº›ç ”ç©¶çš„ç›®æ¨™æ˜¯ç‚ºäº†æ”¹å–„é æ¸¬è‚¡ç¥¨æ³¢å‹•çš„
æº–ç¢ºåº¦ã€‚åœ¨é€™äº›ç ”ç©¶ç•¶ä¸­ï¼Œå¯ä¾è©•ä¼°æ¨™æº–åˆ†æˆä¸‰å€‹ç¨®é¡ã€‚ç¬¬ä¸€ç¨®æ˜¯å»é æ¸¬è‚¡ç¥¨å¸‚å ´è¶¨å‹¢ä¸Š
æ¼²æˆ–ä¸‹è·Œçš„æº–ç¢ºç‡ [Chiu09, Chou08, Huan05 ]ã€‚ç¬¬äºŒç¨®æ˜¯è¨ˆç®—é æ¸¬çš„è‚¡å¸‚åƒ¹æ ¼èˆ‡å¯¦éš›ä¸Šè‚¡å¸‚
åƒ¹æ ¼çš„å·®è·ï¼Œæœ€å¸¸ä½¿ç”¨çš„è©•ä¼°æ–¹å¼æ˜¯å‡æ–¹æ ¹èª¤å·® (root mean square error, RMSE) ä»¥åŠå¹³å‡
çµ•å°ç™¾åˆ†æ¯”èª¤å·® (mean absolute percentage error, MAPE) [Boya10, Hass07, Ince08, Leu10, 
Yu10]ã€‚ç¬¬ä¸‰ç¨®æ˜¯æ‡‰ç”¨æ©Ÿå™¨å­¸ç¿’çš„æŠ€è¡“ç”¨æ–¼å¾æ­·å²è³‡æ–™ä¸­æ¢å‹˜äº¤æ˜“ç­–ç•¥ï¼Œä¸¦åˆ©ç”¨é€™äº›äº¤æ˜“ç­–
ç•¥äº¤æ˜“è‚¡ç¥¨ç®—å‡ºå…¶å ±é…¬ç‡ï¼Œé€šå¸¸éƒ½è·Ÿ buy-and-holdäº¤æ˜“ç­–ç•¥æ¯”è¼ƒã€‚[Blan08, Chan09, Chen09, 
Potv04]ã€‚ 
 
 ç„¶è€Œåœ¨é€™äº›ç ”ç©¶ä¸­ï¼Œåªæœ‰è€ƒæ…®é æ¸¬çš„æº–ç¢ºåº¦æˆ–æ˜¯äº¤æ˜“ç­–ç•¥çš„å ±é…¬ç‡ï¼Œå°æ–¼æŠ•è³‡æ™‚çš„é¢¨
éšªä¸¦æ²’æœ‰å¤šåŠ è‘—å¢¨ï¼Œåœ¨å¯¦éš›æ‡‰ç”¨æ–¼é‡‘èå¸‚å ´äº¤æ˜“æ™‚ï¼Œä»æœ‰ä¸è¶³ä¹‹è™•ã€‚æ ¹æ“šæŠ•è³‡ç†è«–åˆ†æï¼Œ
å¼•èµ·é‡‘èå¸‚å ´æ³¢å‹•çš„ä¸»è¦é¢¨éšªä¾†æºæœ‰å…©ç¨®ï¼Œä¸€ç‚ºã€Œç³»çµ±é¢¨éšªã€ï¼ˆsystematic riskï¼‰ï¼ŒäºŒç‚ºã€Œé
ç³»çµ±é¢¨éšªã€ï¼ˆunsystematic riskï¼‰[Elto06, Fund00]ã€‚å‡è¨­æŠ•è³‡äººåªæŠ•è³‡ä¸€ç¨®è³‡ç”¢ï¼Œä¸”å…¶å ±é…¬ç‡
çš„æ¨™æº–å·®éå¸¸å¤§ï¼Œä»£è¡¨æŠ•è³‡äººæ‰¿å—çš„é¢¨éšªç›¸ç•¶é«˜ï¼›è€Œç•¶æŠ•è³‡çš„è³‡ç”¢æ•¸é‡å¢åŠ ï¼ŒæŠ•è³‡çµ„åˆå ±
é…¬ç‡çš„æ¨™æº–å·®ï¼ˆé¢¨éšªï¼‰ä¾¿æœƒé€æ­¥é™ä½ã€‚è€Œç•¶è­‰åˆ¸æ•¸é‡å¢åŠ è‡³ç„¡çª®å¤§æ™‚ï¼Œä»æœ‰ä¸€éƒ¨ä»½çš„é¢¨éšª
ç„¡æ³•é¿å…ï¼Œé€™éƒ¨ä»½å°±ç¨±ç‚ºã€Œç³»çµ±é¢¨éšªã€ã€‚æ‰€ä»¥ï¼Œç”±æ–¼æŠ•è³‡è³‡ç”¢æ•¸é‡å¢åŠ è€Œæ¸›å°‘çš„é¢¨éšªå‰‡ç¨±ç‚º
ã€Œéç³»çµ±é¢¨éšªã€ã€‚ 
 
æœ¬è¨ˆç•«çš„å…©é …ç ”ç©¶æˆæœï¼Œå·²æ–¼åœ‹å…§ç ”è¨æœƒç™¼è¡¨ã€‚èŒ²ç°¡è¦èªªæ˜å¦‚ä¸‹ï¼š 
1. ç´¢ä¸è«¾æ¯”ç‡èˆ‡å¹³å‡æ•¸è®Šç•°æ•¸æ¨¡å‹çš„å…±åŒåŸºé‡‘æŠ•è³‡ä¹‹åŸºå› è¦åŠƒæ³•ï¼šä½¿ç”¨ç´¢ä¸…è«¾æ¯”ç‡
(Sortino ration)è¨ˆç®—åŸºé‡‘çš„ç¸¾æ•ˆä»¥é¸å‡ºæŠ•è³‡æ¨™çš„ï¼Œä½¿ç”¨å¹³å‡åˆ†é…ã€å¹³å‡æ•¸è®Šç•°æ•¸æ¨¡
- 3 - 
çµæœã€‚ 
 
 
 
åœ– 1ç´¢ä¸è«¾æ¯”ç‡èˆ‡å¹³å‡æ•¸è®Šç•°æ•¸æ¨¡å‹çš„å…±åŒåŸºé‡‘æŠ•è³‡ä¹‹åŸºå› è¦åŠƒæ³•ã€‚ 
 
 
- 5 - 
 
è¡¨ 1 ä¸åŒæ¨¡å‹æ–¼ 2004å¹´ 1æœˆ 1æ—¥è‡³ 2008å¹´ 12æœˆ 31æ—¥ç¸¾æ•ˆæ¯”è¼ƒã€‚ROIcumç‚ºç´¯ç©å ±é…¬ç‡ï¼Œ
ARcumç‚ºå¹´åŒ–å ±é…¬ç‡ã€‚ 
Model name ROIcum ARcum 
The 4433 rule -27.50%  -6.23% 
MSCI world price index -11.21% -2.35% 
S&P 500 composite price index -18.51% -4.01% 
Our first model (best strategy,N=20;Î³=70%) 71.18% 11.35% 
Our second model (best strategy,N=20;Î³=70%;Î»=1) 49.32% 8.35% 
Tsaiâ€™s model by GA (constant weight,N=35;Î³=70%) 39.53% 6.89% 
Tsaiâ€™s model by GA (constant weight,N=45;Î³=70%) 37.35% 6.55% 
Tsaiâ€™s model by GA (constant weight,N=55;Î³=70%) 33.78% 5.99% 
 
åœ– 4 åŸºå› è¦åŠƒæ³•ä¹‹å°ç£è‚¡å¸‚äº¤æ˜“é æ¸¬æµç¨‹åœ–ã€‚ 
 
 
- 7 - 
åœ¨æ¯ä»£åŸºå› è¦åŠƒæ³•çš„æ¯å€‹äº¤æ˜“ç­–ç•¥ï¼Œæˆ‘å€‘æŠŠå®ƒå¥—ç”¨åœ¨å·²æ‰¾å‡ºçš„ä¸‰å€‹å·²å»¶ä¼¸çš„è¨“ç·´æœŸ
é–“ï¼Œä¸”æ¯ä¸€å€‹ç­–ç•¥è¨ˆç®—å‡ºä¸‰å€‹ç´¯ç©å ±é…¬ç‡ï¼Œä»¥åŠç´¯ç©å ±é…¬ç‡çš„å¹³å‡å€¼èˆ‡æ¨™æº–å·®ã€‚è€Œæˆ‘å€‘è¨­
å®šåŸºå› è¦åŠƒæ³•çš„é©æ‡‰å‡½æ•¸ï¼Œæ˜¯æœ€å¤§åŒ–ç´¯ç©å ±é…¬ç‡çš„å¹³å‡å€¼é™¤ä»¥å…¶æ¨™æº–å·®ï¼Œä»¥å¾—åˆ°æœ€èƒ½å¤ ç©©
å®šç²åˆ©çš„äº¤æ˜“ç­–ç•¥ã€‚åœ¨æ¼”åŒ–çµæŸå¾Œï¼Œå¯ä»¥ç²å¾—ä¸€å€‹åœ¨æ­·å²è³‡æ–™ä¸­å…·æœ‰ç©©å®šä¸”å¯ç²åˆ©çš„äº¤æ˜“
ç­–ç•¥ï¼Œä¹‹å¾ŒæŠŠé€™å€‹äº¤æ˜“ç­–ç•¥æ‡‰ç”¨åœ¨æ¸¬è©¦æœŸé–“ã€‚ 
  
 æˆ‘å€‘çš„äº¤æ˜“è³‡æ–™ç‚ºå°ç£åŠ æ¬ŠæŒ‡æ•¸ (Taiwan Stock Exchange Capitalization Weighted Stock 
Index, TAIEX)ï¼Œä»¥æ”¶ç›¤åƒ¹è¨ˆç®—ç´¯ç©å ±é…¬ç‡ã€‚äº¤æ˜“æœŸé–“å¾ 2000å¹´ 9 æœˆ 14æ—¥åˆ° 2010å¹´ 5 æœˆ
21æ—¥ã€‚æ­¤å€é–“èµ·å§‹é»èˆ‡çµæŸé»æ”¶ç›¤åƒ¹ç›¸è¿‘ï¼Œä¸”å…¶ä¸­åŒ…å«ç‰›å¸‚ã€ç†Šå¸‚ã€ä»¥åŠç›¤æ•´çš„åƒ¹æ ¼è®ŠåŒ–ã€‚
æˆ‘å€‘å‡è¨­æ¯æ¬¡äº¤æ˜“æ‰‹çºŒè²»ç‚º 0.6%ï¼Œä¸”ä¸å¯æ”¾ç©ºã€‚ 
 
 åœ¨æˆ‘å€‘çš„ç ”ç©¶ä¸­ï¼Œä½¿ç”¨å…©é¡†ç®—æ•¸è¡“æ¨¹ä»¥åŠè¡¨ 2 ä¹‹ç‰¹å¾µé›†åˆï¼Œé…åˆä½¿ç”¨æ­·å²è³‡æ–™æ‰¾å‡ºç›¸
ä¼¼çš„è¨“ç·´æœŸé–“ã€‚æˆ‘å€‘ä½¿ç”¨åŸºå› è¦åŠƒæ³•é…åˆä¸åŒçš„è¨“ç·´å¤©æ•¸ä¾†è¨“ç·´äº¤æ˜“ç­–ç•¥ï¼ŒåŒ…å« 90ã€180ã€
270ã€365ã€455ã€545ã€635ã€730 å¤©ï¼›è€Œæ¸¬è©¦å¤©æ•¸å‰‡åˆ†åˆ¥æœ‰ 90ã€180ã€365 å¤©ï¼Œå› æ­¤åœ¨æ¯å€‹
å¯¦é©—æœƒæœ‰ 24å€‹çµæœã€‚è¡¨ 3æ˜¯æ­¤å¯¦é©—ä¹‹ç´¯ç©å ±é…¬ç‡ï¼Œå¯çŸ¥å¤§éƒ¨åˆ†çš„æƒ…å½¢ä¸‹å¯ç²åˆ©ã€‚ç•¶è¨“ç·´å¤©
æ•¸ç‚º 730 å¤©ä¸”æ¸¬è©¦å¤©æ•¸ç‚º 365 å¤©æ™‚ï¼Œæˆ‘å€‘å¾—åˆ°æœ€é«˜çš„ç´¯ç©å ±é…¬ç‡ç‚º 165.30%ï¼Œæ¯”èµ·ä½¿ç”¨
buy-and-holdç­–ç•¥ç´¯ç©å ±é…¬ç‡ 1.19%é«˜å‡ºè¨±å¤šã€‚(è¨»ï¼šç ”è¨æœƒè«–æ–‡ç™¼è¡¨å¾Œï¼Œæˆ‘å€‘æœ‰é‡åšå¯¦é©—ï¼Œ
æ•…è¡¨ 3èˆ‡ç ”è¨æœƒè«–æ–‡ç¨æœ‰ä¸åŒ) 
 
è¡¨ 3ï¼š2000å¹´ 9æœˆ 14æ—¥è‡³ 2010å¹´ 5æœˆ 21æ—¥ä¹‹ç´¯ç©å ±é…¬ç‡ã€‚ 
Training 
period 
Testing period=90 Testing period=180 Testing period=365 
Mean Stdev. Mean Stdev. Mean Stdev. 
90 37.63% 26.44% 46.55% 34.45% 68.08% 38.77% 
180 96.95% 36.20% 80.15% 61.11% 48.35% 54.97% 
270 -0.84% 19.20% 28.54% 25.36% 121.21% 46.32% 
365 17.10% 24.01% 19.84% 39.37% 100.35% 41.38% 
455 43.63% 32.34% 13.21% 29.76% 96.11% 44.95% 
545 2.49% 17.20% 57.58% 52.00% 114.66% 48.59% 
635 97.72% 38.31% 88.64% 51.75% 151.29% 50.35% 
730 5.60% 14.66% 51.88% 36.05% 165.30% 46.94% 
Mean 37.54% 26.05% 48.30% 41.23% 108.17% 46.53% 
Stdev. 40.23% 8.88% 27.19% 12.43% 39.15% 5.07% 
 
æˆ‘å€‘é‚„å°‡æ­¤æ¨¡å‹èˆ‡ Tsai[Tsai11]çš„æ¨¡å‹æ¯”è¼ƒï¼Œçµæœå¦‚è¡¨ 4ã€‚å¾è¡¨ 4ä¸­ï¼Œå¯çŸ¥é›–ç„¶æœ¬è«–æ–‡
ä¹‹å ±é…¬ç‡è¼ƒä½ï¼Œå…¶åŸå› æ˜¯ Tsaiçš„æ¨¡å‹æ˜¯å¾å¤šç­†åŸºé‡‘ç•¶ä¸­ï¼Œé¸å‡ºæœ‰ç²åˆ©æ½›åŠ›çš„åŸºé‡‘ä¾†æŠ•è³‡ï¼Œ
è€Œæœ¬è«–æ–‡ä¹‹æ¨¡å‹åªæœ‰æŠ•è³‡åœ¨å°ç£åŠ æ¬ŠæŒ‡æ•¸ä¸Šï¼Œå› æ­¤æœ¬æ¨¡å‹æ–¼æŠ•è³‡åœ¨å¤šç­†è‚¡ç¥¨æ™‚ä»å…·æœ‰å¤§é‡
ç²åˆ©çš„æ½›åŠ›ã€‚ 
è¡¨ 4 èˆ‡ Tsaiæ¨¡å‹ä¹‹æ¯”è¼ƒã€‚ 
 Tsaiâ€™s model on GA  
(constant weights, N=45, Î³=70%) 
Our model on the GP 
(training period=730, testing period 
=365) 
Year ROI ROIcum ARcum ROI ROIcum ARcum 
- 9 - 
6 [Chiu09] D. Y. Chiu and P. J. Chen, â€œDynamically exploring internal mechanism of stock 
market by fuzzy-based support vector machines with high dimension input space and genetic 
algorithm,â€ Expert Systems with Applications, Vol. 36, pp. 1240â€“1248, 2009. 
7 [Chou08] R. Choudhry and K. Garg, â€œA hybrid machine learning system for stock machine 
market forecasting,â€ Proc. of World Academy of Science, Engineering and Technology, Vol. 
39, pp. 315â€“318, Mar. 2008. 
8 [Elto06] E. J. Elton, M. J. Gruber, S. J. Brown and W. N. Goetzmann, Modern Portfolio 
Theory and Investment Analysis, Wiley, 2006. 
9 [Fund00] FundDJ Co., Ltd., â€œFundDJ.â€ http://www.funddj.com/. 
10 [Hass07] M. R. Hassan, B. Nath, and M. Kirley, â€œA fusion model of HMM, ANN and GA 
for stock market forecasting,â€ Expert System with Application, Vol. 33, pp. 171â€“180, 2007. 
11 [Holl75] J. H. Holland, Adaptation in natural and artificial systems: an introduction analysis 
with applications to biology, control, and artificial intelligence. University of Michigan Press, 
1975. 
12 [Huan05] W. Huang, Y. Nakamori, and S. Y. Wang, â€œForecasting stock market movement 
direction with support vector machine,â€ Computers & Operations Research, Vol. 32, pp. 
2513â€“2522, 2005. 
13 [Ince08] H. Ince and T. B. Trafalis, â€œShort term forecasting with support vector machines 
and application to stock price prediction,â€ International Journal of General Systems, Vol. 37, 
pp. 677â€“687, 2008. 
14 [Jhou11] S.M. Jhou,, C.B. Yang and H.H. Chen, "Taiwan Stock Forecasting with the Genetic 
Programming," Proc. of the 16th Conference on Artificial Intelligence and Applications, 
Taoyuan, Taiwan, Nov. 11-13, 2011. 
15 [Kwon07] K. Kwon and B. R. Moon, â€œA hybrid neurogenetic approach for stock 
forecasting,â€ IEEE Transactions on Neural Networks, Vol. 18(3), pp. 851â€“864, 2007. 
16 [Leu10] Y. Leu, C. P. Lee, and C. C. Hung, â€œA fuzzy time series-based neural network 
approach to option price forecasting,â€ the 2nd Asian Conference on Intelligent Information 
and Database Systems, Vol. 5990, pp. 360â€“369, 2010. 
17 [Potv04] J.-Y. Potvin, P. Soriano, and M. Vallee, â€œGenerating trading rules on the stock 
markets with genetic programming,â€ Computers & Operations Research, Vol. 31, pp. 
1033â€“1047, 2004. 
18 [Powe08] N. Powell, S. Y. Foo, and M. Weatherspoon, â€œSupervised and unsupervised 
methods for stock trend forecasting,â€ Proc. the 40th Southeastern Symposium on System 
Theory, New Orleans, LA, USA, Mar. 2008. 
19 Taiwan Economic Journal Co., Ltd, â€œTEJ.â€ http://www.tej.com.tw/twsite/Default.aspx, 1991. 
20 [Tsai10] C. F. Tsai and Y. C. Hsiao, â€œCombining multiple feature selection methods for 
stock prediction: Union, intersection, and multi-intersection approaches,â€ Decision Support 
Systems, Vol. 50, pp. 258â€“269, 2010. 
21 [Tsai11] T. J. Tsai, C. B. Yang, and Y. H. Peng, â€œGenetic algorithms for the investment of 
the mutual fund with global trend indicator,â€ Expert Systems with Applications, Vol. 38(3), 
pp. 1697â€“1701, 2011. 
Genetic Programming for the Investment of the Mutual Fund with Sortino Ratio
and Mean Variance Modelâˆ—
Hung-Hsin Chen, Chang-Biau Yangâ€  and Yung-Hsing Peng
Department of Computer Science and Engineering
National Sun Yat-sen University
Kaohsiung 80424, Taiwan
Abstractâ€”In this paper, we propose two genetic-
programming-based models that improve the trading strat-
egy for mutual funds. These two models can get better
returns and reduce risks. The first model increases the return
by selecting funds with high Sortino ratios and allocates the
capital equally, achieving the best annualized return. The
second model also selects funds with high Sortino ratios,
but reduces the risk by allocating the capital with the mean
variance model.
Most importantly, our model utilizes the genetic program-
ming to generate feasible trading signals to gain return,
which is suitable for the market that changes anytime. To
verify our model, we simulate the investment for mutual
funds from January 1999 to December 2009 (11 years in
total). The experimental results show that our first model can
gain return from 2004/1/1 to 2008/12/31, achieving the best
annualized return 9.11%, which is better than the annualized
return 6.89% of the previous approach. In addition, our
second model with smaller downside volatility can achieve
almost the same return as previous results.
Keywords-fund; global trend indicator; monitoring indica-
tor; Sortino ratio; genetic programming; annualized return.
I. INTRODUCTION
More and more investors are interested in investing
financial products such as stocks, futures and mutual
funds in recent years. However, the financial market is
so complex with nonstationary and chaotic data series,
thus it is full of risks. It is hard for investors who lack
comprehensive investment information to get return in the
market.
To get good return in the financial market, many re-
searchers have applied artificial intelligence techniques
and soft computing methods such as support vector re-
gression (SVR) [4], [16], support vector machine (SVM)
[3], [11], [4], genetic algorithm (GA) [5], [15], genetic
programming (GP) [12], artificial neural network (ANN)
[5], [6] and so on to prediction of trends or values of the
market. By using these methods, one may can extract the
rules or patterns hidden in the market.
In this paper, we confine our investment to mutual
funds. A fund pools money from many investors, and then
it invests the money in stocks, bonds, securities, assets,
or some combination of these investments. Investors can
reduce the loss risk by investing their money in a wide
âˆ—This research work was partially supported by the National Science
Council of Taiwan under contract NSC99-2221-E-110-048.
â€ Corresponding author: cbyang@cse.nsysu.edu.tw
variety of funds, or by choosing the appropriate timing to
sell or buy the shares of these funds.
In this paper, we desire to study how to find the best
portfolio for each period, and how to allocate the capital
to the portfolio until the best timing to sell. First, we
measure the Sortino ratio [14] of each fund and choose
the funds with higher Sortino ratio as our portfolio. The
Sortino ratio, which only penalizes the returns that are
negative or below a user-defined target, is a modification
of the Sharpe ratio [13]. The Sortino ratio is better than
the Sharpe ratio as a measure of portfolio risk when the
distribution of excess returns is skewed [1]. Second, we
use the mean-variance model [9] to decide how to allocate
the capital to funds, by which we can reduce the risks as
much as possible. Third, we use historical data series to
decide when to redeem our portfolio.
Tsai et al. [15] Proposed the global trend indicator
(GTI) to evaluate the trend of mutual funds, and then
they applied the genetic algorithm to select funds. Their
return performance is better than the buy-and-hold method
and the 4433 rule. In this paper, we propose two models
that utilize genetic programming to generate effective
trading signals. With these trading signals, the first model
increases the annualized return by selecting funds with
high Sortino ratios and allocates the capital equally. To
reduce the risk, we devise the second model, which also
selects funds with high Sortino ratios, but allocates the
capital with the mean variance model.
The first proposed model gets better returns than Tsaiâ€™s
results. The second proposed model can achieve almost
the same return as Tsaiâ€™s results with a lower risk.
The rest of this paper is organized as follows. In Section
II, we will present some background knowledge of this
paper, including Sortino ratio, mean variance model and
genetic programming. In Section III, we will propose
our two models, both of which improve Tsaiâ€™s result by
adopting effective trading signals generated by genetic
programming. In Section IV, we will show some bench-
marks, and present the experimental results of our two
models. Finally, the conclusion of this paper will be given
in Section V.
II. PRELIMINARIES
In this section, we will give an introduction to portfolio
theory, mean variance model, Sortino ratio, and genetic
programming, which serve as the background knowledge
and will be used in the following sections.
selling the portfolio, we refer to the signals generated by
genetic programming.
A. The Flow Chart of Investment
The flow chart of our investment is shown in Figure
1. In each trading period (here we adopt one week), we
check whether the fund market is open or not by check-
ing the function isMarketOpen(t) [15]. The function
isMarketOpen(t) returns â€œtrueâ€ if the number of tradable
funds at time t is greater than 10% of all funds issued
before time t. Otherwise, this function returns â€œfalseâ€. If
isMarketOpen(t) returns â€œtrueâ€, we will derive a trading
rule (by GP) that generates signals for deciding the tim-
ing of buying, holding, or selling. If isMarketOpen(t)
returns â€œfalseâ€ and the trading period is one week, we will
trade at time tb, where tb is the nearest day before t that
isMarketOpen(tb) returns â€œtrueâ€.
In bull market, we buy or hold the funds. Before
investing, the rank of funds are determined by the Sortino
ratio. Then, according to the rank of funds, inferior funds
that are held in our portfolio will be replaced by superior
funds. In bear market, all the funds in our portfolio will
be redeemed.
B. Selecting Funds with the Sortino ratio
In this paper, we set the RMAR in Equation 3 to zero,
which means that we only consider the negative return as
the risk of investment.
If we decide to purchase funds at date t and there is no
fund in our portfolio, then the top fn funds in the last tp
months (ranked by the Sortino ratio) are selected.
Assume there are some funds already in our portfolio F
and the ranks of their Sortino ratios are from 1 to |F | in
the beginning. We define a redeeming threshold, denoted
as Î³, for replacing inferior funds. Our portfolio is updated
by the following steps.
1) Set the initial trading date to t. Rank the Sortino
ratios for all funds in the last tp months before t.
2) Redeem the holding funds (if any) whose ranks fall
outside the top Î³ Ã— |F |, and replace them by better
funds which do not exist in our portfolio. Note that
if the new funds get negative returns in the last tp
months, these funds are not chosen.
3) If t is the date for the end of investment, then go to
Step 4. Otherwise, set t = t + 7 (one day) and go
to Step 2.
4) Report the results.
C. Allocating the Capital with the Mean Variance Model
To allocate our capital with the MV model, we assume
that there are some funds in our portfolio, and that the
returns of funds in the market will be reflected by their
historical price series.
Assuming that the Î» = 1.0, we solve Equation 1 to get
the best weights of capital of the funds in our portfolio.
The capital is reallocated when some funds are redeemed
and some new funds are added into the portfolio, until the
end of investment.
Market open on date t?
Evaluate each fund according 
to the Sortino ratio
Redeem inferior fund holdings 
and invest in superior funds
Move to next trading period
Check current 
market situation
The timing of buying, holding, 
or selling by the strategy trained 
from GP
Redeem all 
fund holdings
End investing?
yes
buying
yes
selling
no
no
Start investing
Stop
Find the nearest 
date t
b
before t and 
the market is open 
on t
b
Figure 1. The flow chart for investing funds.
D. Determining the Timing with the Genetic Programming
The function set of our method for GP contains the
operators for calculating the trading signals. We involve
the operators â€™>â€™, â€™<â€™, â€™=â€™, â€™â‰¥â€™, â€™â‰¤â€™, â€™andâ€™, â€™orâ€™ here.
In addition, because the transaction fee has great impact
to the return, we put the weekly monitor index (MI) [15] in
our terminal set to avoid over-trading. Assume that we can
buy and sell the global trend indicator (GTI) [15] index,
and the transaction fee is 3% in each transaction.
Our fitness function in GP is to maximize the return of
GTI. Because GTI represents the situation of the market,
we can gain return when the trend of GTI goes up. With
GP, we can first obtain a function that generates trading
signals (true or false) to get the best return of GTI in the
training period. Next, we adopt this function to determine
the action we should take at date t. The action can be
interpreted as follows.
â€¢ buying: If the signal of t is true and the signal of
(t âˆ’ 7) is false, then we select appropriate funds as
our portfolio and allocate the capital to them with our
method.
Table I
THE RETURNS AND AVERAGE OF NEGATIVE RETURNS FOR N = {5, 10, 15, 20}, tp = 6, AND Î³ = 70% IN THE TRAINING PERIOD FROM
1999/1/1 TO 2003/12/31. HERE EQ REPRESENTS THAT THE CAPITAL IS ALLOCATED EQUALLY, MV REPRESENTS THAT THE CAPITAL IS
ALLOCATED WITH THE MV MODEL (Î» = 1.0), ROI REPRESENTS THE RETURN OF INVESTMENT, AND AVGNEG REPRESENTS THE AVERAGE OF
NEGATIVE RETURNS.
year N = 5 10 15 20
ROI AVGNEG ROI AVGNEG ROI AVGNEG ROI AVGNEG
1999 EQ 139.64% -2.64% 116.08% -2.37% 92.50% -1.89% 83.03% -1.80%
1999 MV 291.72% -2.34% 113.66% -1.34% 113.53% -1.34% 113.12% -1.32%
2000 EQ 1.42% -2.76% -8.25% -2.42% -7.31% -2.29% -9.93% -2.57%
2000 MV 14.28% -2.50% 6.44% -2.49% 3.92% -1.98% 2.19% -2.20%
2001 EQ -0.50% -1.88% -0.43% -1.62% -1.69% -1.60% -3.99% -1.49%
2001 MV -4.52% -1.98% -3.03% -0.72% -1.61% -0.70% -5.26% -0.80%
2002 EQ 6.09% -2.56% -2.18% -2.36% -4.37% -2.35% -1.32% -1.96%
2002 MV 12.12% -2.52% -19.98% -1.63% -20.03% -1.60% -15.88% -1.77%
2003 EQ 28.27% -1.57% 18.23% -1.53% 24.23% -1.51% 31.85% -1.44%
2003 MV 34.35% -1.98% 11.32% -1.01% 12.77% -1.07% 15.22% -0.87%
2004 EQ 15.30% -1.56% 11.87% -1.63% 15.23% -1.76% 11.08% -1.64%
2004 MV 17.50% -1.52% 17.47% -1.43% 11.83% -0.96% 11.83% -0.96%
2005 EQ 21.92% -1.68% 27.65% -1.68% 24.96% -1.43% 29.71% -1.63%
2005 MV 11.75% -1.12% 14.26% -1.18% 11.68% -1.71% 14.94% -1.69%
2006 EQ 20.15% -2.76% 15.31% -2.30% 14.01% -2.52% 14.22% -2.30%
2006 MV 25.99% -2.54% 10.55% -2.20% 19.63% -1.93% 14.21% -1.84%
2007 EQ 40.97% -4.11% 39.97% -3.70% 36.91% -3.43% 34.11% -3.26%
2007 MV 42.28% -3.14% 6.24% -2.80% 6.39% -2.66% 10.33% -2.73%
2008 EQ -72.56% -5.75% -68.67% -5.40% -65.79% -5.20% -65.07% -4.81%
2008 MV -70.97% -6.04% -64.88% -5.18% -55.49% -4.02% -46.39% -3.75%
2009 EQ 62.11% -2.27% 62.11% -2.27% 62.11% -2.27% 62.11% -2.27%
2009 MV 62.11% -2.27% 62.11% -2.27% 62.11% -2.27% 62.11% -2.27%
then the trading function generates either a true or false
signal. Otherwise the market situation is considered as
ambiguous, and the current signal remains the same as
the previous signal.
We run the GP 100 times and select the best prof-
itable trading functions in the training period for N =
{5, 10, 15, 20}, tp = 6, and Î³ = 70%. The training results
and testing results of these functions are shown in Table
III.
Most of the trading functions that are generated by GP
can get profits both in the training and testing period,
because GTI index is the average weight index of all funds,
and the funds we selected usually take high percentage of
GTI index. Hence the trading functions which can get high
profit by trading GTI index usualy can get high profit in
trading funds.
The buying and selling rules of the best trading function
generated by GP are shown in Table IV. According to
these results, we know that most profitable trading func-
tions in the training period can also obtain good results in
the testing period, and the value of portfolio is more stable
when the capital is allocated by our MV model, since the
average of negative returns is smaller.
To end this section, we compare the performance of
our models with various models. The results are shown
in Table V, where the period for computing ROIcum
(cumulated ROI) and ARcum (annualized ROI) is from
2004/1/1 to 2008/12/31. One can see that in Table V, our
models outperform other strategies.
Table III
THE RETURNS OF THE BEST PROFITABLE STRATEGIES GENERATED
BY THE GP WITH N = {5, 10, 15, 20}, tp = 6, AND Î³ = 70%. HERE
EQ REPRESENTS THAT THE CAPITAL IS ALLOCATED EQUALLY, MV
MEANS THAT THE CAPITAL IS ALLOCATED WITH THE MV MODEL
(Î» = 1.0). THE TRAINING PERIOD IS FROM 1999/1/1 TO 2003/12/31,
AND THE TESTING PERIOD IS FROM 2004/1/1 TO 2009/12/31.
Model training ROI testing ROI
N = 5 EQ 509.61% 100.33%
N = 5 MV 432.44% 91.89%
N = 10 EQ 315.14% 94.83%
N = 10 MV 140.78% 99.91%
N = 15 EQ 276.59% 106.09%
N = 15 MV 46.55% 99.34%
N = 20 EQ 287.98% 125.68%
N = 20 MV 184.08% 116.72%
Table IV
THE BUYING AND SELLING RULES OF THE BEST PROFITABLE
STRATEGIES GENERATED BY GP IN THE TRAINING PERIOD FROM
1999/1/1 TO 2003/12/31.
buying rule ((MI(t) > 0.8) = (MI(tâˆ’ 7) > 0.7))
> MI(tâˆ’ 7)) â‰¤MI(t)
selling rule MI(tâˆ’ 7) < 0.7
V. CONCLUSION
In this paper, we propose two effective models for
investment. Our models select funds with the Sortino ratio
and determine the timing to buy and sell funds with genetic
programming. Our first model with equally allocated capi-
tal can gain return from 2004/1/1 to 2008/12/31, achieving
the best annualized return 9.11%, which is better than the
Taiwan Stock Forecasting with the Genetic Programmingâˆ—
Siao-Ming Jhou, Chang-Biau Yangâ€  and Hung-Hsin Chen
Department of Computer Science and Engineering
National Sun Yat-sen University
Kaohsiung 80424, Taiwan
Abstractâ€”In this paper, we propose a model for generating
profitable trading strategies for Taiwan stock market. Our
model applies the genetic programming (GP) to obtain prof-
itable and stable trading strategies in the training period, and
then the strategies are applied to trade the stock in the testing
period. The variables for GP include 6 basic information
and 25 technical indicators. We perform five experiments on
Taiwan Stock Exchange Capitalization Weighted Stock Index
(TAIEX) from 2000/9/14 to 2010/5/21. In these experiments,
we find that the trading strategies generated by GP with
two arithmetic trees have more stable returns. In addition,
if we obtain the trading strategies in three historical periods
which are the most similar to the current training period,
we are able to earn higher return in the testing period. In
each experiment, 24 cases are considered. The testing period
is rolling updated with the sliding window scheme. The best
cumulative return 166.57% occurs when 545-day training
period pairs with 365-day testing period, which is much
higher than the buy-and-hold strategy.
Keywords-stock; Taiwan Stock Exchange Capitalization
Weighted Stock Index; genetic programming; annualized
return; feature set.
I. INTRODUCTION
Predicting the fluctuation of the stock market is a
very popular research. Many investors are interested in
investment, but forecasting the movement of the stock
market index is very difficult, because the stock market
is usually affected by many external factors, such as the
interaction of international financial markets, the political
factors, the human operations, etc. Generally, investors
do not have sufficient knowledge and information about
investment so that they cannot gain return easily.
To get the patterns of price fluctuation hidden in the
stock market, some studies [1], [9], [10] investigated
historical data to find a precise solution of the stock market
volatility by using the methods of artificial intelligence
and statistics. Furthermore, some studies tried to generate
trading strategies for deciding the timing of buying and
selling. The methods for forecasting the stock market
fluctuation include support vector regression (SVR) [10],
support vector machine (SVM) [5], [6], [9], [14], genetic
algorithm (GA) [1], [3], [4], [5], [6], [7], [11], [16], [17],
genetic programming (GP) [13], [19], artificial neural
network (NN) [7], [10], [11], [12], [16], [18]. The goal of
these studies is to mine the pattern of the price fluctuation
and to improve the accuracy of predicting the trend of
the stock market. Among these studies, three benchmarks
âˆ—This research work was partially supported by the National Science
Council of Taiwan under contract NSC99-2221-E-110-048.
â€ Corresponding author: cbyang@cse.nsysu.edu.tw
are usually used. The first is to predict whether the trend
of the stock market is raising or falling. [5], [6], [9],
[14], [16]. The second benchmark is the difference of
predicted indices and the real ones. The most commonly
used measurements are root mean squared error (RMSE)
and mean absolute percentage error (MAPE) [2], [7], [10],
[12], [18]. The third benchmark is to apply the machine
learning techniques to mine the trading strategies from
the historical data, and the return got by applying these
strategies to trade one stock is usually compared with the
buy-and-hold strategy [1], [3], [4], [13].
In this paper, our goal is to earn stable return in
Taiwan stock market. The trading strategy is applied to
Taiwan Stock Exchange Capitalization Weighted Stock
Index (TAIEX) in the testing period. The total trading
period is from 2000/9/14 to 2010/5/21, approximately 10
years in total. The best cumulative return 166.57% occurs
when 545-day training period pairs with 365-day testing
period, which is much higher than the return of the buy-
and-hold strategy 1.19%.
The rest of this paper is organized as follows. We will
introduce the genetic programming (GP) in Section II. In
Section III, we will present our method that the trading
strategies are generated by GP. In Section IV, we will
show our experimental results. Finally, in Section V, we
will give the conclusion and some future works.
II. PRELIMINARIES
In this section, we will give an introduction of the
genetic programming, which is the background knowledge
of this paper. The genetic programming (GP), which is
extended from the genetic algorithm (GA), was proposed
by Koza at 1992 [8]. The great advantage of GP is that
it can be applied in varieties of problems with some
constraints. The solutions of these problems generated by
GP are represented as formulas. The representation of
the chromosome of GP is more flexible than GA. The
solutions of GA are string structures with fixed length
which need to be encoded and to be decoded for answer
transformation. The tree structure of GP has dynamic
extensibility. GP can parse the tree structure to get the
corresponding solution. Therefore, GP is more suitable for
searching trading strategies. One trading strategy is usually
produced by predefined functions, constants and variables.
The evolutions in GP are summarized as follows.
1) Initialization: The initial population is composed
of individuals, which are generated randomly. The
structure of an individual is a tree.
Proceedings of the 2011 Conference on Technologies and Applications of Artificial Intelligence (TAAI 2011)
151TAAI 2011, November 11-13, 2011, Chung-Li, Taiwan 
ISBN 978-986-87804-0-8
Search for three historical periods which are the most 
similar to the training period by RMSE measurement.
Find the most profitable trading strategy for the three 
historical periods with GP.
Apply the trading strategy to the testing period.
End
Set the training period and testing period
Yes
Is the sifted testing period over the trading 
period?
Start
No
Figure 2. The flow chart for investing one stock.
Training period
Testing 
period
Training period
Testing 
period
Training period
Testing 
period
t
t+p
t+p
t+p*2
t+p*2
t+p*3
t-n+1
(t+p)-n+1
(t+p*2)-n+1
time line
time line
time line
Figure 3. The training period and the testing period with the sliding
window scheme. Here, n, t, and p represent the length (day) of the
training period, the current date, and the length (day) of the testing period,
respectively.
B. Training Interval Selection from Historical Data
Leu et al. [12] and Yu et al. [18] predict the stock close
price by finding the historical period which is similar to
the training period. In this paper, the training period is
defined to be an interval just before the current testing
period. The lengths of training and testing periods need
not be the same. The historical period is selected from the
interval starting from the very beginning to the day just
before the training period. The goal of historical periods
is to help the model construction of the training period.
In our model, three historical periods which are the most
similar to the current training period are chosen from the
historical data by the measurement of the root mean square
error (RMSE). Here, all data series are formed by the daily
close prices.
The equation of RMSE is given as follows:
RMSE(X1, X2) =
âˆšâˆ‘n
j=1(x1,j âˆ’ x2,j)2
n
, (1)
where X1, X2, x1,j , x2,j , and n represent the data series
of the first period, the data series of the second period,
the jth element of the first period, the jth element of the
second period, and the length of the period, respectively.
After we find the 3 historical periods with the lowest
RMSE values compared to the training period, we extend
these periods. That is, suppose that the lengths of the
training and testing periods are d1 and d2, respectively.
The length of the historical period we search is d1, and
the length of the extended period is d1+d2. Each strategy
generated by GP is used to trade the stock in the 3
extended historical periods, then we can get 3 returns with
their standard deviation. The higher the average return
divided by its standard deviation is, the more stable and
profitable the trading strategy is. After getting the best
trading strategy, we apply it in the testing period.
C. Generating the Trading Strategy with the Genetic Pro-
gramming
To utilize the genetic programming (GP), we have to
define the function nodes and the terminal nodes first.
The function nodes for our method consist of operators
â€™>â€™, â€™<â€™, â€™=â€™, â€™â‰¥â€™, â€™â‰¤â€™, â€™logical andâ€™, â€™logical orâ€™, â€™+â€™, â€™-
â€™, and â€™Ã—â€™. The terminal nodes involve 6 basic information
and 25 technical indicators of one stock, which are open
prices, close prices, highest prices, lowest prices, the
trading volumes, the amount of prices, MTM5, OBV ,
DI , volume5, volume20, RSI5, RSI14, MA10, MA20,
TAPI , PSY 14, WMS5, WMS9, BIAS10, BIAS14,
BIAS20, OSC5, RSV 9, K3, D3, EMA12, EMA26,
DIF , and MACD9. We denote these 31 features as
full features. The constants for the terminal nodes are
the numbers generated randomly between âˆ’1.0 and 1.0.
In addition, we modify the left subtree of the original
arithmetic tree to a buy-tree, and the right subtree to a sell-
tree. With this modification, the trading signal generated
by two arithmetic trees on date t is given as follows.
IF (the value of the buy-tree on date t> 0)
AND (the value of the sell-tree on date t< 0)
THEN signal(t) â† TRUE
ELSE IF (the value of the buy-tree on date t< 0)
AND (the value of the sell-tree on date t> 0)
THEN signal(t) â† FALSE
ELSE
signal(t) â† signal(tâˆ’ 1)
END IF
(2)
According to the trading signal, the action we should
take at date t is described as follows.
Proceedings of the 2011 Conference on Technologies and Applications of Artificial Intelligence (TAAI 2011)
153
Table I
THE PARAMETERS OF THE GENETIC PROGRAMMING.
Population size 100
Number of generations 200
Initial method equal mix of Full and Grow method
Selection method roulette wheel
Crossover rate 90%
Mutation rate 50%
Maximum depth 3
Table II
THE CUMULATIVE RETURNS FROM 2000/9/14 TO 2010/05/21 WITH
TWO ARITHMETIC TREES FOR GP AND THREE HISTORICAL TRAINING
PERIODS.
Training \testing period 90 180 365 Avg. Stdev.
90 61.27% 53.61% 68.44% 61.11% 7.41%
180 65.69% 66.76% 0.35% 44.27% 38.04%
270 -8.64% -2.30% 109.28% 32.78% 66.33%
365 -19.52% 4.26% 56.52% 13.75% 38.90%
455 68.88% 27.06% 75.71% 57.22% 26.34%
545 60.41% 126.72% 166.57% 117.90% 53.62%
635 73.61% 38.70% 145.58% 85.96% 54.50%
730 21.66% 78.56% 61.72% 53.98% 29.23%
Avg. 40.42% 49.17% 85.52%
Stdev. 37.30% 42.21% 53.17%
unnecessary transactions, hence it did not earn high return.
In Experiments II, III, and IV, two arithmetic trees with
different feature sets are used for training trading strate-
gies, but the training periods in these experiments are not
highly related with the testing period, hence it is hard for
GP to train a profitable trading strategies.
Among the five experiments, the fifth is the most prof-
itable. The cumulative returns of the experiment are shown
in Table II. As one can see, the cumulative returns of all
cases are almost positive, it means that our method has
only small probability to lose money. In the experiment,
when the 545-day training period pairs with 365-day
testing period, we can get the highest cumulative return
166.57%, which is higher than the return of the buy-and-
hold strategy 1.19%. We show the trading record in Figure
5 in 2001 and trading strategies in Table III in the ten
years. In Figure 5, we can buy TAIEX at relatively low
price and sell it at relatively high price in the bull market,
such as the 2nd buying time, 7th buying time, 2nd selling
time, and 7th selling time. In the bear market, we can sell
the stock before the stock crashes, such as 2nd, 3rd, and
6th selling time. It reveals the profitability of our model.
V. CONCLUSION
In this paper, we propose a novel model for investment
in Taiwan Stock Exchange Capitalization Weighted Stock
Index (TAIEX). Our trading strategies are generated by
two arithmetic trees in GP. When 545-day training period
pairs with 365-day testing period, the cumulative return is
166.57%, higher than the buy-and-hold strategy.
In the future, we will try to find more suitable strategies
by searching more periods from the historical data, and
modify the evaluating method for finding similar patterns.
The longest common subsequence or dynamic time warp-
ing is one of the possible ways to find the most similar
subsequences in our training data for GP. We will also
apply the risk management and the portfolio to the stock
investment.
 
 





 






 
 







 







 




 


 




 


 




 
 

 






 
 






 
 





 

 





 

 







 







 





 

 







 







 





 

 





 
	
 







 







 





 
 
 








 








 







	
 






 


 








 







 





 

 







 




	


 




	
 

 






 
 







 






	
 





 
	
 







 







 





 
 
 







 




 


 




 


 




 
 

	



Figure 5. The trading record from 2001/1/1 to 2001/12/31 with 545-day
training period and 365-day testing period in TAIEX. Here, a vertical
solid line represents buying time and a vertical dotted line represents
selling time.
Table III
THE TRADING STRATEGIES FROM 2000/9/14 TO 2010/5/21 WITH
545-DAY TRAINING PERIOD AND 365-DAY TESTING PERIOD IN
TAIEX.
testing period return trading arithmetic trading
count trees strategies
000914Ëœ010913 16.61% 9 buy rule RSV9
sell rule (0.5â‰¥ PSY 14 )AND(-0.1 < BIAS14)
010914Ëœ020913 3.96% 11 buy rule (highpâˆ’(-0.3))âˆ’(MA
14 )
sell rule MACD9>((D3)OR(MACD9 ))
020914Ëœ030913 29.89% 18 buy rule MA
10Ã—((0.6)OR(highp))
sell rule RSV 9 < 0.3Ã—OSC5
030914Ëœ040912 12.33% 3 buy rule (BIAS
14 > MACD9 )â‰¥ MACD9
sell rule (OBV âˆ’ avg.volume20 )< avg.volume20
040913Ëœ050912 1.57% 20 buy rule (RSI
5 âˆ’ BIAS20 )â‰¤0.7
sell rule ((MA14)OR(MA14))â‰¤ MA20
050913Ëœ060912 1.12% 16 buy rule DIF
sell rule (BIAS20 âˆ’ RSI5 )â‰¥(PSY 14 + PSY 14 )
060913Ëœ070912 16.60% 21 buy rule -0.6 â‰¤ (amoutp â‰¥-0.1)
sell rule (RSV 9 < MACD9)> PSY 14
070913Ëœ080911 -6.11% 5 buy rule BIAS
14
sell rule BIAS20
080912Ëœ090911 34.01% 17 buy rule (0.9â‰¥ RSI
14)+BIAS14
sell rule -1.0 âˆ’(highp > avg.volume20 )
090912Ëœ100521 4.48% 14 buy rule D
3 > WMS5
sell rule (DIF âˆ’ MTM5 )â‰¤(0.6Ã—WMS5)
REFERENCES
[1] P. F. Blanco, D. Sagi, and J.I.Hdalgo, â€œTechnical market in-
dicators optimization using evolutionary algorithm,â€ Proc.
of the 2008 GECCO conference companion on Genetic and
evolutionary computation, Atlanta, USA, July 2008.
[2] M. A. Boyacioglu and D. Avci, â€œAn adaptive network-based
fuzzy inference system ANFIS for the prediction of stock
market return: The case of the istanbul stock exchange,â€
Expert Systems with Applications, Vol. 37, pp. 7908â€“7912,
2010.
[3] T. J. Chang, S. C. Yang, and K. J. Chang, â€œPortfolio
optimization problems in different risk measures using ge-
netic algorithm,â€ Expert Systems with Applications, Vol. 36,
pp. 10529â€“10537, 2009.
[4] J. S. Chen, J. L. Hou, S. M. Wu, and Y. W. C. Chien,
â€œConstructing investment strategy portfolios by combina-
Proceedings of the 2011 Conference on Technologies and Applications of Artificial Intelligence (TAAI 2011)
155
- 1 -
åƒåŠ ã€Œåœ‹éš›è¨ˆç®—èˆ‡å®‰å…¨æœƒè­°ã€å ±å‘Š
æ¥Šæ˜Œå½ª
åœ‹ç«‹ä¸­å±±å¤§å­¸è³‡è¨Šå·¥ç¨‹å­¸ç³»
ä¸€ã€åƒåŠ æœƒè­°ç¶“é
å°ç£è’™å¤é›™é‚Šåœ‹éš›åˆä½œè¨ˆç•«(98-2923-E-011-004-MY3)ä¸»æŒäººç‚º
æ´ªè¥¿é€²æ•™æˆ(åŸ·è¡Œæ©Ÿé—œ: åœ‹ç«‹è‡ºç£ç§‘æŠ€å¤§å­¸è³‡è¨Šå·¥ç¨‹ç³»)ï¼Œå”åŒä¸»æŒäºº
ç‚ºé„­æœ‰é€²æ•™æˆ(å°åŒ—ç§‘æŠ€å¤§å­¸)ã€æ¥Šæ˜Œå½ªæ•™æˆ(ä¸­å±±å¤§å­¸)ã€‚åŸ·è¡ŒæœŸé–“ç‚º
2009å¹´8æœˆè‡³2012å¹´7æœˆã€‚ç”±æ–¼é„­æœ‰é€²æ•™æˆæ–¼2010å¹´ç„¡æ³•ä¸€èµ·è‡³è’™å¤é€²
è¡Œäº¤æµäº’è¨ªï¼Œæ•…å”åŒä¸»æŒäººè®Šæ›´ç‚ºæ¥Šç«¹æ˜Ÿæ•™æˆ(æˆåŠŸå¤§å­¸)ã€‚åœ‹ç«‹è’™å¤
å¤§å­¸çš„NYAMJAV.Jæ•™æˆå‰‡æ˜¯è’™å¤çš„å°å£è¯çµ¡èˆ‡åŸ·è¡Œè€…ã€‚è¨ˆç•«ä¸»è¦ç›®
çš„è—‰ç”±å°ç£è’™å¤å…©åœ‹å­¸è€…çš„äº’è¨ªèˆ‡äº¤æµï¼Œé‡å°æƒ¡æ„ç¨‹å¼ä¹‹åµæ¸¬èˆ‡é˜²æ²»
é€²è¡Œæ¢è¨ï¼Œä¸¦è¦–è­°ç¨‹é€²è¡Œå¯èƒ½çš„å…±åŒåˆä½œï¼Œæˆ–è€…æ“´å¤§è¦æ¨¡ä¸¦å¬é–‹åœ‹éš›
æ€§ç›¸é—œæœƒè­°ã€‚
2010å¹´6æœˆï¼Œä»¥è©²åœ‹éš›åˆä½œè¨ˆç•«åç¾©ï¼Œå…±æœ‰ä¸‰äººå‡ºåœ‹è‡³è’™å¤çƒè˜­
å·´æ‰˜(åœ‹ç«‹è’™å¤å¤§å­¸)é€²è¡Œåœ‹éš›åˆä½œäº¤æµï¼šæ´ªè¥¿é€²æ•™æˆ(å°ç£ç§‘æŠ€å¤§
å­¸)ã€æ¥Šç«¹æ˜Ÿæ•™æˆ(æˆåŠŸå¤§å­¸)ã€æ¥Šæ˜Œå½ªæ•™æˆ(ä¸­å±±å¤§å­¸)ã€‚åœ¨äº¤æµæœŸé–“ï¼Œ
ç”±NYAMJAV.Jæ•™æˆå¸¶é ˜å…¶ä»–æ•™æˆã€ç ”ç©¶ç”Ÿã€åŠ©ç†ç­‰ç´„10äººï¼Œèˆ‡æˆ‘å€‘
é€²è¡Œé›™é‚Šæœƒè«‡èˆ‡äº¤æµã€‚æœƒè­°ç”±NYAMJAV.Jæ•™æˆèˆ‡æ´ªè¥¿é€²æ•™æˆå…±åŒä¸»
æŒï¼Œä¸¦ç”±èˆ‡æœƒäººå“¡ç™¼è¡¨æ¼”èªªã€‚åœ¨è’™å¤äº¤æµæœŸé–“ï¼Œé™¤äº†å£é ­å ±å‘Šå¤–ï¼Œäº¦
è¦åŠƒ2011å¹´åœ¨è’™å¤å¬é–‹å°å‹åœ‹éš›æœƒè­°ï¼Œä¸¦å°‡æœƒè­°ä¸»é¡Œç¨åŠ å»¶ä¼¸ï¼Œä»¥ä¾¿
æ“´å¤§åƒèˆ‡ã€‚
åœ‹éš›è¨ˆç®—èˆ‡å®‰å…¨æœƒè­° (The 2011 International Conference on
Computing and Security)ä¾¿æ˜¯åœ¨ä¸Šè¿°èƒŒæ™¯æ‰€èˆ‰è¾¦çš„æœƒè­°ã€‚èˆ‰è¾¦åœ°é»ç‚ºè’™
å¤çƒè˜­å·´æ‰˜(Ulaanbaatar, Mongoliaï¼Œè’™å¤æ–‡ç‚º Ğ£Ğ»Ğ°Ğ°Ğ½Ğ±Ğ°Ğ°Ñ‚Ğ°Ñ€çš„åœ‹ç«‹è’™å¤
å¤§å­¸(The National University of Mongolia) ï¼ŒæœƒæœŸç‚º2011å¹´7æœˆ8æ—¥è‡³7
æœˆ11æ—¥ã€‚
è’™å¤èˆªç©º(AERO MONGOLIAï¼Œæˆç«‹æ–¼2002å¹´)æœ€è¿‘æœ‰é¦™æ¸¯è‡³çƒ
è˜­å·´æ‰˜çš„èˆªç·šï¼Œå› æ­¤æˆ‘å–é“é¦™æ¸¯ã€‚2011/7/7ï¼Œç”±é«˜é›„å…ˆé£›é¦™æ¸¯ï¼Œç„¶å¾Œ
å†è½‰æ©Ÿè‡³çƒè˜­å·´æ‰˜ã€‚é›–ç„¶åœ¨é¦™æ¸¯èµ¤è Ÿè§’æ©Ÿå ´èµ·é£›æ™‚ï¼Œå»¶èª¤äº†å¤§ç´„ä¸‰å€‹
- 3 -
Itemset on Peer-to-Peer Networksâ€
3. Feng-Tse Lin and Hahn-Ming Lee, â€œLayered Architecture and 
Virtualization Technology of Cloud Computingâ€
4. Ching-Ming Lin, Xian Wang, and Shi-Jinn Horng, â€œTopic 
Classified on Micro Blog Using Improved FCMâ€
è’™å¤åœ‹ç«‹å¤§å­¸ï¼Œè‹±æ–‡ï¼šThe National University of Mongolia
ï¼ˆNMUï¼‰ï¼Œè¥¿è£¡çˆ¾è’™å¤æ–‡ï¼šĞœĞ¾Ğ½Ğ³Ğ¾Ğ» Ğ£Ğ»ÑÑ‹Ğ½ Ğ˜Ñ… Ğ¡ÑƒÑ€Ğ³ÑƒÑƒĞ»ÑŒï¼Œæ‹‰ä¸è’™å¤æ–‡ï¼š
Mongol Ulsyn Ikh Surguulï¼Œæ–¼1942å¹´æˆç«‹ã€‚è’™å¤åœ‹ç«‹å¤§å­¸æ˜¯è’™å¤åœ‹
æœ€é«˜å­¸åºœï¼Œæ˜¯è©²åœ‹æœ€æ—©å»ºç«‹çš„å”¯ä¸€çš„ç¶œåˆæ€§å¤§å­¸ï¼Œç‚ºç¤¾æœƒå­¸ç§‘å­¸ã€
è‡ªç„¶ç§‘å­¸ç ”ç©¶é‡è¦ä¸­å¿ƒä¹‹ä¸€ã€‚ä¸‹åœ–ç‚ºè©²æ ¡æ ¡å¾½ï¼š
è’™å¤åœ‹ç«‹å¤§å­¸æ ¡å¾½
ç›®å‰ï¼Œè’™å¤åœ‹ç«‹å¤§å­¸æ“æœ‰12000åå­¸ç”Ÿ(2006å¹´è³‡æ–™ï¼‰ã€‚ç›®å‰è’™
å¤åœ‹ç«‹å¤§å­¸è¨­ç½®çš„ç³»é™¢å¦‚ä¸‹ï¼š
ï‚· åœ°ç†åœ°è³ªç³»
ï‚· ç”Ÿç‰©ç³»
ï‚· åŒ–å­¸ç³»
ï‚· æ•¸å­¸èˆ‡è¨ˆç®—æ©Ÿç§‘å­¸å­¸é™¢
ï‚· ç‰©ç†èˆ‡é›»å­å­¸é™¢
ï‚· è’™å¤å­¸å­¸é™¢
ï‚· å¤–åœ‹èªè¨€å’Œæ–‡åŒ–å­¸é™¢
ï‚· ç¶“æ¿Ÿç§‘å­¸å­¸é™¢
ï‚· æ³•å­¸é™¢
ï‚· ç¤¾æœƒç§‘å­¸å­¸é™¢
ï‚· åœ‹éš›é—œä¿‚å­¸é™¢
- 5 -
ä¿„æ–‡Cå°æ‡‰è‡³è‹±æ–‡Sï¼Œä¿„æ–‡Ğ»å°æ‡‰è‡³è‹±æ–‡Lç­‰ç­‰ï¼Œè©³å¦‚é™„è¡¨æ‰€åˆ—ã€‚æŒæ¡
å°æ‡‰è¡¨å¾Œï¼Œæœ‰äº›èˆ‡è‹±æ–‡è¿‘ä¼¼çš„ä¿„æ–‡ï¼Œæˆ–å¤–ä¾†çš„è’™å¤æ–‡ï¼Œå³å¯ä¸€ç›®äº†ç„¶ã€‚
ä¾‹å¦‚ï¼Œã€ŒéŠ€è¡Œã€çš„ä¿„æ–‡ç‚ºĞ‘Ğ°Ğ½Ğºï¼Œè’™å¤æ–‡ä¹Ÿå¦‚æ­¤å¯«ï¼Œåˆ©ç”¨å°æ‡‰è¡¨ï¼Œæ›æˆ
è‹±æ–‡å­—æ¯å³ç‚º bankï¼Œèˆ‡è‹±æ–‡å®Œå…¨ä¸€æ¨£ï¼›ã€Œè¶…ç´šå¸‚å ´ã€çš„ä¿„æ–‡
Ğ¡ÑƒĞ¿ĞµÑ€Ğ¼Ğ°Ñ€ĞºĞµÑ‚ï¼Œè’™å¤æ–‡ä¹Ÿå¦‚æ­¤å¯«ï¼Œæ›æˆè‹±æ–‡å­—æ¯å³ç‚ºsupermarket ï¼Œèˆ‡
è‹±æ–‡å®Œå…¨ä¸€æ¨£ã€‚ã€Œè’™å¤ã€ä¹‹è’™å¤æ–‡ç‚ºĞ¼Ğ¾Ğ½Ğ³Ğ¾Ğ»ï¼Œå°æ‡‰è‡³è‹±æ–‡å³ç‚ºMongolã€‚
é™„è¡¨ï¼šä¿„æ–‡å­—æ¯èˆ‡è‹±æ–‡å­—æ¯å°æ‡‰è¡¨
Ğ Ğ° Ğ‘ Ğ± Ğ’ Ğ² Ğ“ Ğ³ Ğ” Ğ´ Ğ• Ğµ Ğ Ñ‘ Ğ– Ğ¶ Ğ— Ğ· Ğ˜ Ğ¸ Ğ™ Ğ¹
Ğ° Ğ±Ñ Ğ²Ñ Ğ³Ñ Ğ´Ñ Ğ¹Ñ Ğ¹Ğ¾ Ğ¶Ğµ Ğ·Ñ Ğ¸
Ğ¸ 
ĞºÑ€Ğ°ÌÑ‚ĞºĞ¾Ğµ
a b v g d ye / ie yo / io (zh) z i y
Ğš Ğº Ğ› Ğ» Ğœ Ğ¼ Ğ Ğ½ Ğ Ğ¾ ĞŸ Ğ¿ Ğ  Ñ€ Ğ¡ Ñ Ğ¢ Ñ‚ Ğ£ Ñƒ Ğ¤ Ñ„
ĞºĞ° ÑĞ» ÑĞ¼ ÑĞ½ Ğ¾ Ğ¿Ñ ÑÑ€ ÑÑ Ñ‚Ñ Ñƒ ÑÑ„
k l m n o p (r) s t u f
Ğ¥ Ñ… Ğ¦ Ñ† Ğ§ Ñ‡ Ğ¨ Ñˆ Ğ© Ñ‰ Ğª ÑŠ Ğ« Ñ‹ Ğ¬ ÑŒ Ğ­ Ñ Ğ® Ñ Ğ¯ Ñ
Ñ…Ğ° Ñ†Ñ Ñ‡Ñ ÑˆĞ° Ñ‰Ğ°
Ñ‚Ğ²Ñ‘Ñ€Ğ´Ñ‹Ğ¹ 
Ğ·Ğ½Ğ°Ğº
Ñ‹
Ğ¼ÑÌĞºĞ¸Ğ¹ 
Ğ·Ğ½Ğ°Ğº
Ñ Ğ¹Ñƒ Ğ¹Ğ°
(kh) ts (ch) (sh) (shch) - (y) - e yu / iu ya / ia
å››ã€æ”œå›è³‡æ–™åç¨±åŠå…§å®¹
æ­¤æ¬¡æœƒè­°ä¹‹å¾Œï¼Œæˆ‘æ”œå›æœƒè­°è«–æ–‡é›†å…‰ç¢Ÿç‰‡ä¸€ç‰‡ï¼Œå¦‚ä¸‹ï¼š
1. Proceedings of the 2011 International Conference on
Computing and Security, Ulan Bator, Mongolia, July 7-11,
2011.
- 7 -
æ¥Šæ˜Œå½ªæ•™æˆæ–¼æœƒå ´æ¼”è¬›å»³ç•™å½±
TABLE I
THE FOUR GC-LCS PROBLEMS DEFINED BY CHEN AND CHAO [6] AND
THE TIME COMPLEXITIES OF THEIR PROPOSED METHODS.
Including P Excluding P
As subsequence SEQ-IC-LCS SEQ-EC-LCS
O(nmr)
As substring STR-IC-LCS STR-EC-LCS
O(nmr) O(nmr)
II. A COUNTER EXAMPLE TO CHEN AND CHAOâ€™S
ALGORITHM
Definition 1. (STR-EC-LCS problem [6]). Given two input
sequences X and Y of lengths n and m, respectively, and
a constraint string P of length r, the STR-EC-LCS (string
excluding) problem is to find the longest common subsequence
Z of X and Y excluding P as a substring.
For the STR-EC-LCS problem, Chen and Chao [6] proposed
an dynamic programming algorithm with O(nmr) time to
solve it. Their recurrence formula is shown in Figure 1, where
LChen(i, j, k) denotes the length of the LCS of X1..i and Y1..j
excluding P1..k as a substring.
Now we provide a simple counter example, X = axbc,
Y = abyc and P = ac, which breaks Chen and Chaoâ€™s
algorithm for the STR-EC-LCS problem. Evidently, the LCS
of X and Y , abc, does not contain ac as a substring. That
is to say, abc excludes the constraint P . However, Chen and
Chaoâ€™s algorithm would return the answer LChen(4, 4, 2) = 2,
where the corresponding result sequence is ab or bc. Part of
the recursive process of calling LChen(4, 4, 2) is illustrated in
Figure 2. One can see that their answer is not correct and the
length is shorter than |abc| = 3. It concludes that Chen and
Chaoâ€™s algorithm fails to solve the STR-EC-LCS problem.
III. A STRAIGHTFORWARD BACKTRACKING ALGORITHM
In this section, we give a simple straightforward back-
tracking algorithm which correctly solves the STR-EC-LCS
problem. Although it runs in exponential time, we will show
that it can be reduced to an efficient polynomial-time algorithm
with similar ideas in the next section.
Algorithm 1 shows a backtracking algorithm for solving the
STR-EC-LCS problem. We denote L1(i, j,Tail) as the longest
length of the common subsequence of X1..i and Y1..j such that
the concatenation of the common subsequence and string Tail
excludes P as a substring. For each recursive step, string Tail
denotes the tail of the possible answer sequence obtained by
the previous step. The answer of STR-EC-LCS is obtained
by invoking L1(n,m, Ï†) recursively, where â€˜Ï†â€™ denotes the
empty string. We consider the example, X = axbc, Y = abyc
and P = ac, which breaks Chen and Chaoâ€™s algorithm for
the STR-EC-LCS problem in the previous section. Part of
the recursive process of invoking L1(4, 4, Ï†) is illustrated in
Figure 3. The bold edges indicate the path corresponding to
the answer, abc. We also note that L1(0, 0, â€˜acâ€™) = âˆ’âˆ since
the constraint is violated, which means that node L1(0, 0, â€˜acâ€™)
is never considered as a part of the answer.
It is not difficult to examine the correctness of Algorithm
1. The boundary conditions are handled in Lines 1-4, where
Lines 3-4 deal with the normal terminations. Lines 1-2 deal
with the case that the constraint P has been contained in Tail
as a substring, or more precisely, a prefix. The constraint has
been violated in this case, thus âˆ’âˆ is returned which means
that we would never consider this state as a part of the answer.
Lines 5-7 consider the case that xi and yj are matched. In this
case, we call L1 recursively to determine whether the matched
symbol xi should be chosen as a part of the answer or not.
If we choose xi as a part of the answer, xi will be inserted
in front of Tail to form a new string New Tail, where â€˜âŠ•â€™
denotes the string concatenation. Lines 8-9 consider the case
of mismatch in which either xi or yj will be dropped.
It is evident that even if we use the dynamic programming
technique to reduce the total number of states in the recursive
process, there are still O(nm|Î£|m) states in the worst case.
Theorem 1. Algorithm 1 can correctly solve the STR-EC-LCS
problem in exponential time.
IV. OUR ALGORITHM FOR THE STR-EC-LCS PROBLEM
Although Algorithm 1 requires exponential time, in this
section, we will show that the required time can be reduced and
thus an efficient algorithm with polynomial time is proposed.
After investigating the relationship between the string Tail and
the constraint P in Algorithm 1, we find that a property holds
when solving STR-EC-LCS with the recursive function L1, as
shown in Lemma 1.
Definition 2. (Longest prefix-suffix). Given two strings S1
and S2, we denote LPS(S1, S2) as the longest prefix of S1
that matches a suffix of S2.
Lemma 1. For a given string S excluding P as a substring,
L1(i, j, S) = L1(i, j,LPS(S, P )).
Proof. We assume L1(i, j, S) Ì¸= L1(i, j,LPS(S, P )) and
prove it by contradiction. For ease of presentation, we denote
S = V V â€² where V = LPS(S, P ). Besides, we denote the
corresponding strings of L1(i, j, S) and L1(i, j, V ) as U1
and U2, respectively. In other words, |U1| = L1(i, j, S) and
|U2| = L1(i, j, V ). If L1(i, j, S) Ì¸= L1(i, j, V ), then two
possible cases would be considered as follows.
1) L1(i, j, S) > L1(i, j, V ). It means that U1S excludes
P as a substring and U1V contains P as a substring,
otherwise U1 can be concatenated with V and gains
a better length |U1| > L1(i, j, V ). However, U1V is
a prefix of U1S. If U1V contains P as a substring,
U1S would also contain P as a substring, which is a
contradiction.
2) L1(i, j, S) < L1(i, j, V ). It means that U2S = U2V V â€²
contains P as a substring and U2V excludes P as a
substring. By definition, S = V V â€² excludes P , the
occurrence of P in U2V V â€² should start inside U2 and
end inside V â€². Thus, there would exist a suffix of P that
is also a prefix of V V â€² and its length is longer than |V |.
L1(4,4,Ïˆ) = 3
L1(3,3,â€œcâ€) = 2 L1(3,4,Ïˆ) L1(4,3,Ïˆ)
L1(2,3,â€œcâ€) L1(3,2,â€œcâ€) = 2
L1(2,1,â€œbcâ€) = 1 L1(2,2,â€œcâ€) L1(3,1,â€œcâ€)
+1 (c)
+1 (b)
L1(1,1,â€œbcâ€) = 1 L1(2,0,â€œbcâ€)
L1(0,0,â€œabcâ€) = 0 L1(0,1,â€œbcâ€) L1(1,0,â€œbcâ€)
+1 (a)
L1(2,1,â€œcâ€)
L1(1,1,â€œcâ€) = 0
L1(0,0,â€œacâ€) = -âˆ
L1(3,0,â€œcâ€)
L1(2,0,â€œcâ€)
L1(0,1,â€œcâ€) = 0 L1(1,0,â€œcâ€) = 0
+1 (a)
Fig. 3. Part of the process of invoking L1(4, 4, Ï†), where X = axbc, Y = abyc and P = ac. The result shows that L1(4, 4, Ï†) = 3.
Algorithm 2 L2(i, j, l)
1: if l = |P | then {â—ƒ boundary condition: violating the constraint}
2: return âˆ’âˆ
3: else if i = 0 or j = 0 then {â—ƒ normal boundary condition}
4: return 0
5: else if xi = yj then {â—ƒ matched}
6: lâ€² â‡ |LPS(xi âŠ• P(râˆ’l+1)..r, P )|
7: return max{L2(iâˆ’ 1, j âˆ’ 1, lâ€²) + 1,L2(iâˆ’ 1, j, l),L2(i, j âˆ’ 1, l)}
8: else {â—ƒ xi Ì¸= yj , mismatched}
9: return max{L2(iâˆ’ 1, j, l),L2(i, j âˆ’ 1, l)}
10: end if
P(râˆ’l+1)..r, P )| in Line 6. By observing the paths in the
recursive process of calling L2, the behaviors of the third
parameter l can be described as follows. When xi is equal to
p(râˆ’l), we set the new prefix-suffix length lâ€² with l+1, which
means that the length of matched suffix of P increases by one.
On the other hand, when xi is not equal to p(râˆ’l), the length of
matched suffix of P has to be shortened to the largest lâ€² such
that P(râˆ’l+1)..(râˆ’l+lâ€²âˆ’1) = P(râˆ’lâ€²+2)..r and xi = p(râˆ’lâ€²+1).
One can see that this process is similar to slide a pattern
when executing Knuth-Morris-Pratt (KMP) algorithm [8, 14],
a famous string matching algorithm. KMP algorithm searches
for a pattern in a text efficiently by precomputing the prefix
function of the given pattern [8] and then sliding the pattern
efficiently when the matching failure occurs.
Definition 3. (Prefix function [8]). Given a string S, the prefix
function f(i) denotes the length of the longest prefix of S1..iâˆ’1
that matches a suffix of S1..i.
Figure 4(a) shows the table of the pattern S = ababbababc
and its corresponding prefix function. For example, f(9) = 4,
f(4) = 2 and f(2) = 0 illustrate the sliding process of
KMP algorithm [8, 14] when the matching failure occurs
after S1..9 was matched, as shown in Figure 4(b). We should
notice that the constraint P is backward matched when L1 and
L2 are called recursively. Therefore, we will precompute the
prefix function of the reversed string P of P . We should also
notice that the amortized analysis of the linear-time matching,
or more precisely, constant-time sliding, of KMP algorithm
would be violated since there are more than one path in the
recursive process of calling L2. To ensure the sliding of the
pattern to be executed efficiently, we define the next function as
follows, which achieves constant query time by precomputing
a two-dimensional table.
Definition 4. (Next function). Given a string S and a symbol
Ïƒ âˆˆ Î£, the next function pi(i, Ïƒ) denotes the length of the
longest prefix of S1..i+1 that matches a suffix of S1..i âŠ• Ïƒ.
ternational Journal of Foundations Computer Science,
Vol. 16, No. 6, pp. 1099â€“1109, 2005.
[5] C. Blum, M. J. Blesa, and M. LoÂ´pez-IbaÂ´nËœez, â€œBeam
search for the longest common subsequence problem,â€
Computers and Operations Research, Vol. 36, No. 12,
pp. 3178â€“3186, 2009.
[6] Y. C. Chen and K. M. Chao, â€œOn the generalized
constrained longest common subsequence problems,â€
Journal of Combinatorial Optimization, Vol. 21, No. 3,
pp. 383â€“392, 2011.
[7] F. Y. L. Chin, A. D. Santis, A. L. Ferrara, N. L. Ho,
and S. K. Kim, â€œA simple algorithm for the constrained
sequence problems,â€ Information Processing Letters,
Vol. 90, No. 4, pp. 175â€“179, 2004.
[8] T. H. Cormen, C. E. Leiserson, R. L. Rivest, and C. Stein,
Introduction to Algorithms. MIT Press, second ed., 2001.
[9] Z. Gotthilf, D. Hermelin, G. M. Landau, and M. Lewen-
stein, â€œRestricted LCS,â€ String Processing and Infor-
mation Retrieval (SPIRE), Lecture Notes in Computer
Science, Vol. 6393, pp. 250â€“257, 2010.
[10] Z. Gotthilf, D. Hermelin, and M. Lewenstein, â€œCon-
strained LCS: hardness and approximation,â€ Combi-
natorial Pattern Matching, 19th Annual Symposium
(CPM2008), Pisa, Italy, pp. 255â€“262, 2008.
[11] D. S. Hirschberg, â€œAlgorithms for the longest common
subsequence problem,â€ Journal of the ACM, Vol. 24,
No. 4, pp. 664â€“675, 1977.
[12] J. W. Hunt and T. G. Szymanski, â€œA fast algorithm for
computing longest common subsequences,â€ Communica-
tions of the ACM, Vol. 20, No. 5, pp. 350â€“353, 1977.
[13] C. S. Iliopoulos and M. S. Rahman, â€œNew efficient
algorithms for the LCS and constrained LCS problems,â€
Information Processing Letters, Vol. 106, No. 1, pp. 13â€“
18, 2008.
[14] D. E. Knuth, J. H. Morris Jr., and V. Pratt, â€œFast pat-
tern matching in strings,â€ SIAM Journal on Computing,
Vol. 6, No. 2, pp. 323â€“350, 1977.
[15] D. Maier, â€œThe complexity of some problems on sub-
sequences and supersequences,â€ Journal of the ACM,
Vol. 25, pp. 322â€“336, 1978.
[16] Y. H. Peng, C. B. Yang, K. S. Huang, and K. T.
Tseng, â€œAn algorithm and applications to sequence align-
ment with weighted constraints,â€ International Journal of
Foundations of Computer Science, Vol. 21, No. 1, pp. 51â€“
59, 2010.
[17] S. J. Shyu and C. Y. Tsai, â€œFinding the longest common
subsequence for multiple biological sequences by ant
colony optimization,â€ Computers and Operations Re-
search, Vol. 36, No. 1, pp. 73â€“91, 2009.
[18] C. Y. Tang, C. L. Lu, M. D. T. Chang, Y. T. Tsai, Y. J.
Sun, K. M. Chao, J. M. Chang, Y. H. Chiou, C. M.
Wu, H. T. Chang, and W. I. Chou, â€œConstrained multiple
sequence alignment tool development and its application
to RNase family alignment,â€ Journal of Bioinformatics
and Computational Biology, Vol. 1, pp. 267â€“287, 2003.
[19] Y. T. Tsai, â€œThe constrained longest common sub-
sequence problem,â€ Information Processing Letters,
Vol. 88, No. 4, pp. 173â€“176, 2003.
[20] P. van Emde Boas, â€œPreserving order in a forest in
less than logarithmic time and linear space,â€ Information
Processing Letters, Vol. 6, No. 3, pp. 80â€“82, 1977.
[21] R. Wagner and M. Fischer, â€œThe string-to-string cor-
rection problem,â€ Journal of the ACM, Vol. 21, No. 1,
pp. 168â€“173, 1974.
[22] C. B. Yang and R. C. T. Lee, â€œSystolic algorithm for the
longest common subsequence problem,â€ Journal of the
Chinese Institute of Engineers, Vol. 10, No. 6, pp. 691â€“
699, 1987.
99 å¹´åº¦å°ˆé¡Œç ”ç©¶è¨ˆç•«ç ”ç©¶æˆæœå½™æ•´è¡¨ 
è¨ˆç•«ä¸»æŒäººï¼šæ¥Šæ˜Œå½ª è¨ˆç•«ç·¨è™Ÿï¼š99-2221-E-110-048- 
è¨ˆç•«åç¨±ï¼šåˆ†æ•£é¢¨éšªä¹‹åŸºé‡‘çµ„åˆæŠ•è³‡ç­–ç•¥é æ¸¬ 
é‡åŒ– 
æˆæœé …ç›® 
å¯¦éš›å·²é”
æˆæ•¸ï¼ˆè¢«
æ¥å—æˆ–å·²
ç™¼è¡¨ï¼‰
é æœŸç¸½é”
æˆæ•¸(å«å¯¦
éš›å·²é”æˆ
æ•¸) 
æœ¬è¨ˆç•«
å¯¦éš›è²¢
ç»ç™¾åˆ†
æ¯” 
å–®ä½
å‚™è¨»ï¼ˆè³ªåŒ–èªªæ˜ï¼šå¦‚æ•¸å€‹è¨ˆç•«
å…±åŒæˆæœã€æˆæœåˆ—ç‚ºè©²æœŸåˆŠ
ä¹‹å°é¢æ•…äº‹...ç­‰ï¼‰ 
æœŸåˆŠè«–æ–‡ 0 0 100%  
ç ”ç©¶å ±å‘Š/æŠ€è¡“å ±
å‘Š 0 0 100%  
ç ”è¨æœƒè«–æ–‡ 2 2 100% 
ç¯‡
H. H. Chen, C. B. Yang, and Y. 
H. Peng, â€™Genetic 
programming for the 
investment of the mutual fund 
with Ssortino ratio and mean 
variance model,â€™ Proc. of the 
15th Conference on Artificial 
Intelligence and 
Applications, Hsinchu, 
Taiwan, Nov. 2010. 
S.M. Jhou,, C.B. Yang and H.H. 
Chen, â€™â€™â€™â€™â€™â€™â€™â€™Taiwan 
Stock Forecasting with the 
Genetic 
Programming,â€™â€™â€™â€™â€™â€™â€™â€™ 
Proc. of the 16th Conference 
on Artificial Intelligence 
and Applications, Taoyuan, 
Taiwan, Nov. 11-13, 2011. 
è«–æ–‡è‘—ä½œ 
å°ˆæ›¸ 0 0 100%   
ç”³è«‹ä¸­ä»¶æ•¸ 0 0 100%  å°ˆåˆ© å·²ç²å¾—ä»¶æ•¸ 0 0 100% ä»¶  
ä»¶æ•¸ 0 0 100% ä»¶  
æŠ€è¡“ç§»è½‰ 
æ¬Šåˆ©é‡‘ 0 0 100% åƒå…ƒ  
ç¢©å£«ç”Ÿ 10 10 100%  
åšå£«ç”Ÿ 3 3 100%  
åšå£«å¾Œç ”ç©¶å“¡ 0 0 100%  
åœ‹
å…§ 
åƒèˆ‡è¨ˆç•«äºº
åŠ› 
ï¼ˆæœ¬åœ‹ç±ï¼‰ 
å°ˆä»»åŠ©ç† 0 0 100% 
äººæ¬¡
 
æœŸåˆŠè«–æ–‡ 0 0 100%  
ç ”ç©¶å ±å‘Š/æŠ€è¡“å ±
å‘Š 0 0 100%  
åœ‹
å¤– 
è«–æ–‡è‘—ä½œ 
ç ”è¨æœƒè«–æ–‡ 1 1 100% 
ç¯‡
Hsing-Yen Ann, Chang-Biau 
Yang and Chiou-Ting 
Tseng, â€™â€™â€™â€™ Efficient 
